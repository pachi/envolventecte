{"version":3,"sources":["components/Footer.js","utils.js","stores/defaults.js","stores/AppState.js","components/img/logo.svg","components/img/outline-live_help-24px.svg","components/img/outline-info-24px.svg","components/img/baseline-archive-24px.svg","components/Nav.js","components/img/FotoDani.jpg","components/img/FotoMarta.jpg","components/AboutPage.js","components/img/FotoPachi.jpg","components/img/baseline-add-24px.svg","components/img/baseline-remove-24px.svg","components/img/select-rows.svg","components/img/unselect-rows.svg","components/img/outline-file_copy-24px.svg","components/building/AddRemoveButtonGroup.js","components/img/full_geom_icon.svg","components/img/null_pos_icon.svg","components/img/valid_pos_icon.svg","components/img/valid_poly_icon.svg","components/img/null_poly_icon.svg","components/img/partial_geom_icon.svg","components/climate/IconsOrientaciones.js","components/building/TableHelpers.js","components/building/GeometryEditors.js","components/building/HuecosTable.js","components/img/outline-add_comment-24px.svg","components/building/HuecosView.js","components/building/IndicatorsKChart.js","components/building/IndicatorsKDetail.js","components/building/IndicatorsUChart.js","components/building/IndicatorsUDetail.js","components/building/IndicatorsQSolJulChart.js","components/building/IndicatorsQSolJulDetail.js","components/building/IndicatorsN50Chart.js","components/building/IndicatorsN50Detail.js","components/building/IndicatorsPanel.js","components/building/ClimateSelector.js","components/building/MetaParams.js","components/building/OpacosTable.js","components/building/OpacosView.js","components/building/PTsTable.js","components/building/PTsView.js","components/building/ShadesTable.js","components/building/ShadesView.js","components/building/SpacesTable.js","components/building/SpacesView.js","components/building/WallConsTable.js","components/building/WallConsView.js","components/building/WinConsTable.js","components/building/WinConsView.js","components/BuildingPage.js","components/three/ctematerials.js","components/three/ctemodel.js","components/three/gui/GUIView.js","components/three/ThreeView.js","components/ThreeDPage.js","components/climate/JulyRadiationTable.js","components/climate/MonthlyRadiationTable.js","components/climate/IconsFshwith.js","components/climate/ShadingFactorsTable.js","components/ClimatePage.js","elements.js","components/ElementsPage.js","components/img/5R1C.svg","components/img/orientaciones.svg","components/HelpPage.js","components/DropZone.js","components/img/outline-new_document-24px.svg","components/MainPage.js","components/App.js","main.js","../wasm/pkg/wasm_envolventecte_bg.js"],"names":["Footer","Row","Col","className","style","backgroundColor","uuidv4","replace","c","crypto","getRandomValues","Uint8Array","toString","round_or_dash","val","numDecimals","undefined","isNaN","toFixed","DEFAULT_SPACE","id","name","area","multiplier","type","inside_tenv","height","n_v","z","exposed_perimeter","DEFAULT_WALL","A","bounds","cons","space","nextto","geometry","azimuth","tilt","position","polygon","DEFAULT_WINDOW","wall","fshobst","width","setback","DEFAULT_SHADE","DEFAULT_TB","kind","L","psi","DEFAULT_WALLCONS","group","thickness","R_intrinsic","absorptance","DEFAULT_WINCONS","U","Ff","gglwi","gglshwi","C_100","configure","enforceActions","MONTHLYRADIATIONDATA","get_monthly_radiation_data","DEFAULT_META","is_new_building","is_dwelling","num_dwellings","climate","global_ventilation_l_s","n50_test_ach","d_perim_insulation","rn_perim_insulation","appstate","meta","spaces","walls","windows","shades","wallcons","wincons","thermal_bridges","errors","newHueco","newOpaco","newPT","newShade","newSpace","newWallCons","newWinCons","makeObservable","this","observable","he1_indicators","computed","requiresReaction","zoneslist","orientations","warnings","climatedata","climateTotRadJul","agrupaHuecos","action","agrupaOpacos","agrupaPts","loadModel","clearModel","asJSON","loadData","Set","map","v","zone","orientation","filter","reduce","acc","dir","dif","getModel","concat","spaces_list","find","s","spacenxt","huecosagrupados","hueco","h","e","h2","h1","push","opacosagrupados","opaco","o","o2","o1","oldid","newid","w","ptsagrupados","pt","p","p2","Number","inputData","JSON","stringify","data","mode","load_fshobst_data_from_kyg","load_data_from_ctehexml","load_data_from_json","level","msg","length","window","err","example","createContext","NavBar","observer","projectName","useContext","AppState","fileDownload","React","createRef","Navbar","bg","variant","fixed","Brand","to","title","src","imglogo","alt","Toggle","aria-controls","Collapse","Nav","eventKey","Link","borderLeft","margin","md","Form","Label","htmlFor","Control","size","value","onChange","target","as","placeholder","custom","icondownload","ref","onClick","_e","contents","contenthash","str","hashvalue","i","charCodeAt","hash","filename","blob","Blob","uri","URL","createObjectURL","link","document","createElement","download","href","body","appendChild","click","removeChild","open","handleDownload","iconhelp","Item","iconinfo","AboutPage","props","Container","fluid","route","Alert","span","offset","Image","responsive","FotoDani","FotoMarta","version","get_version","AddRemoveButtonGroup","elements","newobj","selected","setSelected","includes","ButtonToolbar","ButtonGroup","aria-label","Button","element","iconplus","newids","forEach","selectedIndex","findIndex","idx","selectedObj","dupObj","splice","iconduplicate","indices","cur","minidx","Math","max","min","filtered","iconless","iconselectall","iconselectnone","OrientacionesSprite","xmlns","display","viewBox","d","fill","color","opacity","cx","cy","stroke","strokeWidth","rx","ry","y","x","OrientaIcon","verticalAlign","xlinkHref","TiltIcon","BOUNDARYTYPESMAP","EXTERIOR","INTERIOR","ADIABATIC","GROUND","SPACETYPESMAP","CONDITIONED","UNCONDITIONED","UNINHABITED","THERMALBRIDGETYPESMAP","ROOF","BALCONY","CORNER","INTERMEDIATEFLOOR","INTERNALWALL","GROUNDFLOOR","PILLAR","WINDOW","GENERIC","getFloatOrOld","newValue","oldValue","parseFloat","Float1DigitsFmt","cell","_row","_rowIndex","_formatExtraData","Float2DigitsFmt","BoolFmt","AzimuthFmt","azimuth_angle","normalize","azimuth_name","TiltFmt","tilt_angle","tilt_name","PosFmt","pos","OpaqueGeomFmt","geom","poly","point","join","WindowGeomFmt","WindowGeomIconFmt","row","formatExtraData","wallData","azimuth_dir","tilt_dir","fullGeometryIcon","partialGeometryIcon","OpaqueGeomIconFmt","BoundaryFmt","BoundaryOpts","Object","keys","k","label","ThermalBridgeTypesFmt","ThermalBridgeTypesOpts","SpaceTypeFmt","spaceTypesOpts","start","end","floor","GeometryOpaquesEditor","forwardRef","_ref","onUpdate","posIsNull","useState","isNull","setIsNull","show","setShow","xPos","setXPos","yPos","setYPos","zPos","setZPos","X","Y","setPoly","setAzimuth","setTilt","handleCancel","Modal","role","centered","onHide","Header","closeButton","Title","Body","updateData","AzimuthTiltEditor","ev","currentTarget","background","PositionEditor","inputXRef","useRef","inputYRef","inputZRef","toggle","ToggleButton","checked","Group","readOnly","CoordsTable","columns","dataField","isKey","hidden","formatter","text","align","headerTitle","_col","_colIndex","headerClasses","headerAlign","headerFormatter","fontWeight","keyField","striped","hover","bordered","cellEdit","cellEditFactory","blurToSave","afterSaveCell","column","selectRow","clickToSelect","clickToEdit","onSelect","isSelected","it","hideSelectColumn","bgColor","newPoly","GeometryWindowEditor","setWidth","setHeight","setSetback","WidthHeightSetbackEditor","winUValuesMap","u_values","error_ids_warning","error_ids_danger","fromEntries","is_outside_tenv","Map","win","wall_inside_tenv","wall_is_inside_tenv","winconsMap","WinconsOpts","WallsOpts","_cell","u_value_window","u_value","editor","Type","SELECT","options","editorRenderer","editorProps","isDummyField","editable","classes","uvalue","rowClasses","_rowIdx","outside","HuecosView","_","update_fshobst","icongroup","KElementsChart","format","bar_value_padding","d3Container","useEffect","container","current","chart_width","chart_height","d3","selectChildren","remove","svg","attr","append","range","domain","short_title","padding","areSubtype","call","selectAll","k_pct","nice","tickSize","tickFormat","bar","enter","bandwidth","abs","formatted","elem","bold","KElementsTable","K","Table","colSpan","a","au","u_mean","k_contrib","key","elem_tr","build_k_data","total_a","U_mean","K_contrib","K_pct","elem_au","elem_a","K_data","summary","roofs","floors","ground","tbs","opaques_a","opaques_au","windows_a","windows_au","tbs_l","tbs_psil","all_elements","roof","l","psil","balcony","corner","intermediate_floor","internal_wall","ground_floor","pillar","generic","k_data","patternUnits","patternTransform","UElementsChart","round","u_max","filtered_data","uColor","ticks","select","tickSizeOuter","tickSizeInner","tooltip","insert","u_min","on","transition","duration","html","pageX","pageY","_d","UElementsTable","QSolJulChartWindRose","radius","outerRadius","innerRadius","chart","dataOrientations","max_pct","ceil","q_pct","PI","arc","startAngle","orient","endAngle","pie","sort","g","centroid","txt","inLowerHalf","_g","Orientations","QSolJulTable","q_soljul","Q_soljul","a_wp","irradiance_mean","fshobst_mean","gglshwi_mean","Ff_mean","detail_data","area_ref","irradiance","gains","q_soljul_data","detail","q_soljul_detail","det","q_contrib","N50ChartPie","pct","outerArc","slice","exit","midAngle","polyline","posA","posB","posC","n50_data","n50_ref","n50","walls_a","walls_c","walls_c_ref","walls_c_a","walls_c_a_ref","windows_c","windows_c_a","vol","factor_n50_to_ca","factor_ca_to_n50","ca_tot","n50_info","ca","details","setDetails","setWarnings","vol_env_net","vol_env_gross","compacity","numavisos","Card","Badge","clear","in","border","toLowerCase","isShown","ClimateSelector","controlId","labelStyle","MetaParams","Check","defaultValue","step","wallconsMap","WallconsOpts","spaceMap","SpaceFmt","SpaceOpts","wallUValuesMap","u_value_wall","OpacosView","headerAttrs","PTsView","tableHeaderClass","ShadesView","BoolEditor","setValue","onKeyDown","onBlur","NVEditor","res","_column","_columnIndex","customEditor","getElement","SpacesView","walls_Co100","WallConsView","activeKey","setActiveKey","Tabs","Tab","material_lines","LineBasicMaterial","linewidth","material_select","MeshLambertMaterial","side","DoubleSide","material_shades","transparent","material_windows","material_adiabatic","material_walls","material_walls_ground","material_roofs","material_roofs_ground","material_floors","material_floors_ground","chooseMaterial","obj","material","userData","subtype","console","log","degToRad","MathUtils","initObjectsFromModel","model","scene","buildingGroup","wireframeGroup","bGroup","getObjectByName","children","rotation","wfGroup","wallSubtype","getWallSubtype","wallBounds","wallTransform","transformMatrix","wallLocal2WallPolyTransform","wall_polygon","v0","v1","angleX","Vector2","angle","cos","sin","Matrix3","set","wallLocal2WallPolygon","wallShape","Shape","wallWindows","winShape","windowShape","winMesh","meshFromShape","parent","parentId","winSetback","buffergeometryNormal","clone","multiplyScalar","translate","toArray","add","holes","wallMesh","wireframe","LineSegments","EdgesGeometry","renderOrder","shade","shadeTransform","points","shadeMesh","shape","transform","winGeom","ShapeGeometry","applyMatrix4","computeVertexNormals","Mesh","receiveShadow","castShadow","vA","index","getX","normalAttr","getAttribute","normal","Vector3","fromBufferAttribute","coords","applyMatrix3","setFromPoints","mtilt","Matrix4","makeRotationX","mazim","makeRotationZ","makeTranslation","multiply","GUIView","containerRef","params","inspectMode","selectedElementName","showExteriorRoofs","showExteriorWalls","showExteriorFloors","showExteriorWindows","showInteriorWalls","showGroundWalls","showAdiabaticWalls","showShades","lastSelected","initPane","pane","dispose","Pane","expanded","folder","addFolder","addInput","onselectedElementChange","bind","folder2","onOpacityChange","onVisibilityChange","event","traverse","child","oldMaterial","selector","presetKey","_subtype","_type","_bounds","visible","flexFlow","northSymbolCircleMaterial","THREE","northSymbolArrowMaterial","groundPlaneMaterial","ShadowMaterial","createNorthSymbol","symbolGroup","circle","arrowShape","moveTo","lineTo","closePath","arrow","initGround","groundGroup","PlaneGeometry","gridHelper","GridHelper","setValues","AxesHelper","updateGround","bbox","setFromObject","center","getSize","getCenter","maxSize","initLights","light_amb","AmbientLight","light","DirectionalLight","shadow","normalBias","bias","camera","left","right","top","bottom","far","mapSize","copy","altitude","dist","azim","sunPos","DirectionalLightHelper","updateCamera","control","lookAt","fitHeightDistance","atan","fov","fitWidthDistance","aspect","distance","direction","sub","maxDistance","near","updateProjectionMatrix","update","lights","resizeToDisplaySize","renderer","canvas","domElement","clientWidth","clientHeight","setSize","gui","ctrlKey","altKey","code","reset","refresh","onPointerDown","currentRef","rect","getBoundingClientRect","xCoord","clientX","yCoord","clientY","posX","posY","pointer3D","raycaster","Raycaster","setFromCamera","intersects","intersectObjects","el","getElementById","ll","font","zIndex","getTextElement","objectNames","object","setTextData","innerHTML","li","listStyle","onmouseover","stopPropagation","textContent","onmouseleave","onpointerdown","selectedElement","buttons","mountRef","guiPaneRef","Scene","WebGLRenderer","antialias","alpha","setPixelRatio","devicePixelRatio","shadowMap","enabled","physicallyCorrectLights","PerspectiveCamera","innerWidth","innerHeight","cameraControl","OrbitControls","enableDamping","addEventListener","requestID","animate","render","requestAnimationFrame","cancelAnimationFrame","autorun","tabIndex","ThreeDPage","JulyRadiationTable","MESES","split","MonthlyRadiationTable","showDetail","setShowDetail","inline","marginTop","borderBottom","m","Fragment","borderTop","rowSpan","FshwithSprite","fillRule","FshwithIcon","fsh","LEVELS","DAYS","ShadingFactorsTable","showlevel","setShowlevel","startMonth","setStartMonth","endMonth","setEndMonth","indexOf","selStart","selEnd","meanVals","vals","days","sum","surfidx","textAlign","ClimatePage","defaultActiveKey","ELEMENTOS","acristalamientos","tipos","g_gl_n","U_gl","propiedades","F_w","sombreamientos","transmitancia","opacidad","tau_e_B","reflexion","rho_e_B","ACRISTALAMIENTOS","SOMBREAMIENTOS","TIPOSVIDRIO","TIPOSSOMBRA","HuecosParams","_props","tipovidrio","setTipovidrio","tiposombra","setTiposombra","setTau_e_B","setRho_e_B","wrapperSetTau_e_B","useCallback","wrapperSetRho_e_B","vidrio","OPACIDAD","REFLEXION","SombrasForm","setOpacidad","setColor","findTauRho","GlazingPropertiesCard","g_gl_sh_wi","g_gl_wi","G","g_t_e","g_t_i","g_t_m","Text","ElementsPage","HelpPage","esquema5R1C","orientaciones","baseStyle","flex","flexDirection","alignItems","borderWidth","borderRadius","borderColor","borderStyle","outline","activeStyle","acceptStyle","rejectStyle","StyledDropzone","onDrop","message","accept","maxFiles","containerHeight","useDropzone","fileRejections","getRootProps","getInputProps","isDragActive","isDragAccept","isDragReject","useMemo","fileRejectionItems","file","path","minHeight","MainPage","handleUpload","acceptedFiles","_rejectedFiles","_event","reader","FileReader","onload","rawdata","result","readAsText","dropHeight","block","fontSize","marginBottom","iconclearmodel","paddingTop","App","exact","component","set_panic_hook","set_log_hook","ReactDOM","cachedTextDecoder","TextDecoder","module","require","ignoreBOM","fatal","decode","cachegetUint8Memory0","getUint8Memory0","buffer","wasm","getStringFromWasm0","ptr","len","subarray","heap","Array","heap_next","addHeapObject","getObject","WASM_VECTOR_LEN","cachedTextEncoder","TextEncoder","encodeString","encodeInto","arg","view","buf","encode","read","written","passStringToWasm0","malloc","realloc","mem","cachegetInt32Memory0","getInt32Memory0","Int32Array","takeObject","ret","dropObject","r0","r1","ptr0","len0","stack_pointer","addBorrowedObject","Error","model_js","__wbindgen_string_new","arg0","arg1","__wbindgen_json_parse","parse","__wbindgen_json_serialize","__wbg_new_59cb74e423758ede","__wbg_stack_558ba5917b466edd","stack","__wbg_error_4bb6c2a97407129a","error","__wbindgen_object_drop_ref","__wbindgen_rethrow"],"mappings":"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","file":"static/js/3.8d2e2eca.chunk.js","sourcesContent":["/* -*- coding: utf-8 -*-\n\nCopyright (c) 2016-2021 Rafael Villar Burke <pachi@rvburke.com>\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n*/\n\nimport React from \"react\";\nimport { Col, Row } from \"react-bootstrap\";\n\nconst Footer = () => (\n  <Row>\n    <Col>\n      <footer\n        className=\"navbar fixed-bottom\"\n        style={{ backgroundColor: \"rgba(255, 255, 255, 0.7)\" }}\n      >\n        <p className=\"mx-auto small text-muted\">\n          2018-2021 - Rafael Villar Burke, Daniel Jimnez Gonzlez, Marta\n          Sorribes Gil.\n        </p>\n      </footer>\n    </Col>\n  </Row>\n);\n\nexport default Footer;\n","/* -*- coding: utf-8 -*-\n\nCopyright (c) 2016-2021 Rafael Villar Burke <pachi@rvburke.com>\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n*/\n\n// https://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript\nexport function uuidv4() {\n  return ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(\n    /[018]/g,\n    // eslint-disable-next-line\n    (c) =>\n      (\n        c ^\n        (crypto.getRandomValues(new Uint8Array(1))[0] & (15 >> (c / 4)))\n      ).toString(16)\n  );\n}\n\n// Hashing function based on code from https://jsperf.com/hashing-strings by Jelle De Loecker\nexport function hash(str) {\n  let hashvalue = 0;\n  if (str.length === 0) return hashvalue;\n  for (let i = 0; i < str.length; i++) {\n    const char = str.charCodeAt(i);\n    hashvalue = (hashvalue << 5) - hashvalue + char;\n    hashvalue = hashvalue & hashvalue; // Convert to 32bit integer\n  }\n  return hashvalue;\n}\n\nexport function UserException(message, kind = \"UserException\") {\n  this.message = message;\n  this.kind = kind;\n}\n\n// Cadena con valor redondeado si el valor es un nmero y est definido o, si no, guin\nexport const round_or_dash = (val, numDecimals = 2) =>\n  val === null || val === undefined || isNaN(val)\n    ? \"-\"\n    : val.toFixed(numDecimals);\n","/* -*- coding: utf-8 -*-\n\nCopyright (c) 2016-2021 Rafael Villar Burke <pachi@rvburke.com>\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n*/\n\nimport { uuidv4 } from \"../utils.js\";\n\n\nexport const DEFAULT_SPACE = () => ({\n  id: uuidv4(),\n  name: `Espacio_${uuidv4()}`,\n  area: 100.0,\n  multiplier: 1.0,\n  type: \"CONDITIONED\",\n  inside_tenv: true,\n  height: 3.0,\n  n_v: null,\n  z: 0.0,\n  exposed_perimeter: 0.0,\n});\n\nexport const DEFAULT_WALL = () => ({\n  id: uuidv4(),\n  name: `Elemento_opaco_${uuidv4()}`,\n  A: 10.0,\n  bounds: \"EXTERIOR\",\n  cons: \"\",\n  space: \"\",\n  nextto: null,\n  geometry: {\n    azimuth: 0.0,\n    tilt: 90.0,\n    position: null,\n    polygon: []\n  }\n});\n\nexport const DEFAULT_WINDOW = () => ({\n  id: uuidv4(),\n  name: `Hueco_${uuidv4()}`,\n  A: 1.0,\n  cons: \"\",\n  wall: \"\",\n  fshobst: 1.0,\n  geometry: {\n    position: null,\n    height: 1.0,\n    width: 1.0,\n    setback: 0.2\n  }\n});\n\nexport const DEFAULT_SHADE = () => ({\n  id: uuidv4(),\n  name: `Sombra_${uuidv4()}`,\n  geometry: {\n    azimuth: 0.0,\n    tilt: 90.0,\n    position: null,\n    polygon: []\n  }\n});\n\nexport const DEFAULT_TB = () => ({\n  id: uuidv4(),\n  name: `PT_${uuidv4()}`,\n  kind: \"GENERIC\",\n  L: 1.0,\n  psi: 0.05,\n});\n\nexport const DEFAULT_WALLCONS = () => ({\n  id: uuidv4(),\n  name: `Cons_opacos_${uuidv4()}`,\n  group: \"Fachada\",\n  thickness: 0.3,\n  R_intrinsic: 2.0,\n  absorptance: 0.6,\n});\n\nexport const DEFAULT_WINCONS = () => ({\n  id: uuidv4(),\n  name: `Espacio_${uuidv4()}`,\n  group: \"Ventanas\",\n  U: 1.5,\n  Ff: 0.25,\n  gglwi: 0.65,\n  gglshwi: 0.65,\n  C_100: 27.0,\n});\n","/* -*- coding: utf-8 -*-\n\nCopyright (c) 2016-2021 Rafael Villar Burke <pachi@rvburke.com>\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n*/\n\nimport { createContext } from \"react\";\nimport { action, observable, computed, makeObservable, configure } from \"mobx\";\n\nimport { uuidv4 } from \"../utils.js\";\nimport {\n  he1_indicators,\n  load_data_from_json,\n  load_data_from_ctehexml,\n  load_fshobst_data_from_kyg,\n  get_monthly_radiation_data,\n} from \"wasm-envolventecte\";\n\nimport {\n  DEFAULT_SHADE,\n  DEFAULT_SPACE,\n  DEFAULT_TB,\n  DEFAULT_WALL,\n  DEFAULT_WALLCONS,\n  DEFAULT_WINDOW,\n  DEFAULT_WINCONS,\n} from \"./defaults\";\n\n// import radiationdata from \"../zcraddata.json\";\nimport example from \"./example.json\";\n\n// DEBUG:\n/* lint import/no-webpack-loader-syntax: off */\n// import test_ctehexml from '!raw-loader!../test/casopracticof21_ventanas_cubierta_raras_rot45.ctehexml';\n// import test_ctehexml from '!raw-loader!../test/casopracticof21_ventanas_cubierta_raras.ctehexml';\n// import test_ctehexml from '!raw-loader!../test/prueba_cub_rotada.ctehexml';\n// import test_ctehexml from '!raw-loader!../test/ventanas_cubierta.ctehexml';\n// import test_ctehexml from '!raw-loader!../test/ventanas_cubierta_reducido.ctehexml';\n\n// no obligamos a usar acciones para cambiar el estado. El default es \"always\".\n// Ver https://mobx.js.org/configuration.html#enforceactions\nconfigure({\n  enforceActions: \"never\",\n});\n\n// Valores de radiacin\nconst MONTHLYRADIATIONDATA = get_monthly_radiation_data();\nconst DEFAULT_META = {\n  name: \"Modelo vaco\",\n  is_new_building: true,\n  is_dwelling: true,\n  num_dwellings: 1,\n  climate: \"D3\",\n  global_ventilation_l_s: 0,\n  n50_test_ach: null,\n  d_perim_insulation: 0,\n  rn_perim_insulation: 0,\n};\n\nclass AppState {\n  // Datos climticos --------\n\n  // Zona climtica y otros metadatos\n  meta = DEFAULT_META;\n\n  // Datos geomtricos y constructivos -----------\n  // Espacios de la envolvente trmica\n  spaces = [];\n  // Opacos\n  walls = [];\n  // Huecos\n  windows = [];\n  // Sombras\n  shades = [];\n  // Construcciones de opacos\n  wallcons = [];\n  // Construcciones de huecos\n  wincons = [];\n\n  // Puentes trmicos\n  thermal_bridges = [];\n\n  // Lista de errores y avisos -------\n  // Contiene objetos  { level: warninglevel, id: \"element_id\", msg: \"my msg\" }\n  // donde warninglevel puede ser: SUCCESS | DANGER | WARNING | INFO (y corresponden a clases Bootstrap en minsculas)\n  errors = [];\n\n  constructor() {\n    makeObservable(this, {\n      // Decorators\n      // title: observable can be omitted, its is the default when using observable.object\n      meta: observable,\n      spaces: observable,\n      walls: observable,\n      windows: observable,\n      shades: observable,\n      thermal_bridges: observable,\n      wallcons: observable,\n      wincons: observable,\n      errors: observable,\n      // Valores calculados\n      he1_indicators: computed({ requiresReaction: true }),\n      zoneslist: computed,\n      orientations: computed,\n      warnings: computed,\n      // TODO: estos dos se podran llegar a eliminar si cambiamos climas y usamos los del wasm\n      climatedata: computed({ requiresReaction: true }),\n      climateTotRadJul: computed({ requiresReaction: true }),\n      agrupaHuecos: action,\n      agrupaOpacos: action,\n      agrupaPts: action,\n      loadModel: action,\n      clearModel: action,\n      asJSON: computed,\n      loadData: action,\n    });\n  }\n\n  // Propiedades de datos climticos ----------------\n  get zoneslist() {\n    return [...new Set(MONTHLYRADIATIONDATA.map((v) => v.zone))];\n  }\n\n  get orientations() {\n    return [...new Set(MONTHLYRADIATIONDATA.map((v) => v.orientation))];\n  }\n\n  get climatedata() {\n    return MONTHLYRADIATIONDATA.filter((v) => v.zone === this.meta.climate);\n  }\n\n  get climateTotRadJul() {\n    return this.climatedata.reduce(\n      (acc, v) => ({ ...acc, [v.orientation]: v.dir[6] + v.dif[6] }),\n      {}\n    );\n  }\n\n  get he1_indicators() {\n    return he1_indicators(this.getModel());\n  }\n\n  // Acumula errores de la app y avisos de los clculos\n  get warnings() {\n    return this.errors.concat(this.he1_indicators.warnings);\n  }\n\n  // Pertenencia de un muro a la envolvente trmica\n  // TODO: llevar a wasm, que devolvera lista de ids de muros en la ET y solamente comprobaramos si est en esa lista el id.\n  /* eslint-disable no-undefined */\n  wall_is_inside_tenv(wall) {\n    const spaces_list = this.spaces;\n    const space = spaces_list.find((s) => s.id === wall.space);\n    // 1. El muro no pertenece a ningn espacio -> fuera\n    if (space === undefined) {\n      return false;\n    }\n\n    const spacenxt = spaces_list.find((s) => s.id === wall.nextto);\n    // 2. Muro que no es interior en un espacio exterior -> fuera\n    if (wall.bounds !== \"INTERIOR\" && space.inside_tenv === false) {\n      return false;\n    }\n    // 3. Muro interior que separa dos espacios o exteriores o interiores -> fuera\n    if (\n      wall.bounds === \"INTERIOR\" &&\n      spacenxt !== undefined &&\n      space.inside_tenv === spacenxt.inside_tenv\n    ) {\n      return false;\n    }\n    // 4. Caso mal definido con space !== null y spacenxt === null -> fuera\n    if (wall.bounds === \"INTERIOR\" && spacenxt === undefined) {\n      return false;\n    }\n    // 5. Resto de casos\n    return true;\n  }\n\n  // Constructores --------\n  newHueco = DEFAULT_WINDOW;\n  newOpaco = DEFAULT_WALL;\n  newPT = DEFAULT_TB;\n  newShade = DEFAULT_SHADE;\n  newSpace = DEFAULT_SPACE;\n  newWallCons = DEFAULT_WALLCONS;\n  newWinCons = DEFAULT_WINCONS;\n\n  // Acciones --------\n\n  // Agrupa superficie de huecos por tipos\n  agrupaHuecos() {\n    const isequal = (h1, h2) => h1.cons === h2.cons && h1.wall === h2.wall;\n    const huecosagrupados = [];\n    for (let hueco of this.windows) {\n      const h = huecosagrupados.find((e) => isequal(hueco, e));\n      if (h) {\n        h.fshobst =\n          (1.0 * (h.fshobst * h.A + hueco.fshobst * hueco.A)) / (h.A + hueco.A);\n        h.A = 0.0 + h.A + hueco.A;\n        h.name = h.name + \", \" + hueco.name;\n        h.id = uuidv4();\n      } else {\n        huecosagrupados.push(hueco);\n      }\n    }\n    this.windows = huecosagrupados;\n  }\n\n  // Agrupa superficie de opacos por tipos (y reescribimos referencias en huecos)\n  agrupaOpacos() {\n    const isequal = (o1, o2) =>\n      o1.bounds === o2.bounds &&\n      o1.cons === o2.cons &&\n      o1.space === o2.space &&\n      o1.nextto === o2.nextto &&\n      o1.geometry.azimuth === o2.geometry.azimuth &&\n      o1.geometry.tilt === o2.geometry.tilt &&\n      o1.geometry.position === o2.geometry.position &&\n      o1.geometry.polygon === o2.geometry.polygon;\n    const opacosagrupados = [];\n    for (let opaco of this.walls) {\n      const o = opacosagrupados.find((e) => isequal(opaco, e));\n      if (o) {\n        const oldid = o.id;\n        const newid = uuidv4();\n        o.A = o.A + opaco.A;\n        o.name = o.name + \", \" + opaco.name;\n        o.id = newid;\n        // Reescribimos referencias a los anteriores id\n        for (let w of this.windows) {\n          if (w.wall === oldid || w.wall === opaco.id) {\n            w.wall = newid;\n          }\n        }\n      } else {\n        opacosagrupados.push(opaco);\n      }\n    }\n    this.walls = opacosagrupados;\n  }\n\n  // Agrupa longitudes de puentes trmicos por tipos\n  agrupaPts() {\n    const isequal = (p1, p2) => Number(p1.psi) === Number(p2.psi);\n    const ptsagrupados = [];\n    for (let pt of this.thermal_bridges) {\n      const p = ptsagrupados.find((e) => isequal(pt, e));\n      if (p) {\n        p.A = p.L + pt.L;\n        p.name = p.name + \", \" + pt.name;\n        p.id = uuidv4();\n      } else {\n        ptsagrupados.push(pt);\n      }\n    }\n    this.thermal_bridges = ptsagrupados;\n  }\n\n  // Recopila modelo desde el appstate\n  getModel() {\n    const { meta, thermal_bridges, walls, windows, shades, spaces, wallcons, wincons } =\n      this;\n    return { meta, spaces, walls, windows, shades, thermal_bridges, wallcons, wincons };\n  };\n\n  // Deja modelo limpio\n  clearModel() {\n    this.meta = DEFAULT_META;\n    this.spaces = [];\n    this.walls = [];\n    this.windows = [];\n    this.shades = [];\n    this.thermal_bridges = [];\n    this.wallcons = [];\n    this.wincons = [];\n  }\n\n  // Carga modelo JSON en el appstate\n  loadModel(inputData) {\n    const {\n      meta = { climate: \"D3\" },\n      spaces,\n      walls,\n      windows,\n      shades,\n      thermal_bridges,\n      wallcons,\n      wincons,\n    } = inputData;\n\n    // Carga datos en el store\n    this.meta = meta;\n    this.thermal_bridges = thermal_bridges;\n    this.walls = walls;\n    this.windows = windows;\n    this.spaces = spaces;\n    this.shades = shades;\n    this.wallcons = wallcons;\n    this.wincons = wincons;\n  }\n\n  // Importacin y exportacin de datos -------------\n\n  // Serializacin de los datos\n  get asJSON() {\n    const {\n      meta,\n      spaces,\n      walls,\n      windows,\n      shades,\n      thermal_bridges,\n      wallcons,\n      wincons,\n    } = this;\n\n    return JSON.stringify(\n      {\n        meta,\n        spaces,\n        walls,\n        windows,\n        shades,\n        thermal_bridges,\n        wallcons,\n        wincons,\n      },\n      null,\n      2\n    );\n  }\n\n  // Deserializacin de datos desde\n  // - JSON (mode = \"JSON\")\n  // - CTEHEXML (mode=\"CTEHEXML\")\n  // - KyGananciasSolares.txt (mode=\"FSHOBST\")\n  loadData(data, mode) {\n    // Lee datos\n    try {\n      let inputData;\n      if (mode === \"FSHOBST\") {\n        inputData = load_fshobst_data_from_kyg(data);\n      } else if (mode === \"CTEHEXML\") {\n        inputData = load_data_from_ctehexml(data);\n      } else {\n        inputData = load_data_from_json(data);\n      }\n\n      if (mode === \"CTEHEXML\" || mode === \"JSON\") {\n        this.loadModel(inputData);\n        this.errors = [\n          { level: \"SUCCESS\", id: null, msg: \"Datos cargados correctamente.\" },\n          {\n            level: \"INFO\",\n            id: null,\n            msg: `Clima ${this.meta.climate}, Cargados ${this.spaces.length} espacios, ${this.walls.length} opacos, ${this.windows.length} huecos, ${this.thermal_bridges.length} PTs, ${this.shades.length} elementos de sombra, ${this.wallcons.length} construcciones de opacos y ${this.wincons.length} construcciones de huecos`,\n          },\n        ];\n      } else if (mode === \"FSHOBST\") {\n        this.errors = [\n          { level: \"SUCCESS\", id: null, msg: \"Datos cargados correctamente.\" },\n          {\n            level: \"INFO\",\n            id: null,\n            msg: `Cargados ${inputData.length} factores de sombra de obstculos remotos (F_shobst) de huecos`,\n          },\n        ];\n\n        for (let window of this.windows) {\n          let fshobst = inputData[window.name];\n          if (fshobst === undefined || isNaN(fshobst)) {\n            this.errors.push({\n              level: \"INFO:\",\n              id: null,\n              msg: `Hueco ${window.name} sin datos de factor reductor por sombreamiento de obstculos remotos F_sh;obst`,\n            });\n          } else {\n            window.fshobst = fshobst;\n          }\n        }\n      } else {\n        this.errors = [\n          {\n            level: \"INFO\",\n            id: null,\n            msg: `No se han encontrado datos de modelo en el archivo.`,\n          },\n        ];\n      }\n    } catch (err) {\n      this.errors = [\n        {\n          level: \"DANGER\",\n          id: null,\n          msg: `El archivo no contiene datos con un formato adecuado. ${err}`,\n        },\n      ];\n    }\n  }\n}\n\nconst appstate = new AppState();\n\n// // DEBUG: carga este caso para depurar\n// appstate.loadData(test_ctehexml, \"CTEHEXML\");\nappstate.loadModel(example);\n\nexport default createContext(appstate);\n","export default __webpack_public_path__ + \"static/media/logo.152c1c37.svg\";","export default __webpack_public_path__ + \"static/media/outline-live_help-24px.3093988b.svg\";","export default __webpack_public_path__ + \"static/media/outline-info-24px.1804a538.svg\";","export default __webpack_public_path__ + \"static/media/baseline-archive-24px.7c5f7928.svg\";","/* -*- coding: utf-8 -*-\n\nCopyright (c) 2016-2021 Rafael Villar Burke <pachi@rvburke.com>\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n*/\n\nimport React, { useContext } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { LinkContainer } from \"react-router-bootstrap\";\nimport { Form, Nav, Navbar, Col } from \"react-bootstrap\";\nimport { observer } from \"mobx-react-lite\";\n\nimport { hash } from \"../utils.js\";\n\nimport AppState from \"../stores/AppState\";\n\nimport imglogo from \"./img/logo.svg\";\nimport iconhelp from \"./img/outline-live_help-24px.svg\";\nimport iconinfo from \"./img/outline-info-24px.svg\";\nimport icondownload from \"./img/baseline-archive-24px.svg\";\n\nconst NavBar = observer(({ projectName = \"Envolvente CTE\" }) => {\n  const appstate = useContext(AppState);\n\n  const handleDownload = (_e) => {\n    const contents = appstate.asJSON;\n    const contenthash = hash(contents).toString(16);\n    const filename = `EnvolventeCTE-${contenthash}.json`;\n    const blob = new Blob([contents], { type: \"application/json\" });\n    const uri = URL.createObjectURL(blob);\n    // from http://stackoverflow.com/questions/283956/\n    const link = document.createElement(\"a\");\n    if (typeof link.download === \"string\") {\n      link.href = uri;\n      link.download = filename;\n      // Firefox requires the link to be in the body\n      document.body.appendChild(link);\n      // Simulate click\n      link.click();\n      // Remove the link when done\n      document.body.removeChild(link);\n    } else {\n      window.open(uri);\n    }\n  };\n\n  const fileDownload = React.createRef();\n\n  return (\n    <Navbar bg=\"dark\" variant=\"dark\" fixed=\"top\">\n      <Navbar.Brand>\n        <Link\n          className=\"navbar-brand\"\n          to=\"/\"\n          title=\"EnvolventeCTE. Aplicacin para el clculo de indicadores de calidad y parmetros descriptivos de la envolvente trmica de los edificios para su evaluacin energtica y para la aplicacin del CTE DB-HE (2019)\"\n        >\n          <img src={imglogo} height=\"40px\" className=\"mr-2\" alt=\"logo\" />{\" \"}\n          {projectName}\n        </Link>\n      </Navbar.Brand>\n      <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\n      <Navbar.Collapse id=\"basic-navbar-nav\">\n        <Nav>\n          <LinkContainer to=\"/building\" eventKey={1}>\n            <Nav.Link title=\"Visualizacin, introduccin y edicin de los componentes de la envolvente trmica del edificio.\">\n              Edificio\n            </Nav.Link>\n          </LinkContainer>\n          <LinkContainer to=\"/3d\" eventKey={2}>\n            <Nav.Link title=\"Visualizacin tridimensional del modelo del edificio.\">\n              Vista3D\n            </Nav.Link>\n          </LinkContainer>\n          <span style={{ borderLeft: \"1px solid gray\", margin: \"0px 25px\" }} />\n          <LinkContainer to=\"/climate\" eventKey={3}>\n            <Nav.Link title=\"Visualizacin y obtencin de parmetros relacionados con el clima exterior del edificio.\">\n              Clima\n            </Nav.Link>\n          </LinkContainer>\n          <LinkContainer to=\"/elements\" eventKey={4}>\n            <Nav.Link title=\"Ayudas para el clculo de parmetros descriptivos de algunos elementos de la envolvente trmica del edificio.\">\n              Elementos\n            </Nav.Link>\n          </LinkContainer>\n        </Nav>\n        <Nav className=\"ml-auto pr-3\">\n          <Nav.Link\n            md={4}\n            title=\"Zona climtica, de acuerdo al DB-HE 2019, en la que se sita el edificio.\"\n          >\n            <Form.Row>\n              <Form.Label htmlFor=\"climateselector\" className=\"mr-2\">\n                Zona Climtica\n              </Form.Label>\n              <Col>\n                <Form.Control\n                  id=\"climateselector\"\n                  size=\"sm\"\n                  value={appstate.meta ? appstate.meta.climate || \"\": \"\"}\n                  onChange={(e) => {\n                    appstate.meta.climate = e.target.value;\n                  }}\n                  as=\"select\"\n                  placeholder=\"Zona climtica\"\n                  custom\n                >\n                  {appstate.zoneslist.map((z) => (\n                    <option value={z} key={\"zone_\" + z}>\n                      {z}\n                    </option>\n                  ))}\n                </Form.Control>\n              </Col>\n            </Form.Row>\n          </Nav.Link>\n          <span style={{ borderLeft: \"1px solid gray\", margin: \"0px 25px\" }} />\n          <Nav.Link title=\"Descarga del archivo de datos con la informacin del modelo actual.\">\n            <img\n              src={icondownload}\n              alt=\"Descargar datos de envolvente\"\n              ref={fileDownload}\n              onClick={(e) => handleDownload(e)}\n            />{\" \"}\n            Descarga\n          </Nav.Link>\n          <LinkContainer to=\"/help\" eventKey={5}>\n            <Nav.Link title=\"Ayuda de la aplicacin\">\n              <img src={iconhelp} alt=\"Ayuda\" /> Ayuda\n            </Nav.Link>\n          </LinkContainer>\n          <LinkContainer to=\"/about\" eventKey={6}>\n            <Nav.Link>\n              <Nav.Item title=\"Infomracin sobre autora, licencia, etc de la aplicacin\">\n                <img src={iconinfo} alt=\"Crditos\" /> Crditos\n              </Nav.Item>\n            </Nav.Link>\n          </LinkContainer>\n        </Nav>\n      </Navbar.Collapse>\n    </Navbar>\n  );\n});\n\nexport default NavBar;\n","export default __webpack_public_path__ + \"static/media/FotoDani.a707bf6c.jpg\";","export default __webpack_public_path__ + \"static/media/FotoMarta.48d0cd56.jpg\";","/* -*- coding: utf-8 -*-\n\nCopyright (c) 2016-2021 Rafael Villar Burke <pachi@rvburke.com>\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n*/\n\nimport React from \"react\";\nimport { Alert, Col, Container, Image, Row } from \"react-bootstrap\";\n\nimport { version } from \"../../package.json\";\nimport Footer from \"./Footer\";\nimport NavBar from \"./Nav\";\nimport FotoPachi from \"./img/FotoPachi.jpg\";\nimport FotoDani from \"./img/FotoDani.jpg\";\nimport FotoMarta from \"./img/FotoMarta.jpg\";\nimport { get_version } from \"wasm-envolventecte\";\n\nconst AboutPage = (props) => (\n  <Container fluid>\n    <NavBar route={props.route} />\n    <Row>\n      <Col>\n        <Alert variant=\"warning\">\n          <b>NOTA:</b> Esta aplicacin y la informacin contenida en ella no\n          tienen valor reglamentario.\n        </Alert>\n      </Col>\n    </Row>\n    <Row>\n      <Col>\n        <h2>Equipo de desarrollo:</h2>\n        <p>\n          Grupo de <i>Ahorro de Energa y Sostenibilidad</i> de la{\" \"}\n          <i>Unidad de Calidad en la Construccin</i> del{\" \"}\n          <a href=\"https://ietcc.csic.es\">\n            Instituto Eduardo Torroja de Ciencias de la Construccin\n            (IETcc-CSIC)\n          </a>{\" \"}\n          del <i>Consejo Superior de Investigaciones Cientficas (CSIC)</i>.\n        </p>\n      </Col>\n    </Row>\n    <Row>\n      <Col md={{ span: 2, offset: 3 }}>\n        <Image responsive alt=\"Rafael Villar Burke\" src={FotoPachi} />\n        <p>\n          Rafael Villar Burke (pachi), <i>pachi@ietcc.csic.es</i>\n        </p>\n      </Col>\n      <Col md={2}>\n        <Image responsive alt=\"Daniel Jimnez Gonzlez\" src={FotoDani} />\n        <p>\n          Daniel Jimnez Gonzlez, <i>danielj@ietcc.csic.es</i>\n        </p>\n      </Col>\n      <Col md={2}>\n        <Image responsive alt=\"Marta Sorribes Gil\" src={FotoMarta} />\n        <p>\n          Marta Sorribes Gil, <i>msorribes@ietcc.csic.es</i>\n        </p>\n      </Col>\n    </Row>\n    <Row>\n      <Col>\n        <h2>Versin:</h2>\n        <p>EnvolventeCTE: {version} (BEModel: { get_version() })</p>\n      </Col>\n    </Row>\n    <Row>\n      <Col>\n        <h2>Licencia:</h2>\n        <p>\n          Esta aplicacin es software libre y se distribuye con licencia MIT,\n          que permite su uso, modificacin y redistribucin mientras se mantenga\n          el copyright.\n        </p>\n        <p>\n          El cdigo est disponible en{\" \"}\n          <a href=\"https://github.com/pachi/envolventecte\">\n            https://github.com/pachi/envolventecte\n          </a>\n        </p>\n      </Col>\n    </Row>\n    <Row>\n      <Col>\n        <Alert variant=\"secondary\">\n          <p className=\"lead\">The MIT License (MIT)</p>\n          <p>\n            Copyright (c) 2018-2021 Rafael Villar Burke\n            &lt;pachi&#64;ietcc.csic.es&gt;, Daniel Jimnez Gonzlez\n            &lt;danielj&#64;ietcc.csic.es&gt;, Marta Sorribes Gil\n            &lt;msorribes&#64;ietcc.csic.es&gt;\n          </p>\n\n          <p>\n            Permission is hereby granted, free of charge, to any person\n            obtaining a copy of this software and associated documentation files\n            (the &quot;Software&quot;), to deal in the Software without restriction,\n            including without limitation the rights to use, copy, modify, merge,\n            publish, distribute, sublicense, and/or sell copies of the Software,\n            and to permit persons to whom the Software is furnished to do so,\n            subject to the following conditions:\n          </p>\n\n          <p>\n            The above copyright notice and this permission notice shall be\n            included in all copies or substantial portions of the Software.\n          </p>\n\n          <p>\n            THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND,\n            EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n            MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n            NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS\n            BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN\n            ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\n            CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n            SOFTWARE.\n          </p>\n        </Alert>\n      </Col>\n    </Row>\n    <Footer />\n  </Container>\n);\n\nexport default AboutPage;\n","export default \"data:image/jpeg;base64,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\"","export default __webpack_public_path__ + \"static/media/baseline-add-24px.a760ef84.svg\";","export default __webpack_public_path__ + \"static/media/baseline-remove-24px.1f6e6606.svg\";","export default __webpack_public_path__ + \"static/media/select-rows.b9b024b6.svg\";","export default __webpack_public_path__ + \"static/media/unselect-rows.afcd5af4.svg\";","export default __webpack_public_path__ + \"static/media/outline-file_copy-24px.81744b41.svg\";","/* -*- coding: utf-8 -*-\n\nCopyright (c) 2016-2021 Rafael Villar Burke <pachi@rvburke.com>\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n*/\n\nimport React, { useContext } from \"react\";\nimport { Button, ButtonGroup, ButtonToolbar } from \"react-bootstrap\";\nimport { observer } from \"mobx-react-lite\";\n\nimport AppState from \"../../stores/AppState\";\n\nimport iconplus from \"../img/baseline-add-24px.svg\";\nimport iconless from \"../img/baseline-remove-24px.svg\";\nimport iconselectall from \"../img/select-rows.svg\";\nimport iconselectnone from \"../img/unselect-rows.svg\";\nimport iconduplicate from \"../img/outline-file_copy-24px.svg\";\nimport { uuidv4 } from \"../../utils\";\n\nconst AddRemoveButtonGroup = observer(\n  ({ elements, newobj, selected, setSelected }) => {\n    const appstate = useContext(AppState);\n    if (\n      ![\n        \"spaces\",\n        \"walls\",\n        \"windows\",\n        \"thermal_bridges\",\n        \"shades\",\n        \"wallcons\",\n        \"wincons\",\n      ].includes(elements)\n    ) {\n      return <h1>Elementos no reconocidos {elements}</h1>;\n    }\n\n    return (\n      <ButtonToolbar>\n        <ButtonGroup\n          className=\"mr-2\"\n          aria-label=\"Barra de modificacin de lneas\"\n        >\n          <Button\n            variant=\"primary\"\n            size=\"sm\"\n            title=\"Aadir una fila al final de la tabla\"\n            onClick={() => {\n              const element = appstate[newobj]();\n              appstate[elements].push(element);\n              // seleccionamos nuevo elemento recin creado\n              setSelected([element.id]);\n            }}\n          >\n            <img src={iconplus} alt=\"Aadir fila\" />\n          </Button>\n          <Button\n            variant=\"primary\"\n            size=\"sm\"\n            title=\"Duplicar filas seleccionadas de la tabla\"\n            onClick={() => {\n              const newids = [];\n              selected.forEach((id) => {\n                const selectedIndex = appstate[elements].findIndex(\n                  (h) => h.id === id\n                );\n                if (selectedIndex !== -1) {\n                  const idx = selectedIndex >= 0 ? selectedIndex : 0;\n                  const selectedObj = appstate[elements][idx];\n                  const newid = uuidv4();\n                  const dupObj = {\n                    ...selectedObj,\n                    name: selectedObj.name + \" (dup.)\",\n                    id: newid,\n                  };\n                  newids.push(newid);\n                  appstate[elements].splice(idx + 1, 0, dupObj);\n                }\n              });\n              // Reseleccionamos lo nuevo\n              setSelected(newids);\n            }}\n          >\n            <img src={iconduplicate} alt=\"Duplicar fila\" />\n          </Button>\n          <Button\n            variant=\"primary\"\n            size=\"sm\"\n            title=\"Eliminar filas seleccionadas de la tabla\"\n            onClick={() => {\n              if (selected.length > 0) {\n                const indices = appstate[elements].reduce((acc, cur, idx) => {\n                  if (selected.includes(cur.id)) {\n                    acc.push(idx);\n                  }\n                  return acc;\n                }, []);\n                const minidx = Math.max(0, Math.min(...indices) - 1);\n                const filtered = appstate[elements].filter(\n                  (h) => !selected.includes(h.id)\n                );\n                // usa replace: https://mobx.js.org/api.html#observablearray\n                appstate[elements].replace(filtered);\n                // Selecciona el elemento anterior al primero seleccionado salvo que no queden elementos o sea el primero, o nada si no hay elementos\n                if (filtered.length > 0) {\n                  setSelected([appstate[elements][minidx].id]);\n                } else {\n                  setSelected([]);\n                }\n              }\n            }}\n          >\n            <img src={iconless} alt=\"Eliminar fila\" />\n          </Button>\n        </ButtonGroup>\n        <ButtonGroup aria-label=\"Barra de seleccin y deseleccin de filas\">\n          <Button\n            variant=\"primary\"\n            size=\"sm\"\n            title=\"Seleccionar todas las filas de la tabla\"\n            onClick={() => {\n              setSelected(appstate[elements].map((e) => e.id));\n            }}\n          >\n            <img src={iconselectall} alt=\"Seleccionar todo\" />\n          </Button>\n          <Button\n            variant=\"primary\"\n            size=\"sm\"\n            title=\"Deseleccionar todas las filas de la tabla\"\n            onClick={() => {\n              setSelected([]);\n            }}\n          >\n            <img src={iconselectnone} alt=\"Deseleccionar todo\" />\n          </Button>\n        </ButtonGroup>\n      </ButtonToolbar>\n    );\n  }\n);\n\nexport default AddRemoveButtonGroup;\n","export default __webpack_public_path__ + \"static/media/full_geom_icon.12903be5.svg\";","export default __webpack_public_path__ + \"static/media/null_pos_icon.196bc7a8.svg\";","export default __webpack_public_path__ + \"static/media/valid_pos_icon.8296e01e.svg\";","export default __webpack_public_path__ + \"static/media/valid_poly_icon.ff7781e5.svg\";","export default __webpack_public_path__ + \"static/media/null_poly_icon.30dba2cc.svg\";","export default __webpack_public_path__ + \"static/media/partial_geom_icon.e30e0637.svg\";","/* -*- coding: utf-8 -*-\n\nCopyright (c) 2016-2021 Rafael Villar Burke <pachi@rvburke.com>\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n*/\n\nimport React from \"react\";\n\n// Optimizador en https://jakearchibald.github.io/svgomg/\nconst OrientacionesSprite = () => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" display=\"none\">\n    <defs>\n      <symbol id=\"sN\" viewBox=\"0 0 112 112\">\n        <path\n          d=\"M29 8C45.6-.3 66 0 82 10L54 56 29 8\"\n          fill=\"red\"\n          color=\"#000\"\n          opacity=\".8\"\n        />\n      </symbol>\n      <symbol id=\"sNE\" viewBox=\"0 0 112 112\">\n        <path\n          d=\"M82 7c9 5 16 12 21 21L54 55l28-48\"\n          fill=\"red\"\n          color=\"#000\"\n          opacity=\".8\"\n        />\n      </symbol>\n      <symbol id=\"sNW\" viewBox=\"0 0 112 112\">\n        <path\n          d=\"M7 30A55 55 0 0 1 29 8l25 47-46-27\"\n          fill=\"red\"\n          color=\"#000\"\n          opacity=\".8\"\n        />\n      </symbol>\n      <symbol id=\"sE\" viewBox=\"0 0 112 112\">\n        <path\n          d=\"M102 28a55 55 0 0 1 2.8 46L54 55 102 28\"\n          fill=\"red\"\n          color=\"#000\"\n          opacity=\".8\"\n        />\n      </symbol>\n      <symbol id=\"sW\" viewBox=\"0 0 112 112\">\n        <path\n          d=\"M7.2 28a55 55 0 0 0-2.8 46l51-19-48-27\"\n          fill=\"red\"\n          color=\"#000\"\n          opacity=\".8\"\n        />\n      </symbol>\n      <symbol id=\"sSE\" viewBox=\"0 0 112 112\">\n        <path\n          d=\"M105 73.7a55 55 0 0 1-33 33l-17-52 50 19\"\n          fill=\"red\"\n          color=\"#000\"\n          opacity=\".8\"\n        />\n      </symbol>\n      <symbol id=\"sSW\" viewBox=\"0 0 112 112\">\n        <path\n          d=\"M5 73A55 55 0 0 0 37 106l17-52L5 73\"\n          fill=\"red\"\n          color=\"#000\"\n          opacity=\".8\"\n        />\n      </symbol>\n      <symbol id=\"sS\" viewBox=\"0 0 112 112\">\n        <path\n          d=\"M36 105a55 55 0 0 0 35 0L55 55l-18 52\"\n          fill=\"red\"\n          color=\"#000\"\n          opacity=\".8\"\n        />\n      </symbol>\n      <symbol id=\"circulo\" viewBox=\"0 0 112 112\">\n        <ellipse\n          cx=\"55.4\"\n          cy=\"55.4\"\n          fill=\"none\"\n          stroke=\"#000\"\n          strokeWidth=\"2.8\"\n          color=\"#000\"\n          rx=\"53\"\n          ry=\"53\"\n        />\n      </symbol>\n      <symbol id=\"cuadrado\" viewBox=\"0 0 112 112\">\n        <rect\n          width=\"112\"\n          height=\"112\"\n          fill=\"#ffaaaa\"\n        />\n      </symbol>\n      <symbol id=\"TECHO\" viewBox=\"0 0 112 112\">\n        <rect\n          width=\"112\"\n          height=\"40\"\n          fill=\"#777\"\n        />\n      </symbol>\n      <symbol id=\"SUELO\" viewBox=\"0 0 112 112\">\n        <rect\n          y=\"72\"\n          width=\"112\"\n          height=\"40\"\n          fill=\"#777\"\n        />\n      </symbol>\n      <symbol id=\"PARED\" viewBox=\"0 0 112 112\">\n        <rect\n          x=\"72\"\n          width=\"42\"\n          height=\"112\"\n          fill=\"#777\"\n        />\n      </symbol>\n    </defs>\n  </svg>\n);\n\nconst OrientaIcon = ({ dir, width = \"1.2em\", height = \"1.2em\" }) => {\n  if ([\"NE\", \"E\", \"SE\", \"S\", \"SW\", \"W\", \"NW\", \"N\"].includes(dir)) {\n    return (\n      <svg width={width} height={height} style={{ verticalAlign: \"middle\" }}>\n        <use xlinkHref={`#s${dir}`} />\n        <use xlinkHref=\"#circulo\" />\n      </svg>\n    );\n  }\n  return (\n    <svg width={width} height={height}>\n      <use xlinkHref=\"#circulo\" />\n    </svg>\n  );\n};\n\nconst TiltIcon = ({ dir, width = \"1.2em\", height = \"1.2em\" }) => {\n  if ([\"PARED\", \"SUELO\", \"TECHO\"].includes(dir)) {\n    return (\n      <svg width={width} height={height} style={{ verticalAlign: \"middle\" }}>\n        <use xlinkHref=\"#cuadrado\" />\n        <use xlinkHref={`#${dir}`} />\n      </svg>\n    );\n  }\n  return (\n    <svg width={width} height={height}>\n      <use xlinkHref=\"#cuadrado\" />\n    </svg>\n  );\n};\n\nexport { OrientacionesSprite, OrientaIcon, TiltIcon };\n","/* -*- coding: utf-8 -*-\n\nCopyright (c) 2016-2021 Rafael Villar Burke <pachi@rvburke.com>\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n*/\n\nimport React from \"react\";\n\nimport nullPosIcon from \"../img/null_pos_icon.svg\";\nimport validPosIcon from \"../img/valid_pos_icon.svg\";\nimport validPolyIcon from \"../img/valid_poly_icon.svg\";\nimport nullPolyIcon from \"../img/null_poly_icon.svg\";\nimport fullGeometryIcon from \"../img/full_geom_icon.svg\";\nimport partialGeometryIcon from \"../img/partial_geom_icon.svg\";\n\nimport { OrientaIcon, TiltIcon } from \"../climate/IconsOrientaciones\";\n\n// Formato y opciones de condiciones de contorno\nexport const BOUNDARYTYPESMAP = {\n  EXTERIOR: \"EXTERIOR\",\n  INTERIOR: \"INTERIOR\",\n  ADIABATIC: \"ADIABTICO\",\n  GROUND: \"TERRENO\",\n};\n\n// Tipos de espacios segn nivel de acondicionamiento\nexport const SPACETYPESMAP = {\n  CONDITIONED: \"ACONDICIONADO\",\n  UNCONDITIONED: \"NO ACONDICIONADO\",\n  UNINHABITED: \"NO HABITABLE\",\n};\n\n// Tipos de puentes trmicos\nexport const THERMALBRIDGETYPESMAP = {\n  ROOF: \"CUBIERTA\",\n  BALCONY: \"BALCN\",\n  CORNER: \"ESQUINA\",\n  INTERMEDIATEFLOOR: \"FORJADO\",\n  INTERNALWALL: \"PARTICIN\",\n  GROUNDFLOOR: \"SOLERA\",\n  PILLAR: \"PILAR\",\n  WINDOW: \"HUECO\",\n  GENERIC: \"GENRICO\",\n};\n\n// Devuelve el campo convertido a valor numrico o el valor previo\nexport const getFloatOrOld = (newValue, oldValue) => {\n  const value = parseFloat(newValue.replace(\",\", \".\"));\n  return isNaN(value) ? oldValue : value;\n};\n\n// Muestra nmero con 1 decimal\nexport const Float1DigitsFmt = (cell, _row, _rowIndex, _formatExtraData) => {\n  if (cell === null || cell === undefined) {\n    return <span>-</span>;\n  }\n  return <span>{Number(cell).toFixed(1)}</span>;\n};\n\n// Muestra nmero con 2 decimales\nexport const Float2DigitsFmt = (cell, _row) => {\n  if (cell === null || cell === undefined) {\n    return <span>-</span>;\n  }\n\n  return <span>{Number(cell).toFixed(2)}</span>;\n};\n\n// Muestra valor booleano\nexport const BoolFmt = (cell, _row, _rowIndex, _formatExtraData) => (\n  <span>{cell === true ? \"S\" : \"No\"}</span>\n);\n\n// Convierte ngulo de azimuth a nombre\nexport const AzimuthFmt = (azimuth_angle) =>\n  azimuth_angle === undefined ? \"-\" : azimuth_name(azimuth_angle);\n\n// Convierte ngulo de inclinacin a nombre\nexport const TiltFmt = (tilt_angle) =>\n  tilt_angle === undefined ? \"-\" : tilt_name(tilt_angle);\n\n// Convierte punto 3D de posicin a cadena de coordenadas\nexport const PosFmt = (pos) => {\n  if (pos === null) {\n    return \"-\";\n  } else if (pos.length === 3) {\n    return `[${pos[0].toFixed(2)}, ${pos[1].toFixed(2)}, ${pos[2].toFixed(2)}]`;\n  }\n  if (pos.length === 2) {\n    return `[${pos[0].toFixed(2)}, ${pos[1].toFixed(2)}]`;\n  }\n  return \"-\";\n};\n\n// Convierte vector de puntos 2D de polgono a cadena de lista de coordenadas\nexport const PolyFmt = (poly) =>\n  poly !== null && poly.length !== 0\n    ? `[${poly\n        .map((point) => `[${point[0].toFixed(2)}, ${point[1].toFixed(2)}]`)\n        .join(\", \")}]`\n    : \"-\";\n\n// Convierte punto 3D de posicin o valor nulo a icono\nexport const PosIconFmt = (pos, _row) =>\n  pos !== null ? (\n    <img src={validPosIcon} alt=\"+\" />\n  ) : (\n    <img src={nullPosIcon} alt=\"-\" />\n  );\n\n// Convierte vector de puntos 3D a icono segn tenga o no puntos\nexport const PolyIconFmt = (poly, _row) =>\n  poly !== null && poly.length !== 0 ? (\n    <img src={validPolyIcon} alt=\"+\" />\n  ) : (\n    <img src={nullPolyIcon} alt=\"-\" />\n  );\n\n// Lnea descriptiva de geometra\nexport const OpaqueGeomFmt = (geom, _row) => {\n  return `azimuth: ${geom.azimuth.toFixed(2)},\ninclinacin: (${geom.tilt.toFixed(2)}),\nposicin: ${PosFmt(geom.position)},\npolgono: ${PolyFmt(geom.polygon)}`;\n};\n\n// Lnea descriptiva de huecos\nexport const WindowGeomFmt = (geom, _row) => {\n  return `ancho: ${geom.width.toFixed(2)},\nalto: (${geom.height.toFixed(2)}),\nretranqueo: (${geom.setback.toFixed(2)}),\nposicin: ${PosFmt(geom.position)}`;\n};\n\n// Convierte geometra de hueco a icono segn tenga o no punto de insercin\nexport const WindowGeomIconFmt = (\n  geometry,\n  row,\n  _rowIndex,\n  formatExtraData\n) => {\n  const { wallData } = formatExtraData;\n  const wall = wallData[row.wall];\n  const azimuth_dir = AzimuthFmt(wall.azimuth);\n  const azimuth = <OrientaIcon dir={azimuth_dir} />;\n  const tilt_dir = TiltFmt(wall.tilt);\n  const tilt = <TiltIcon dir={tilt_dir} />;\n  const position = geometry.position ? (\n    <img src={fullGeometryIcon} alt=\"+\" />\n  ) : (\n    <img src={partialGeometryIcon} alt=\"-\" />\n  );\n  return (\n    <>\n      {position} | {azimuth} {azimuth_dir} | {tilt} {tilt_dir[0]}\n    </>\n  );\n};\n\n// Convierte geometra de hueco a icono segn tenga o no punto de insercin\nexport const OpaqueGeomIconFmt = (\n  geometry,\n  _row,\n  _rowIndex,\n  _formatExtraData\n) => {\n  const azimuth_dir = AzimuthFmt(geometry.azimuth);\n  const azimuth = <OrientaIcon dir={azimuth_dir} />;\n  const tilt_dir = TiltFmt(geometry.tilt);\n  const tilt = <TiltIcon dir={tilt_dir} />;\n  const position = geometry.position ? (\n    <img src={fullGeometryIcon} alt=\"+\" />\n  ) : (\n    <img src={partialGeometryIcon} alt=\"-\" />\n  );\n  return (\n    <>\n      {position} | {azimuth} {azimuth_dir} | {tilt} {tilt_dir[0]}\n    </>\n  );\n};\n\n// Formato y opciones de condiciones de contorno\nexport const BoundaryFmt = (cell, _row) => (\n  <span>{BOUNDARYTYPESMAP[cell]}</span>\n);\nexport const BoundaryOpts = Object.keys(BOUNDARYTYPESMAP).map((k) => {\n  return { value: k, label: BOUNDARYTYPESMAP[k] };\n});\n\n// Formato y opciones de tipos de puentes trmicos\nexport const ThermalBridgeTypesFmt = (cell, _row) => (\n  <span>{THERMALBRIDGETYPESMAP[cell]}</span>\n);\n\nexport const ThermalBridgeTypesOpts = Object.keys(THERMALBRIDGETYPESMAP).map(\n  (k) => {\n    return { value: k, label: THERMALBRIDGETYPESMAP[k] };\n  }\n);\n\n// Muestra tipo de espacio\nexport const SpaceTypeFmt = (cell, _row, _rowIndex, _formatExtraData) => (\n  <span>{SPACETYPESMAP[cell]}</span>\n);\n\n// Opciones de tipo de espacio\nexport const spaceTypesOpts = Object.keys(SPACETYPESMAP).map((k) => {\n  return { value: k, label: SPACETYPESMAP[k] };\n});\n\n// Normaliza nmero a un intervalo arbitrario (wrapping)\nexport function normalize(value, start, end) {\n  // ancho del intervalo\n  const width = end - start;\n  // convertimos el intervalo a [0, ancho] restando el valor inicial\n  const offset = value - start;\n  // volvemos a sumar el valor incial para volver al intervalo [start, end]\n  return offset - Math.floor(offset / width) * width + start;\n}\n\n// Conversin de orientacin de ngulo a nombre\nexport function azimuth_name(azimuth_angle) {\n  const azimuth = normalize(azimuth_angle, 0.0, 360.0);\n  if (azimuth < 18.0) {\n    return \"S\";\n  } else if (azimuth < 69.0) {\n    return \"SE\";\n  } else if (azimuth < 120.0) {\n    return \"E\";\n  } else if (azimuth < 157.5) {\n    return \"NE\";\n  } else if (azimuth < 202.5) {\n    return \"N\";\n  } else if (azimuth < 240.0) {\n    // 202.5 = 360 - 157.5\n    return \"NW\";\n  } else if (azimuth < 291.0) {\n    // 240 = 360 - 120\n    return \"W\";\n  } else if (azimuth < 342.0) {\n    // 291 = 360 - 69\n    return \"SW\";\n  }\n\n  // 342 = 360 - 18\n  return \"S\";\n}\n\n// Conversin de inclinacin de ngulo a nombre\nexport function tilt_name(tilt_angle) {\n  const tilt = normalize(tilt_angle, 0.0, 360.0);\n  if (tilt <= 60.0) {\n    return \"TECHO\";\n  } else if (tilt < 120.0) {\n    return \"PARED\";\n  } else if (tilt < 240.0) {\n    return \"SUELO\";\n  } else if (tilt < 300.0) {\n    return \"PARED\";\n  }\n\n  return \"TECHO\";\n}\n","/* -*- coding: utf-8 -*-\n\nCopyright (c) 2016-2021 Rafael Villar Burke <pachi@rvburke.com>\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n*/\n\nimport React, { useState, useRef } from \"react\";\nimport {\n  Modal,\n  Button,\n  ButtonGroup,\n  Col,\n  Container,\n  Form,\n  Row,\n  ToggleButton,\n  ButtonToolbar,\n} from \"react-bootstrap\";\nimport BootstrapTable from \"react-bootstrap-table-next\";\nimport cellEditFactory from \"react-bootstrap-table2-editor\";\n\nimport iconplus from \"../img/baseline-add-24px.svg\";\nimport iconless from \"../img/baseline-remove-24px.svg\";\nimport iconselectall from \"../img/select-rows.svg\";\nimport iconselectnone from \"../img/unselect-rows.svg\";\nimport iconduplicate from \"../img/outline-file_copy-24px.svg\";\nimport { uuidv4 } from \"../../utils\";\n\nimport {\n  AzimuthFmt,\n  Float2DigitsFmt,\n  getFloatOrOld,\n  TiltFmt,\n} from \"./TableHelpers\";\n\n/*\n  The getElement function from customEditor takes two arguments,\n  1. onUpdate: if you want to apply the modified data, call this function\n  2. props: contains alls customEditorParameters, \"row\" with whole row data, \"defaultValue\" with the received object, and attrs\n*/\n// Editor de datos geomtricos de opacos\n// Recibe la geometra de un opaco {tilt: f32, azimuth: f32, position: null | [f32, f32, f32], polygon: [[f32, f32], ...]}\n// No se comprueba la coherencia de la definicin geomtrica con la superficie\nexport const GeometryOpaquesEditor = React.forwardRef(\n  ({ onUpdate, value }, _ref) => {\n    const posIsNull = value.position === null || value.position.length === 0;\n    let x = 0.0,\n      y = 0.0,\n      z = 0.0;\n    if (!posIsNull) {\n      x = value.position[0];\n      y = value.position[1];\n      z = value.position[2];\n    }\n    const [isNull, setIsNull] = useState(posIsNull);\n    const [show, setShow] = useState(true);\n    // Posicin\n    const [xPos, setXPos] = useState(x);\n    const [yPos, setYPos] = useState(y);\n    const [zPos, setZPos] = useState(z);\n    // Lista de puntos 2D del polgono como objetos\n    const [poly, setPoly] = useState(\n      (value.polygon || []).map((p) => ({ id: uuidv4(), X: p[0], Y: p[1] }))\n    );\n\n    const [azimuth, setAzimuth] = useState(value.azimuth);\n    const [tilt, setTilt] = useState(value.tilt);\n\n    const updateData = () => {\n      const position = isNull\n        ? null\n        : [parseFloat(xPos), parseFloat(yPos), parseFloat(zPos)];\n      const polygon = poly.map((p) => [p.X, p.Y]);\n      return onUpdate({\n        azimuth: parseFloat(azimuth),\n        tilt: parseFloat(tilt),\n        position,\n        polygon,\n      });\n    };\n\n    const handleClose = () => {\n      setShow(false);\n      updateData();\n    };\n\n    const handleCancel = () => {\n      setShow(false);\n      return onUpdate(value);\n    };\n\n    return (\n      <Modal\n        role=\"dialog\"\n        show={show}\n        centered\n        size=\"lg\"\n        onHide={() => handleCancel()}\n      >\n        <Modal.Header closeButton>\n          <Modal.Title>Definicin geomtrica de opaco o sombra</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          <Container>\n            <AzimuthTiltEditor\n              azimuth={azimuth}\n              setAzimuth={setAzimuth}\n              tilt={tilt}\n              setTilt={setTilt}\n            />\n            <PositionEditor\n              isNull={isNull}\n              setIsNull={setIsNull}\n              xPos={xPos}\n              setXPos={setXPos}\n              yPos={yPos}\n              setYPos={setYPos}\n              zPos={zPos}\n              setZPos={setZPos}\n            />\n            <CoordsTable poly={poly} setPoly={setPoly} />\n          </Container>\n        </Modal.Body>\n        <Modal.Footer>\n          <Button variant=\"secondary\" onClick={handleCancel}>\n            Cancelar\n          </Button>\n          <Button variant=\"primary\" onClick={handleClose}>\n            Aceptar\n          </Button>\n        </Modal.Footer>\n      </Modal>\n    );\n  }\n);\n\n// Editor de Azimuth y Tilt\nconst AzimuthTiltEditor = ({ azimuth, setAzimuth, tilt, setTilt }) => (\n  <>\n    <Row>\n      <Col>\n        <Form.Label htmlFor=\"azimuth\">\n          Azimuth,  [] [-180,+180] (S=0, E+, W-).\n        </Form.Label>\n        <Row>\n          <Col md={6}>\n            <input\n              id=\"azimuth\"\n              className=\"form-control editor edit-text\"\n              type=\"text\"\n              size=\"7\"\n              title=\"Azimuth geogrfico de la proyeccin horizontal de la normal a la superficie. ngulo de desviacin de la normal respecto al sur, E+, W+\"\n              value={azimuth}\n              onChange={(ev) => {\n                setAzimuth(ev.currentTarget.value.replace(\",\", \".\"));\n              }}\n            />\n          </Col>\n          <Col style={{ background: \"#EEE\", color: \"gray\" }}>\n            {AzimuthFmt(azimuth)}\n          </Col>\n        </Row>\n      </Col>\n    </Row>\n    <Row>\n      <Col>\n        <Form.Label htmlFor=\"tilt\">\n          Inclinacin,  [] [0-+180] (0=suelo, 180=techo)\n        </Form.Label>\n        <Row>\n          <Col md={6}>\n            <input\n              id=\"tilt\"\n              className=\"form-control editor edit-text\"\n              type=\"text\"\n              size=\"7\"\n              title=\"ngulo que forma la normal de la superficie respecto al eje +Z (0 = horizontal hacia arriba, 180 = horizontal hacia abajo)\"\n              value={tilt}\n              onChange={(ev) => {\n                setTilt(ev.currentTarget.value.replace(\",\", \".\"));\n              }}\n            />\n          </Col>\n          <Col style={{ background: \"#EEE\", color: \"gray\" }}>\n            {TiltFmt(tilt)}\n          </Col>\n        </Row>\n      </Col>\n    </Row>\n  </>\n);\n\nconst PositionEditor = ({\n  isNull,\n  setIsNull,\n  xPos,\n  setXPos,\n  yPos,\n  setYPos,\n  zPos,\n  setZPos,\n}) => {\n  const inputXRef = useRef(null);\n  const inputYRef = useRef(null);\n  const inputZRef = useRef(null);\n  return (\n    <>\n      <Row id=\"position\">\n        <Col>\n          <label htmlFor=\"position\">\n            Punto de insercin del elemento (coordenadas globales):\n          </label>\n          <ButtonGroup toggle className=\"mb-2 btn-block\">\n            <ToggleButton\n              type=\"radio\"\n              variant=\"secondary\"\n              name=\"nullPos\"\n              checked={isNull}\n              onChange={(e) => {\n                setIsNull(e.currentTarget.checked);\n              }}\n              className=\"col-md-6\"\n            >\n              Sin posicin definida\n            </ToggleButton>\n            <ToggleButton\n              type=\"radio\"\n              variant=\"secondary\"\n              name=\"validPos\"\n              checked={!isNull}\n              onChange={(e) => setIsNull(!e.currentTarget.checked)}\n              className=\"col-md-6\"\n            >\n              Posicin definida por coordenadas\n            </ToggleButton>\n          </ButtonGroup>\n        </Col>\n      </Row>\n      <Form.Group as={Row}>\n        <Form.Label as={Col} md={1} htmlFor=\"xInput\" className=\"mr-3\">\n          X:\n        </Form.Label>\n        <Col>\n          <Form.Control\n            id=\"xInput\"\n            ref={inputXRef}\n            value={isNull ? \"\" : xPos}\n            readOnly={isNull}\n            onChange={(ev) => {\n              setXPos(ev.currentTarget.value.replace(\",\", \".\"));\n            }}\n            className=\"mr-3\"\n          />\n        </Col>\n        <Form.Label as={Col} md={1} htmlFor=\"yInput\" className=\"mr-3\">\n          Y:\n        </Form.Label>\n        <Col>\n          <Form.Control\n            id=\"yInput\"\n            ref={inputYRef}\n            value={isNull ? \"\" : yPos}\n            readOnly={isNull}\n            onChange={(ev) => {\n              setYPos(ev.currentTarget.value.replace(\",\", \".\"));\n            }}\n            className=\"mr-3\"\n          />\n        </Col>\n        {zPos === null || zPos === undefined ? null : (\n          <>\n            <Form.Label as={Col} md={1} htmlFor=\"zInput\" className=\"mr-3\">\n              Z:\n            </Form.Label>\n            <Col>\n              <Form.Control\n                md=\"2\"\n                id=\"zInput\"\n                ref={inputZRef}\n                value={isNull ? \"\" : zPos}\n                readOnly={isNull}\n                onChange={(ev) => {\n                  setZPos(ev.currentTarget.value.replace(\",\", \".\"));\n                }}\n                className=\"mr-3\"\n              />\n            </Col>\n          </>\n        )}\n      </Form.Group>\n    </>\n  );\n};\n\n// Tabla de puentes trmicos del edificio\nconst CoordsTable = ({ poly, setPoly }) => {\n  // Filas de puntos 2D seleccionados\n  const [selected, setSelected] = useState([]);\n  const columns = [\n    { dataField: \"id\", isKey: true, hidden: true },\n    {\n      dataField: \"X\",\n      formatter: Float2DigitsFmt,\n      text: \"Coordenada X (coordenadas locales)\",\n      align: \"center\",\n      headerTitle: (_col, _colIndex) => \"Coordenadas locales eje X\",\n      headerClasses: \"text-light bg-secondary\",\n      headerAlign: \"center\",\n      headerFormatter: () => (\n        <>\n          X\n          <br />\n          <span style={{ fontWeight: \"normal\" }}>\n            <i>[m]</i>{\" \"}\n          </span>\n        </>\n      ),\n    },\n    {\n      dataField: \"Y\",\n      formatter: Float2DigitsFmt,\n      text: \"Coordenada Y (coordenadas locales)\",\n      align: \"center\",\n      headerTitle: (_col, _colIndex) => \"Coordenadas locales eje Y\",\n      headerClasses: \"text-light bg-secondary\",\n      headerAlign: \"center\",\n      headerFormatter: () => (\n        <>\n          Y\n          <br />\n          <span style={{ fontWeight: \"normal\" }}>\n            <i>[m]</i>{\" \"}\n          </span>\n        </>\n      ),\n    },\n  ];\n\n  return (\n    <Row id=\"ctable\">\n      <Col>\n        <label htmlFor=\"ctable\">Polgono:</label>\n        <AddRemoveButtonGroup\n          poly={poly}\n          setPoly={setPoly}\n          selected={selected}\n          setSelected={setSelected}\n        />\n        <BootstrapTable\n          data={poly}\n          keyField=\"id\"\n          striped\n          hover\n          bordered={false}\n          cellEdit={cellEditFactory({\n            mode: \"dbclick\",\n            blurToSave: true,\n            afterSaveCell: (oldValue, newValue, row, column) => {\n              // Convierte a nmero campos numricos\n              if ([\"X\", \"Y\"].includes(column.dataField)) {\n                row[column.dataField] = getFloatOrOld(newValue, oldValue);\n              }\n            },\n          })}\n          selectRow={{\n            mode: \"checkbox\",\n            clickToSelect: true,\n            clickToEdit: true,\n            selected: selected,\n            onSelect: (row, isSelected, _rowIndex, _e) => {\n              if (isSelected) {\n                setSelected([...selected, row.id]);\n              } else {\n                setSelected(selected.filter((it) => it !== row.id));\n              }\n            },\n            hideSelectColumn: true,\n            bgColor: \"lightgray\",\n          }}\n          columns={columns}\n        />\n      </Col>\n    </Row>\n  );\n};\n\nconst AddRemoveButtonGroup = ({ poly, setPoly, selected, setSelected }) => {\n  return (\n    <ButtonToolbar>\n      <ButtonGroup\n        className=\"mr-2\"\n        aria-label=\"Barra de modificacin de lneas\"\n      >\n        <Button\n          variant=\"primary\"\n          size=\"sm\"\n          title=\"Aadir una fila al final de la tabla\"\n          onClick={() => {\n            const element = { id: uuidv4(), X: 0.0, Y: 0.0 };\n            setPoly([...poly, element]);\n            // seleccionamos nuevo elemento recin creado\n            setSelected([element.id]);\n          }}\n        >\n          <img src={iconplus} alt=\"Aadir fila\" />\n        </Button>\n        <Button\n          variant=\"primary\"\n          size=\"sm\"\n          title=\"Duplicar filas seleccionadas de la tabla\"\n          onClick={() => {\n            const newids = [];\n            selected.forEach((id) => {\n              const selectedIndex = poly.findIndex((h) => h.id === id);\n              if (selectedIndex !== -1) {\n                const idx = selectedIndex >= 0 ? selectedIndex : 0;\n                const selectedObj = poly[idx];\n                const dupObj = {\n                  ...selectedObj,\n                  id: uuidv4(),\n                };\n                newids.push(dupObj.id);\n                poly.splice(idx + 1, 0, dupObj);\n                setPoly(poly);\n              }\n            });\n            // Reseleccionamos lo nuevo\n            setSelected(newids);\n          }}\n        >\n          <img src={iconduplicate} alt=\"Duplicar fila\" />\n        </Button>\n        <Button\n          variant=\"primary\"\n          size=\"sm\"\n          title=\"Eliminar filas seleccionadas de la tabla\"\n          onClick={() => {\n            if (selected.length > 0) {\n              const indices = poly.reduce((acc, cur, idx) => {\n                if (selected.includes(cur.id)) {\n                  acc.push(idx);\n                }\n                return acc;\n              }, []);\n              const minidx = Math.max(0, Math.min(...indices) - 1);\n              const newPoly = poly.filter((h) => !selected.includes(h.id));\n              // Selecciona el elemento anterior al primero seleccionado salvo que no queden elementos o sea el primero, o nada si no hay elementos\n              if (newPoly.length > 0) {\n                setSelected([newPoly[minidx].id]);\n              } else {\n                setSelected([]);\n              }\n              setPoly(newPoly);\n            }\n          }}\n        >\n          <img src={iconless} alt=\"Eliminar fila\" />\n        </Button>\n      </ButtonGroup>\n      <ButtonGroup aria-label=\"Barra de seleccin y deseleccin de filas\">\n        <Button\n          variant=\"primary\"\n          size=\"sm\"\n          title=\"Seleccionar todas las filas de la tabla\"\n          onClick={() => {\n            setSelected(poly.map((e) => e.id));\n          }}\n        >\n          <img src={iconselectall} alt=\"Seleccionar todo\" />\n        </Button>\n        <Button\n          variant=\"primary\"\n          size=\"sm\"\n          title=\"Deseleccionar todas las filas de la tabla\"\n          onClick={() => {\n            setSelected([]);\n          }}\n        >\n          <img src={iconselectnone} alt=\"Deseleccionar todo\" />\n        </Button>\n      </ButtonGroup>\n    </ButtonToolbar>\n  );\n};\n\n/*\n  The getElement function from customEditor takes two arguments,\n  1. onUpdate: if you want to apply the modified data, call this function\n  2. props: contains alls customEditorParameters, \"row\" with whole row data, \"defaultValue\" with the received object, and attrs\n*/\n// Editor de datos geomtricos de huecos\n// Recibe la geometra de un hueco {position: [f32, f32], height: f32, width: f32, setback: f32}\n// No se comprueba la coherencia de la definicin geomtrica con la superficie\nexport const GeometryWindowEditor = React.forwardRef(\n  ({ onUpdate, value, ..._rest }, _ref) => {\n    const posIsNull = value.position === null || value.position.length === 0;\n    let x = 0.0,\n      y = 0.0;\n    if (!posIsNull) {\n      x = value.position[0];\n      y = value.position[1];\n    }\n    const [isNull, setIsNull] = useState(posIsNull);\n    const [show, setShow] = useState(true);\n    // Posicin\n    const [xPos, setXPos] = useState(x);\n    const [yPos, setYPos] = useState(y);\n\n    // Propiedades del hueco\n    const [width, setWidth] = useState(value.width);\n    const [height, setHeight] = useState(value.height);\n    const [setback, setSetback] = useState(value.setback);\n\n    const updateData = () => {\n      if (isNull) {\n        return onUpdate({\n          width: parseFloat(width),\n          height: parseFloat(height),\n          setback: parseFloat(setback),\n          position: null,\n        });\n      }\n\n      return onUpdate({\n        width: parseFloat(width),\n        height: parseFloat(height),\n        setback: parseFloat(setback),\n        position: [parseFloat(xPos), parseFloat(yPos)],\n      });\n    };\n\n    const handleClose = () => {\n      setShow(false);\n      updateData();\n    };\n\n    const handleCancel = () => {\n      setShow(false);\n      return onUpdate(value);\n    };\n\n    return (\n      <Modal\n        role=\"dialog\"\n        show={show}\n        centered\n        size=\"lg\"\n        onHide={() => handleCancel()} // Evitar enviar acciones a la tabla posterior\n      >\n        <Modal.Header closeButton>\n          <Modal.Title>Definicin geomtrica del hueco</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          <WidthHeightSetbackEditor\n            width={width}\n            setWidth={setWidth}\n            height={height}\n            setHeight={setHeight}\n            setback={setback}\n            setSetback={setSetback}\n          />\n          <PositionEditor\n            isNull={isNull}\n            setIsNull={setIsNull}\n            xPos={xPos}\n            setXPos={setXPos}\n            yPos={yPos}\n            setYPos={setYPos}\n          />\n        </Modal.Body>\n        <Modal.Footer>\n          <Button variant=\"secondary\" onClick={handleCancel}>\n            Cancelar\n          </Button>\n          <Button variant=\"primary\" onClick={handleClose}>\n            Aceptar\n          </Button>\n        </Modal.Footer>\n      </Modal>\n    );\n  }\n);\n\nconst WidthHeightSetbackEditor = ({\n  width,\n  setWidth,\n  height,\n  setHeight,\n  setback,\n  setSetback,\n}) => {\n  return (\n    <>\n      <Row>\n        <Form.Label as={Col} htmlFor=\"width\">\n          Ancho [m]:\n        </Form.Label>\n        <Col>\n          <input\n            id=\"width\"\n            className=\"form-control editor edit-text\"\n            type=\"text\"\n            size=\"7\"\n            value={width}\n            onChange={(ev) => {\n              setWidth(ev.currentTarget.value.replace(\",\", \".\"));\n            }}\n          />\n        </Col>\n      </Row>\n      <Row>\n        <Form.Label as={Col} htmlFor=\"height\">\n          Alto [m]:\n        </Form.Label>\n        <Col>\n          <input\n            id=\"height\"\n            className=\"form-control editor edit-text\"\n            type=\"text\"\n            size=\"7\"\n            value={height}\n            onChange={(ev) => {\n              setHeight(ev.currentTarget.value.replace(\",\", \".\"));\n            }}\n          />\n        </Col>\n      </Row>\n      <Row>\n        <Form.Label as={Col} htmlFor=\"setback\">\n          Retranqueo [m]:\n        </Form.Label>\n        <Col>\n          <input\n            id=\"setback\"\n            className=\"form-control editor edit-text\"\n            type=\"text\"\n            size=\"7\"\n            value={setback}\n            onChange={(ev) => {\n              setSetback(ev.currentTarget.value.replace(\",\", \".\"));\n            }}\n          />\n        </Col>\n      </Row>\n    </>\n  );\n};\n","/* -*- coding: utf-8 -*-\n\nCopyright (c) 2016-2021 Rafael Villar Burke <pachi@rvburke.com>\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n*/\n\nimport React, { useContext } from \"react\";\nimport BootstrapTable from \"react-bootstrap-table-next\";\nimport cellEditFactory, { Type } from \"react-bootstrap-table2-editor\";\n\nimport { observer } from \"mobx-react-lite\";\n\nimport AppState from \"../../stores/AppState\";\nimport {\n  Float2DigitsFmt,\n  getFloatOrOld,\n  WindowGeomFmt,\n  WindowGeomIconFmt,\n} from \"./TableHelpers\";\nimport { GeometryWindowEditor } from \"./GeometryEditors\";\n\n// Tabla de huecos del edificio\nconst HuecosTable = ({ selected, setSelected }) => {\n  const appstate = useContext(AppState);\n  const he1_indicators = appstate.he1_indicators;\n  const winUValuesMap = he1_indicators.u_values.windows;\n\n  // Lista de IDs con errores\n  const errors = appstate.warnings;\n  const error_ids_warning = errors\n    .filter((e) => e.level === \"WARNING\")\n    .map((e) => e.id);\n  const error_ids_danger = errors\n    .filter((e) => e.level === \"DANGER\")\n    .map((e) => e.id);\n\n  const wallData = Object.fromEntries(\n    appstate.walls.map((w) => [\n      w.id,\n      { azimuth: w.geometry.azimuth, tilt: w.geometry.tilt, name: w.name },\n    ])\n  );\n\n  // Diccionario para determinar si el hueco est o no dentro de la ET\n  const is_outside_tenv = new Map();\n  appstate.windows.forEach((win) => {\n    const wall = appstate.walls.find((w) => w.id === win.wall);\n    // 1. No tiene definido muro -> fuera\n    if (wall === undefined) {\n      is_outside_tenv[win.id] = \"outsidetenv\";\n    } else {\n      const wall_inside_tenv = appstate.wall_is_inside_tenv(wall);\n      is_outside_tenv[win.id] = wall_inside_tenv ? null : \"outsidetenv\";\n    }\n  });\n\n  // Formato y opciones de construcciones de huecos\n  const winconsMap = new Map();\n  appstate.wincons.map((s) => (winconsMap[s.id] = s.name));\n  const WinconsFmt = (cell, _row) => <span>{winconsMap[cell]}</span>;\n  const WinconsOpts = Object.keys(winconsMap).map((k) => {\n    return { value: k, label: winconsMap[k] };\n  });\n\n  // Formato y opciones de opacos\n  const WallsFmt = (cell, _row) => <span>{wallData[cell].name}</span>;\n  const WallsOpts = Object.keys(wallData).map((k) => {\n    return { value: k, label: wallData[k].name };\n  });\n\n  // Transmitancias de huecos\n  const WindowUFmt = (_cell, row, _rowIndex, _formatExtraData) => {\n    const uvalue = winUValuesMap[row.id];\n    if (uvalue === undefined || uvalue === null) {\n      return <span>-</span>;\n    }\n    return <span>{uvalue.toFixed(2)}</span>;\n  };\n\n  const columns = [\n    { dataField: \"id\", isKey: true, hidden: true, text: \"ID\" },\n    {\n      dataField: \"name\",\n      text: \"Nombre\",\n      width: \"30%\",\n      headerTitle: () => \"Nombre que identifica de forma nica el hueco\",\n      headerClasses: \"text-light bg-secondary\",\n      title: (_cell, row) => {\n        const u_value_window = winUValuesMap[row.id];\n        const u_value = !isNaN(u_value_window)\n          ? Number(u_value_window).toFixed(2)\n          : \"-\";\n        return `Hueco id: ${row.id}, U: ${u_value} W/mK`;\n      },\n    },\n    {\n      dataField: \"A\",\n      text: \"A\",\n      align: \"center\",\n      formatter: Float2DigitsFmt,\n      headerTitle: () => \"rea proyectada del hueco (m2)\",\n      headerClasses: \"text-light bg-secondary\",\n      headerAlign: \"center\",\n      headerFormatter: () => (\n        <>\n          A<sub>w,p</sub>\n          <br />\n          <span style={{ fontWeight: \"normal\" }}>\n            <i>\n              [m<sup>2</sup>]\n            </i>\n          </span>\n        </>\n      ),\n    },\n    {\n      dataField: \"cons\",\n      text: \"Construccin\",\n      align: \"center\",\n      formatter: WinconsFmt,\n      headerTitle: () => \"Construccin del hueco\",\n      headerClasses: \"text-light bg-secondary\",\n      headerAlign: \"center\",\n      editor: {\n        type: Type.SELECT,\n        options: WinconsOpts,\n      },\n    },\n    {\n      dataField: \"wall\",\n      text: \"Opaco\",\n      align: \"center\",\n      editor: {\n        type: Type.SELECT,\n        options: WallsOpts,\n      },\n      formatter: WallsFmt,\n      headerTitle: () => \"Opaco al que pertenece el hueco\",\n      headerClasses: \"text-light bg-secondary\",\n      headerAlign: \"center\",\n    },\n    {\n      dataField: \"fshobst\",\n      text: \"fshobst\",\n      align: \"center\",\n      formatter: Float2DigitsFmt,\n      headerTitle: () =>\n        \"Factor reductor por sombreamiento por obstculos externos (comprende todos los elementos exteriores al hueco como voladizos, aletas laterales, retranqueos, obstculos remotos, etc.), para el mes de julio (fraccin). Este valor puede asimilarse al factor de sombra del hueco (FS). El Documento de Apoyo DA DB-HE/1 recoge valores del factor de sombra FS para considerar el efecto de voladizos, retranqueos, aletas laterales o lamas exteriores.\",\n      headerClasses: \"text-light bg-secondary\",\n      headerAlign: \"center\",\n      headerFormatter: () => (\n        <>\n          F<sub>sh;obst</sub>\n          <br />\n          <span style={{ fontWeight: \"normal\" }}>\n            <i>[-]</i>\n          </span>\n        </>\n      ),\n    },\n    {\n      dataField: \"geometry\",\n      text: \"Geometra\",\n      align: \"center\",\n      formatter: WindowGeomIconFmt,\n      formatExtraData: { wallData },\n      title: WindowGeomFmt,\n      headerTitle: () =>\n        \"Descripcin geomtrica del hueco (posicin, ancho, alto, retranqueo). Posicin en coordenadas de muro [x, y]. Para elementos sin definicin geomtrica completa la posicin es una lista vaca.\",\n      editorRenderer: (editorProps, value) => (\n        <GeometryWindowEditor {...editorProps} value={value} />\n      ),\n      headerAlign: \"center\",\n      headerClasses: \"text-light bg-secondary\",\n    },\n    {\n      dataField: \"window_u\",\n      isDummyField: true,\n      editable: false,\n      text: \"window U\",\n      align: \"center\",\n      classes: \"td-column-computed-readonly\",\n      formatter: WindowUFmt,\n      formatExtraData: appstate.he1_indicators.u_values.windows,\n      headerTitle: () => \"Transmitancia trmica del hueco [W/mK]\",\n      headerClasses: \"text-light bg-secondary\",\n      headerAlign: \"center\",\n      headerFormatter: () => (\n        <>\n          U\n          <br />\n          <span style={{ fontWeight: \"normal\" }}>\n            <i>[W/mK]</i>{\" \"}\n          </span>\n        </>\n      ),\n    },\n  ];\n\n  return (\n    <BootstrapTable\n      data={appstate.windows}\n      keyField=\"id\"\n      striped\n      hover\n      bordered={false}\n      cellEdit={cellEditFactory({\n        mode: \"dbclick\",\n        blurToSave: true,\n        afterSaveCell: (oldValue, newValue, row, column) => {\n          // Convierte a nmero campos numricos\n          if ([\"A\", \"fshobst\"].includes(column.dataField)) {\n            row[column.dataField] = getFloatOrOld(newValue, oldValue);\n          }\n        },\n      })}\n      selectRow={{\n        mode: \"checkbox\",\n        clickToSelect: true,\n        clickToEdit: true,\n        selected: selected,\n        onSelect: (row, isSelected) => {\n          if (isSelected) {\n            setSelected([...selected, row.id]);\n          } else {\n            setSelected(selected.filter((it) => it !== row.id));\n          }\n        },\n        hideSelectColumn: true,\n        bgColor: \"lightgray\",\n      }}\n      rowClasses={(row, _rowIdx) => {\n        const classes = [];\n        // Errores\n        if (error_ids_danger.includes(row.id)) {\n          classes.push(\"id_error_danger\");\n        }\n        // Avisos\n        if (error_ids_warning.includes(row.id)) {\n          classes.push(\"id_error_warning\");\n        }\n        // clase para elementos fuera de la ET\n        const outside = is_outside_tenv[row.id];\n        if (outside !== null) {\n          classes.push(outside);\n        }\n        return classes.join(\" \");\n      }}\n      columns={columns}\n    />\n  );\n};\n\nexport default observer(HuecosTable);\n","export default __webpack_public_path__ + \"static/media/outline-add_comment-24px.a8756b97.svg\";","/* -*- coding: utf-8 -*-\n\nCopyright (c) 2016-2021 Rafael Villar Burke <pachi@rvburke.com>\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n*/\n\nimport React, { useState, useContext } from \"react\";\nimport { Button, ButtonGroup, Col, Row } from \"react-bootstrap\";\nimport { observer } from \"mobx-react-lite\";\n\nimport AppState from \"../../stores/AppState\";\n\nimport AddRemoveButtonGroup from \"./AddRemoveButtonGroup\";\nimport HuecosTable from \"./HuecosTable\";\nimport icongroup from \"../img/outline-add_comment-24px.svg\";\nimport { update_fshobst } from \"wasm-envolventecte\";\n\n// Vista de huecos del edificio\nconst HuecosView = observer(() => {\n  const appstate = useContext(AppState);\n  const [selected, setSelected] = useState([]);\n\n  return (\n    <Col>\n      <Row>\n        <Col>\n          <h4>\n            Huecos del edificio{\" \"}\n            <small className=\"text-muted\">({appstate.windows.length})</small>\n          </h4>\n        </Col>\n        <Col md=\"auto\">\n          <ButtonGroup>\n            {/* TODO: Esta operacin de actualizar los Fshobst lleva mucho tiempo deberamos usar algo que indique que se est procesando */}\n            <Button\n              variant=\"default\"\n              size=\"sm\"\n              title=\"Recalcular F_sh;obst\"\n              onClick={(_) =>\n                appstate.loadModel(update_fshobst(appstate.getModel()))\n              }\n            >\n              Calcula F<sub>sh;obst</sub>\n            </Button>\n            <Button\n              variant=\"default\"\n              size=\"sm\"\n              title=\"Agrupar huecos de igual orientacin, fraccin de marco, transmitancia y factor de transmisin solar con protecciones solares activadas. Suma las reas y calcula el factor equivalente de sombras remotas.\"\n              onClick={() => appstate.agrupaHuecos()}\n            >\n              <img src={icongroup} alt=\"Agrupar huecos\" /> Agrupar huecos\n            </Button>\n          </ButtonGroup>\n        </Col>\n        <Col md=\"auto\">\n          <AddRemoveButtonGroup\n            elements=\"windows\"\n            newobj=\"newHueco\"\n            selected={selected}\n            setSelected={setSelected}\n          />\n        </Col>\n      </Row>\n      <Row>\n        <Col>\n          <HuecosTable selected={selected} setSelected={setSelected} />\n        </Col>\n      </Row>\n      <Row className=\"text-info small mt-3\">\n        <Col>\n          <p>\n            <b>NOTA:</b>Se marcan en color ms claro aquellos elementos que no\n            pertenecen a la ET.\n          </p>\n          <p>Donde:</p>\n          <ul>\n            <li>\n              <b>\n                A<sub>w,p</sub>\n              </b>\n              : rea (proyectada) del hueco (m)\n            </li>\n            <li>\n              <b>Construccin</b>: Solucin constructiva del hueco.\n            </li>\n            <li>\n              <b>Opaco</b>: Elemento opaco en el que se sita el hueco\n            </li>\n            <li>\n              <b>\n                F<sub>sh;obst</sub>\n              </b>\n              : factor reductor por sombreamiento por obstculos externos\n              (comprende todos los elementos exteriores al hueco como voladizos,\n              aletas laterales, retranqueos, obstculos remotos, etc.), para el\n              mes de julio (fraccin).\n              <br />\n              Este valor puede asimilarse al factor de sombra del hueco (\n              <i>\n                F<sub>S</sub>\n              </i>\n              ). El Documento de Apoyo <i>DA DB-HE/1</i> recoge valores del\n              factor de sombra{\" \"}\n              <i>\n                F<sub>S</sub>\n              </i>{\" \"}\n              para considerar el efecto de voladizos, retranqueos, aletas\n              laterales o lamas exteriores.\n            </li>\n          </ul>\n          <p>\n            <b>NOTA</b>: Para los huecos definidos en la tabla se considera, a\n            efectos del clculo de K, un factor de ajuste{\" \"}\n            <i>\n              b<sub>tr,x</sub> = 1.0\n            </i>\n            , de modo que solo deben incluirse aquellos pertenecientes a\n            elementos con un factor de ajuste distinto de cero. Es decir, deben\n            excluirse aquellos huecos situados en elementos en contacto con\n            edificios o espacios adyacentes, cuyo{\" \"}\n            <i>\n              b<sub>tr,x</sub> = 0.0\n            </i>\n            .\n          </p>\n        </Col>\n      </Row>\n    </Col>\n  );\n});\n\nexport default HuecosView;\n","/* -*- coding: utf-8 -*-\n\nCopyright (c) 2016-2021 Rafael Villar Burke <pachi@rvburke.com>\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n*/\n\nimport React, { useRef, useEffect } from \"react\";\nimport * as d3 from \"d3\";\n\n// Tabla de desglose de K\n// https://embed.plnkr.co/plunk/MV01Dl\n// https://medium.com/@jeffbutsch/using-d3-in-react-with-hooks-4a6c61f1d102\n// Elementos de data: { title, a, au, type, u_mean, k_contrib, k_pct, format = false, color },\nconst KElementsChart = ({\n  data,\n  format,\n  width = 800,\n  height = 400,\n  bar_value_padding = 4,\n}) => {\n  const d3Container = useRef();\n  format =\n    format ||\n    ((d) =>\n      d === null || d === undefined || isNaN(d) ? \"-\" : `${d.toFixed(1)}%`);\n\n  useEffect(\n    () => {\n      const container = d3Container.current;\n      const margin = { top: 30, right: 30, bottom: 30, left: 60 },\n        chart_width = width - margin.left - margin.right,\n        chart_height = height - margin.top - margin.bottom;\n\n      if (data && container) {\n        // Limpia imagen preexistente\n        d3.select(container).selectChildren().remove();\n\n        // Genera imagen\n        const svg = d3\n          .select(container)\n          .attr(\"class\", \"canvas\")\n          .append(\"g\")\n          .style(\"font-size\", \"12px\")\n          .attr(\"transform\", `translate(${margin.left}, ${margin.top})`);\n\n        // Ttulo\n        svg\n          .append(\"text\")\n          .attr(\"x\", chart_width / 2)\n          .attr(\"y\", 0 - margin.top / 2)\n          .attr(\"text-anchor\", \"middle\")\n          .style(\"font-size\", \"16px\")\n          .style(\"text-decoration\", \"underline\")\n          .text(\"Descomposicin de K por elementos y tipos [%]\");\n\n        // X axis\n        const x = d3\n          .scaleBand()\n          .range([0, chart_width])\n          .domain(data.map((d) => d.short_title))\n          .padding(0.1);\n\n        const areSubtype = data.map((d) => d.type !== \"Tipo\");\n        // X ticks\n        svg\n          .append(\"g\")\n          .style(\"font-size\", \"12px\")\n          .attr(\"transform\", `translate(0, ${chart_height})`)\n          .call(d3.axisBottom(x))\n          .selectAll(\"text\")\n          .attr(\"transform\", \"translate(0,5)\")\n          .attr(\"font-weight\", (_, i) => (areSubtype[i] ? \"normal\" : \"bold\"))\n          .style(\"text-anchor\", \"middle\");\n\n        // Y axis\n        const [min, max] = d3.extent(data, (d) => d.k_pct);\n        const y = d3\n          .scaleLinear()\n          .domain([Math.min(0, min), max])\n          .range([chart_height, 0])\n          .nice();\n\n        svg.append(\"g\").call(d3.axisLeft(y));\n\n        // Rtulo eje Y (girado)\n        svg\n          .append(\"text\")\n          .attr(\"transform\", \"rotate(-90)\")\n          .attr(\"y\", 0 - margin.left)\n          .attr(\"x\", 0 - height / 2)\n          .attr(\"dy\", \"1em\")\n          .style(\"text-anchor\", \"middle\")\n          .text(\"K [%]\");\n\n        // Y = 0\n        svg\n          .append(\"g\")\n          .attr(\"class\", \"baseline\")\n          .attr(\"transform\", `translate(0, ${y(0)})`)\n          .call(d3.axisBottom(x).tickSize(0).tickFormat(\"\"));\n\n        // Bars\n        const bar = svg\n          .selectAll(\"mybar\")\n          .data(data)\n          .enter()\n          .append(\"g\")\n          .attr(\"class\", (d) => `bar ${d.k_pct < 0 ? \"negative\" : \"positive\"}`);\n\n        bar\n          .append(\"rect\")\n          .attr(\n            \"x\",\n            (d) =>\n              x(d.short_title) +\n              x.bandwidth() * (d.type === \"Tipo\" ? 0.0 : 0.25)\n          )\n          .attr(\"y\", (d) => y(Math.max(0, d.k_pct)))\n          .attr(\"width\", (d) => x.bandwidth() * (d.type === \"Tipo\" ? 1.0 : 0.5))\n          .attr(\"height\", (d) => Math.abs(y(d.k_pct) - y(0)))\n          .attr(\"mask\", (d) =>\n            d.type === \"Tipo\" ? null : \"url(#mask-diagonal)\"\n          )\n          .attr(\"fill\", (d) => d.color);\n\n        bar\n          .append(\"text\")\n          .attr(\"x\", (d) => x(d.short_title) + x.bandwidth() / 2)\n          .attr(\"y\", (d) => y(Math.max(0, d.k_pct)) - bar_value_padding)\n          .attr(\"text-anchor\", \"middle\")\n          .attr(\"font-weight\", (_, i) => (areSubtype[i] ? \"normal\" : \"bold\"))\n          .text((d) => format(d.k_pct));\n      }\n    },\n    // Array de dependencias.\n    // El bloque se ejecuta cuando cambia cualquiera de estas variables\n    [data, height, width, bar_value_padding, format]\n  );\n\n  return (\n    <svg\n      className=\"d3-component\"\n      width={width}\n      height={height}\n      ref={d3Container}\n    />\n  );\n};\n\nexport default KElementsChart;\n","/* -*- coding: utf-8 -*-\n\nCopyright (c) 2016-2021 Rafael Villar Burke <pachi@rvburke.com>\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n*/\n\nimport React, { useContext } from \"react\";\nimport { Col, Row, Table } from \"react-bootstrap\";\nimport { observer } from \"mobx-react-lite\";\n\nimport AppState from \"../../stores/AppState\";\nimport KElementsChart from \"./IndicatorsKChart\";\nimport { round_or_dash } from \"../../utils\";\n\nconst formatted = (elem, bold = false) => (bold ? <b>{elem}</b> : <>{elem}</>);\n\nconst IndicatorsKDetail = () => {\n  const appstate = useContext(AppState);\n  const { K, summary, roofs, floors, walls, windows, ground, tbs } =\n    appstate.he1_indicators.K_data;\n  const {\n    a,\n    au,\n    opaques_a,\n    opaques_au,\n    windows_a,\n    windows_au,\n    tbs_l,\n    tbs_psil,\n  } = summary;\n\n  // Elementos detallados: ttulo, a, au, tipo, con formato especial?\n  const all_elements = [\n    [\"Huecos\", \"Huecos\", windows.a, windows.au, \"Tipo\", true, \"#0096e1\"],\n    [\"Opacos\", \"Opacos\", opaques_a, opaques_au, \"Tipo\", true, \"#a0401a\"],\n    [\n      \"- Fachadas (O-W)\",\n      \"O-W\",\n      walls.a,\n      walls.au,\n      \"TipoOpaco\",\n      false,\n      \"#eedaa3\",\n    ],\n    [\n      \"- Cubiertas (O-R)\",\n      \"O-R\",\n      roofs.a,\n      roofs.au,\n      \"TipoOpaco\",\n      false,\n      \"#c28586\",\n    ],\n    [\n      \"- Suelos (O-F)\",\n      \"O-F\",\n      floors.a,\n      floors.au,\n      \"TipoOpaco\",\n      false,\n      \"#c99fde\",\n    ],\n    [\n      \"- Cerramientos en contacto con el terreno (O-G)\",\n      \"O-G\",\n      ground.a,\n      ground.au,\n      \"TipoOpaco\",\n      false,\n      \"#d3aa86\",\n    ],\n    [\"Puentes trmicos\", \"PTs\", tbs_l, tbs_psil, \"Tipo\", true, \"#447c2c\"],\n    [\n      \"- Cubierta o suelo con fachada (R)\",\n      \"TB-R\",\n      tbs.roof.l,\n      tbs.roof.psil,\n      \"TipoPT\",\n      false,\n      \"#c281ac\",\n    ],\n    [\n      \"- Balcn (B)\",\n      \"TB-B\",\n      tbs.balcony.l,\n      tbs.balcony.psil,\n      \"TipoPT\",\n      false,\n      \"#c28bb5\",\n    ],\n    [\n      \"- Esquina de fachadas (C)\",\n      \"TB-C\",\n      tbs.corner.l,\n      tbs.corner.psil,\n      \"TipoPT\",\n      false,\n      \"#eee8a4\",\n    ],\n    [\n      \"- Frente de forjado (IF)\",\n      \"TB-IF\",\n      tbs.intermediate_floor.l,\n      tbs.intermediate_floor.psil,\n      \"TipoPT\",\n      false,\n      \"#bda7de\",\n    ],\n    [\n      \"- Particin interior con envolvente (IW)\",\n      \"TB-IW\",\n      tbs.internal_wall.l,\n      tbs.internal_wall.psil,\n      \"TipoPT\",\n      false,\n      \"#d8eea8\",\n    ],\n    [\n      \"- Elementos contra el terreno con fachada (GF)\",\n      \"TB-GF\",\n      tbs.ground_floor.l,\n      tbs.ground_floor.psil,\n      \"TipoPT\",\n      false,\n      \"#d3ca86\",\n    ],\n    [\n      \"- Pilar (P)\",\n      \"TB-P\",\n      tbs.pillar.l,\n      tbs.pillar.psil,\n      \"TipoPT\",\n      false,\n      \"#98de7b\",\n    ],\n    [\n      \"- Contorno de huecos (W)\",\n      \"TB-W\",\n      tbs.window.l,\n      tbs.window.psil,\n      \"TipoPT\",\n      false,\n      \"#91decf\",\n    ],\n    [\n      \"- Genrico (G)\",\n      \"TB-G\",\n      tbs.generic.l,\n      tbs.generic.psil,\n      \"TipoPT\",\n      false,\n      \"#a200ff\",\n    ],\n  ];\n\n  const k_data = build_k_data(K, a, all_elements).filter(({ a }) => a > 0.001);\n\n  return (\n    <>\n      <Row>\n        <Col>\n          <h3>Transmitancia trmica global (K)</h3>\n          <p>\n            Indicador relativo a la transmisin de calor por conduccin a travs\n            de la envolvente trmica (huecos, opacos y puentes trmicos)\n          </p>\n          <p>\n            H<sub>tr,adj</sub> &asymp; &sum;<sub>x</sub> b<sub>tr,x</sub> \n            [&sum;\n            <sub>i</sub> A<sub>x,i</sub>  U<sub>x,i</sub> (huecos + opacos) +\n            &sum;<sub>k</sub> l<sub>x,k</sub>  <sub>x,k</sub> (PTs)] ={\" \"}\n            {windows_au.toFixed(2)} W/K (huecos) + {opaques_au.toFixed(2)} W/K\n            (opacos) + {tbs_psil.toFixed(2)} W/K (PTs) = {au.toFixed(2)} W/K{\" \"}\n          </p>\n          <p>Superficie de intercambio de la envolvente trmica</p>\n          <p>\n            &sum;A = &sum; b<sub>tr,x</sub>  A<sub>x</sub> ={\" \"}\n            {windows_a.toFixed(2)} m (huecos) + {opaques_a.toFixed(2)} m\n            (opacos) = {a.toFixed(2)} m\n          </p>\n          <p>Valor del indicador:</p>\n          <p>\n            <b>K</b> = H<sub>tr,adj</sub> / &sum;A &asymp; {au.toFixed(2)} /{\" \"}\n            {a.toFixed(2)} ={\" \"}\n            <b>\n              {K.toFixed(2)} <i>W/mK</i>\n            </b>\n          </p>\n        </Col>\n      </Row>\n      <svg\n        xmlns=\"http://www.w3.org/2000/svg\"\n        width=\"0\"\n        height=\"0\"\n        style={{ position: \"absolute\" }}\n      >\n        <defs>\n          <pattern\n            id=\"pattern-diagonal\"\n            width=\"10\"\n            height=\"10\"\n            patternUnits=\"userSpaceOnUse\"\n            patternTransform=\"rotate(45)\"\n          >\n            <rect x=\"0\" y=\"0\" width=\"8\" height=\"15\" fill=\"white\" />\n          </pattern>\n          <mask id=\"mask-diagonal\">\n            <rect width=\"2000\" height=\"500\" fill=\"url(#pattern-diagonal)\" />\n          </mask>\n        </defs>\n      </svg>\n      <Row>\n        <Col>\n          {k_data.length > 0 ? <KElementsTable K={K} data={k_data} /> : null}\n        </Col>\n      </Row>\n      <Row>\n        <Col className=\"text-center\">\n          {k_data.length > 0 ? (\n            <KElementsChart data={k_data} width={1200} />\n          ) : null}\n        </Col>\n      </Row>\n    </>\n  );\n};\n\n// Tabla de desglose de K\nconst KElementsTable = ({ K, data }) => {\n  const elem_tr = (\n    { title, a, au, u_mean, k_contrib, k_pct, color, format = false },\n    key = null\n  ) => (\n    <tr key={key}>\n      <td style={{ width: \"2em\", background: `${color}` }} />\n      <td>{formatted(title, format)}</td>\n      <td className=\"text-center\">{formatted(round_or_dash(a), format)}</td>\n      <td className=\"text-center\">{formatted(round_or_dash(au), format)}</td>\n      <td className=\"text-center\">\n        {formatted(round_or_dash(u_mean), format)}\n      </td>\n      <td className=\"text-center\">\n        {formatted(round_or_dash(k_contrib), format)}\n      </td>\n      <td className=\"text-center\">\n        {formatted(round_or_dash(k_pct, 1), format)}\n      </td>\n    </tr>\n  );\n\n  return (\n    <Table striped bordered hover size=\"sm\" className=\"small\">\n      <thead style={{ background: \"lightGray\" }}>\n        <tr>\n          <th colSpan=\"2\">Elemento</th>\n          <th className=\"text-center\">\n            A o L<br />\n            [m o m]\n          </th>\n          <th className=\"text-center\">\n            AU o L\n            <br />\n            [W/K]\n          </th>\n          <th className=\"text-center\">\n            U o  media\n            <br />\n            [W/mK]\n          </th>\n          <th className=\"text-center\">\n            &Delta;K\n            <br />\n            [W/mK]\n          </th>\n          <th className=\"text-center\">\n            K\n            <br />\n            [%]\n          </th>\n        </tr>\n      </thead>\n      <tbody>\n        {data.map((e, idx) => elem_tr(e, idx))}\n        <tr>\n          <td colSpan=\"2\">\n            <b>TOTAL</b>\n          </td>\n          <td />\n          <td />\n          <td className=\"text-center\">\n            <b>{K.toFixed(2)}</b>\n          </td>\n          <td className=\"text-center\">\n            <b>{K.toFixed(2)}</b>\n          </td>\n          <td className=\"text-center\">\n            <b>100.0</b>\n          </td>\n        </tr>\n      </tbody>\n    </Table>\n  );\n};\n\n// Genera datos a partir de lista\nconst build_k_data = (K, total_a, data) => {\n  return data.map(([title, short_title, a, au, type, format, color]) => ({\n    title,\n    short_title,\n    a,\n    au,\n    type,\n    format,\n    color,\n    u_mean: U_mean(au, a),\n    k_contrib: K_contrib(au, total_a),\n    k_pct: K_pct(au, total_a, K),\n  }));\n};\n\nconst U_mean = (elem_au, elem_a) => {\n  if (elem_a && elem_a > 0.0001) {\n    return elem_au / elem_a;\n  }\n  return null;\n};\n\nconst K_contrib = (elem_au, a) => {\n  if (a && a > 0.0001) {\n    return elem_au / a;\n  }\n  return null;\n};\n\nconst K_pct = (elem_au, a, K) => {\n  if (a && a > 0.0001 && K && Math.abs(K) > 0.0001) {\n    return (100 * elem_au) / a / K;\n  }\n  return null;\n};\n\nexport default observer(IndicatorsKDetail);\n","/* -*- coding: utf-8 -*-\n\nCopyright (c) 2016-2021 Rafael Villar Burke <pachi@rvburke.com>\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n*/\n\nimport React, { useRef, useEffect } from \"react\";\nimport * as d3 from \"d3\";\n\n// Tabla de desglose de K\n// https://embed.plnkr.co/plunk/MV01Dl\n// https://medium.com/@jeffbutsch/using-d3-in-react-with-hooks-4a6c61f1d102\n// Elementos de data: { element, color, a, u_mean, u_max, u_min },\nconst UElementsChart = ({\n  data,\n  K,\n  width = 800,\n  height = 400,\n  bar_value_padding = 4,\n}) => {\n  const d3Container = useRef();\n\n  useEffect(\n    () => {\n      const container = d3Container.current;\n      const margin = { top: 30, right: 30, bottom: 60, left: 200 },\n        chart_width = width - margin.left - margin.right,\n        chart_height = height - margin.top - margin.bottom;\n\n      const format = (d) =>\n        d === null || d === undefined || isNaN(d) ? \"-\" : `${d.toFixed(2)}`;\n\n      if (data && container) {\n        const max = Math.round(d3.max(data, (d) => d.u_max) + 0.5);\n        const filtered_data = data.filter(d => d.a > 0);\n\n        // Limpia imagen preexistente\n        d3.select(container).selectChildren().remove();\n\n        // Escalas X e Y y de color\n        const x = d3.scaleLinear().range([0, chart_width]).domain([0, max]);\n        const y = d3\n          .scaleBand()\n          .range([chart_height, 0])\n          .domain(data.map((d) => d.element));\n        // .padding(0.4);\n        const uColor = d3\n          .scaleSequential()\n          .domain([0, max])\n          .range([\"blue\", \"red\"]);\n\n        // SVG\n        const svg = d3\n          .select(container)\n          .attr(\"class\", \"canvas\")\n          .append(\"g\")\n          .style(\"font-size\", \"12px\")\n          .attr(\"transform\", `translate(${margin.left}, ${margin.top})`);\n\n        // Ttulo\n        svg\n          .append(\"text\")\n          .attr(\"x\", chart_width / 2)\n          .attr(\"y\", 0 - margin.top / 2)\n          .attr(\"text-anchor\", \"middle\")\n          .style(\"font-size\", \"16px\")\n          .style(\"text-decoration\", \"underline\")\n          .text(\"U media y rango de valores por tipo de elemento [W/mK]\");\n\n        // Axis\n        svg\n          .append(\"g\")\n          .attr(\"transform\", `translate(0, ${chart_height})`)\n          .call(d3.axisBottom(x).ticks(12))\n          .select(\".domain\")\n          .remove();\n        svg\n          .append(\"g\")\n          .call(d3.axisLeft(y).tickSizeOuter(0).tickSizeInner(-chart_width))\n          .attr(\"font-weight\", \"bold\")\n          .select(\".domain\")\n          .remove();\n\n        svg.selectAll(\".tick line\").attr(\"stroke\", \"steelBlue\");\n\n        // X axis label\n        svg\n          .append(\"text\")\n          .attr(\"text-anchor\", \"end\")\n          .attr(\"x\", chart_width)\n          .attr(\"y\", chart_height + margin.top + 20)\n          .text(\"U [W/mK]\");\n\n        // Tooltips\n        const tooltip = d3\n          .select(\"body\")\n          .append(\"div\")\n          .attr(\"class\", \"tooltip\")\n          .style(\"opacity\", 0);\n        // Three function that change the tooltip when user hover / move / leave a cell\n        const mouseover = (e, d) => {\n          tooltip.transition().duration(200).style(\"opacity\", 1);\n          tooltip\n            .html(`U_media: ${format(d.u_mean)} W/mK`)\n            .style(\"left\", e.pageX + 30 + \"px\")\n            .style(\"top\", e.pageY + \"px\");\n        };\n        const mousemove = (e, _d) => {\n          tooltip\n            .style(\"left\", e.pageX + 30 + \"px\")\n            .style(\"top\", e.pageY + \"px\");\n        };\n        const mouseleave = (_e, _d) => {\n          tooltip.transition().duration(200).style(\"opacity\", 0);\n        };\n\n        // Rectngulos con max y min\n        svg\n          .selectAll(\"boxes\")\n          .data(filtered_data)\n          .enter()\n          .insert(\"rect\")\n          .attr(\"x\", (d) => x(d.u_min))\n          .attr(\"width\", (d) => x(d.u_max - d.u_min))\n          .attr(\"y\", (d) => y(d.element) + y.bandwidth() * 0.1)\n          .attr(\"height\", y.bandwidth() * 0.8)\n          .style(\"fill\", (d) => d.color)\n          .style(\"opacity\", 0.3);\n\n        // Puntos de valor medio\n        svg\n          .selectAll(\"indPoints\")\n          .data(filtered_data)\n          .enter()\n          .append(\"circle\")\n          .attr(\"cx\", (d) => x(d.u_mean))\n          .attr(\"cy\", (d) => y(d.element) + y.bandwidth() / 2)\n          .attr(\"r\", 8)\n          .style(\"stroke\", \"black\")\n          .style(\"stroke-width\", 2)\n          .style(\"fill\", (d) => uColor(d.u_mean))\n          .on(\"mouseover\", mouseover)\n          .on(\"mousemove\", mousemove)\n          .on(\"mouseleave\", mouseleave);\n\n        // Lnea con valor de K\n        svg\n          .append(\"line\")\n          .attr(\"x1\", x(K))\n          .attr(\"x2\", x(K))\n          .attr(\"y1\", 0)\n          .attr(\"y2\", chart_height)\n          .style(\"stroke\", \"steelBlue\")\n          .style(\"stroke-width\", 3)\n          .style(\"fill\", \"none\");\n        svg\n          .append(\"text\")\n          .style(\"stroke\", \"steelBlue\")\n          .attr(\"text-anchor\", \"middle\")\n          .attr(\"x\", x(K))\n          .attr(\"y\", 10)\n          .attr('transform', `translate(${x(K) + 20}, ${0}) rotate(90)`)\n          .text(`K: ${format(K)} [W/mK]`);\n      }\n    },\n    // Array de dependencias.\n    // El bloque se ejecuta cuando cambia cualquiera de estas variables\n    [data, K, height, width, bar_value_padding]\n  );\n\n  return (\n    <svg\n      className=\"d3-component\"\n      width={width}\n      height={height}\n      ref={d3Container}\n    />\n  );\n};\n\nexport default UElementsChart;\n","/* -*- coding: utf-8 -*-\n\nCopyright (c) 2016-2021 Rafael Villar Burke <pachi@rvburke.com>\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n*/\n\nimport React, { useContext } from \"react\";\nimport { Col, Row, Table } from \"react-bootstrap\";\nimport { observer } from \"mobx-react-lite\";\n\nimport AppState from \"../../stores/AppState\";\nimport UElementsChart from \"./IndicatorsUChart\";\nimport { round_or_dash } from \"../../utils\";\n\nconst formatted = (elem, bold = false) => (bold ? <b>{elem}</b> : <>{elem}</>);\n\nconst IndicatorsUDetail = () => {\n  const appstate = useContext(AppState);\n  const { K, roofs, floors, walls, windows, ground } =\n    appstate.he1_indicators.K_data;\n\n  // Elementos detallados: ttulo, a, au, tipo, con formato especial?\n  const all_elements = [\n    [\"Huecos\", windows, \"#0096e1\"],\n    [\"Fachadas (O-W)\", walls, \"#eedaa3\"],\n    [\"Cubiertas (O-R)\", roofs, \"#c28586\"],\n    [\"Suelos (aire) (O-F)\", floors, \"#c99fde\"],\n    [\"Elem. contacto con terreno (O-G)\", ground, \"#d3aa86\"],\n  ];\n\n  const k_data = all_elements.map(\n    ([element, { a, au, u_mean, u_min, u_max }, color]) => ({\n      element,\n      color,\n      a,\n      au,\n      u_mean,\n      u_min,\n      u_max,\n    })\n  );\n\n  return (\n    <>\n      <Row>\n        <Col>\n          <h3>Transmitancia trmica de huecos y opacos (U)</h3>\n          <p>\n            Indicadores relativos a la transmisin de calor por conduccin a\n            travs de los elementos opacos y huecos pertenecientes a la\n            envolvente trmica, desagregados por tipo de elemento.\n          </p>\n        </Col>\n      </Row>\n      <svg\n        xmlns=\"http://www.w3.org/2000/svg\"\n        width=\"0\"\n        height=\"0\"\n        style={{ position: \"absolute\" }}\n      >\n        <defs>\n          <pattern\n            id=\"pattern-diagonal\"\n            width=\"10\"\n            height=\"10\"\n            patternUnits=\"userSpaceOnUse\"\n            patternTransform=\"rotate(45)\"\n          >\n            <rect x=\"0\" y=\"0\" width=\"8\" height=\"15\" fill=\"white\" />\n          </pattern>\n          <mask id=\"mask-diagonal\">\n            <rect width=\"2000\" height=\"500\" fill=\"url(#pattern-diagonal)\" />\n          </mask>\n        </defs>\n      </svg>\n      <Row>\n        <Col>{k_data.length > 0 ? <UElementsTable data={k_data} /> : null}</Col>\n      </Row>\n      <Row>\n        <Col className=\"text-center\">\n          {k_data.length > 0 ? (\n            <UElementsChart data={k_data} K={K} width={1200} />\n          ) : null}\n        </Col>\n      </Row>\n    </>\n  );\n};\n\n// Tabla de desglose de U de huecos y opacos\nconst UElementsTable = ({ data }) => (\n  <Table striped bordered hover size=\"sm\" className=\"small\">\n    <thead style={{ background: \"lightGray\" }}>\n      <tr>\n        <th colSpan=\"2\">Elemento</th>\n        <th className=\"text-center\">\n          A<br />\n          [m]\n        </th>\n        <th className=\"text-center\">\n          AU\n          <br />\n          [W/K]\n        </th>\n        <th className=\"text-center\">\n          U<sub>media</sub>\n          <br />\n          [W/mK]\n        </th>\n        <th className=\"text-center\">\n          U<sub>min</sub>\n          <br />\n          [W/mK]\n        </th>\n        <th className=\"text-center\">\n          U<sub>max</sub>\n          <br />\n          [W/mK]\n        </th>\n      </tr>\n    </thead>\n    <tbody>\n      {data.map(\n        (\n          { element, a, au, u_mean, u_min, u_max, color, format = false },\n          key\n        ) => (\n          <tr key={key}>\n            <td style={{ width: \"2em\", background: `${color}` }} />\n            <td>{formatted(element, format)}</td>\n            <td className=\"text-center\">\n              {formatted(round_or_dash(a), format)}\n            </td>\n            <td className=\"text-center\">\n              {formatted(round_or_dash(au), format)}\n            </td>\n            <td className=\"text-center\">\n              {formatted(round_or_dash(u_mean), format)}\n            </td>\n            <td className=\"text-center\">\n              {formatted(round_or_dash(u_min), format)}\n            </td>\n            <td className=\"text-center\">\n              {formatted(round_or_dash(u_max), format)}\n            </td>\n          </tr>\n        )\n      )}\n    </tbody>\n  </Table>\n);\n\nexport default observer(IndicatorsUDetail);\n","/* -*- coding: utf-8 -*-\n\nCopyright (c) 2016-2021 Rafael Villar Burke <pachi@rvburke.com>\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n*/\n\nimport React, { useRef, useEffect } from \"react\";\nimport * as d3 from \"d3\";\n\n// Grfica de desglose de q_soljul\nexport const QSolJulChartBar = ({\n  data,\n  format,\n  width = 800,\n  height = 400,\n  bar_value_padding = 4,\n}) => {\n  const d3Container = useRef();\n  format =\n    format ||\n    ((d) =>\n      d === null || d === undefined || isNaN(d) ? \"-\" : `${d.toFixed(1)}%`);\n\n  useEffect(\n    () => {\n      const container = d3Container.current;\n      const margin = { top: 30, right: 30, bottom: 30, left: 60 },\n        chart_width = width - margin.left - margin.right,\n        chart_height = height - margin.top - margin.bottom;\n\n      if (data && container) {\n        // Limpia imagen preexistente\n        d3.select(container).selectChildren().remove();\n\n        // Genera imagen\n        const svg = d3\n          .select(container)\n          .attr(\"class\", \"canvas\")\n          .append(\"g\")\n          .style(\"font-size\", \"12px\")\n          .attr(\"transform\", `translate(${margin.left}, ${margin.top})`);\n\n        // Ttulo\n        svg\n          .append(\"text\")\n          .attr(\"x\", width / 2)\n          .attr(\"y\", 0 - margin.top / 2)\n          .attr(\"text-anchor\", \"middle\")\n          .style(\"font-size\", \"16px\")\n          .style(\"text-decoration\", \"underline\")\n          .text(\"Descomposicin de q_sol;jul por orientaciones [%]\");\n\n        // X axis\n        const x = d3\n          .scaleBand()\n          .range([0, chart_width])\n          .domain(data.map((d) => d.orient))\n          .padding(0.1);\n\n        // X ticks\n        svg\n          .append(\"g\")\n          .style(\"font-size\", \"12px\")\n          .attr(\"transform\", `translate(0, ${chart_height})`)\n          .call(d3.axisBottom(x))\n          .selectAll(\"text\")\n          .attr(\"transform\", \"translate(0,5)\")\n          .style(\"text-anchor\", \"middle\");\n\n        // Y axis\n        const [min, max] = d3.extent(data, (d) => d.q_pct);\n        const y = d3\n          .scaleLinear()\n          .domain([Math.min(0, min), max])\n          .range([chart_height, 0])\n          .nice();\n\n        svg.append(\"g\").call(d3.axisLeft(y));\n\n        // Rtulo eje Y (girado)\n        svg\n          .append(\"text\")\n          .attr(\"transform\", \"rotate(-90)\")\n          .attr(\"y\", 0 - margin.left)\n          .attr(\"x\", 0 - height / 2)\n          .attr(\"dy\", \"1em\")\n          .style(\"text-anchor\", \"middle\")\n          .text(\"q_sol;jul [%]\");\n\n        // Bars\n        const bar = svg.selectAll(\"mybar\").data(data).enter().append(\"g\");\n\n        bar\n          .append(\"rect\")\n          .attr(\"x\", (d) => x(d.orient))\n          .attr(\"y\", (d) => y(d.q_pct))\n          .attr(\"width\", x.bandwidth())\n          .attr(\"height\", (d) => y(0) - y(d.q_pct))\n          .attr(\"fill\", (d) => d.color);\n\n        bar\n          .append(\"text\")\n          .attr(\"x\", (d) => x(d.orient) + x.bandwidth() / 2)\n          .attr(\"y\", (d) => y(Math.max(0, d.q_pct)) - bar_value_padding)\n          .attr(\"text-anchor\", \"middle\")\n          .text((d) => format(d.q_pct));\n      }\n    },\n    // Array de dependencias.\n    // El bloque se ejecuta cuando cambia cualquiera de estas variables\n    [data, height, width, bar_value_padding, format]\n  );\n\n  return (\n    <svg\n      className=\"d3-component\"\n      width={width}\n      height={height}\n      ref={d3Container}\n    />\n  );\n};\n\n// Grfica de desglose de q_soljul\nexport const QSolJulChartWindRose = ({\n  data,\n  format,\n  width = 800,\n  height = 400,\n  bar_value_padding = 4,\n}) => {\n  const d3Container = useRef();\n  format =\n    format ||\n    ((d) =>\n      d === null || d === undefined || isNaN(d) ? \"-\" : `${d.toFixed(1)}%`);\n\n  useEffect(\n    () => {\n      const container = d3Container.current;\n      const margin = { top: 40, right: 30, bottom: 10, left: 30 },\n        chart_width = width - margin.left - margin.right,\n        chart_height = height - margin.top - margin.bottom;\n\n      const cx = chart_width / 2;\n      const cy = chart_height / 2;\n      const radius = Math.min(cx, cy);\n      const outerRadius = radius - 35;\n      const innerRadius = 0.4 * radius;\n      const angleOffset = 180 / 8;\n\n      if (data && container) {\n        // Limpia imagen preexistente\n        d3.select(container).selectChildren().remove();\n\n        // Genera imagen\n        const svg = d3\n          .select(container)\n          .attr(\"class\", \"canvas\")\n          .append(\"g\")\n          .style(\"font-size\", \"12px\")\n          .attr(\"transform\", `translate(${margin.left}, ${margin.top / 2})`);\n\n        // Ttulo\n        svg\n          .append(\"text\")\n          .attr(\"x\", cx)\n          .attr(\"y\", 0)\n          .attr(\"text-anchor\", \"middle\")\n          .style(\"font-size\", \"16px\")\n          .style(\"text-decoration\", \"underline\")\n          .text(\"Descomposicin de q_sol;jul por orientaciones [%]\");\n\n        const chart = svg.append(\"g\");\n        chart.attr(\"transform\", `translate(${cx}, ${cy})`);\n\n        const dataOrientations = [\"N\", \"NE\", \"E\", \"SE\", \"S\", \"SW\", \"W\", \"NW\"];\n\n        // Escala de porcentajes sobre el radio\n        const max_pct = 20 * Math.ceil(d3.max(data, (d) => d.q_pct) / 20);\n        const y = d3\n          .scaleLinear()\n          .range([innerRadius, outerRadius])\n          .domain([0, max_pct]);\n        // the xScale is for the bars, one full turn around circle\n        const x = d3\n          .scaleBand()\n          .range([0 + Math.PI / 8, 2 * Math.PI + Math.PI / 8])\n          .domain(dataOrientations)\n          .align(0);\n\n        // Arc for pie chart\n        const arc = d3\n          .arc()\n          .innerRadius(innerRadius)\n          .outerRadius((d) => y(d.data.q_pct))\n          .startAngle((d) => x(d.data.orient))\n          .endAngle((d) => x(d.data.orient) - x.bandwidth());\n\n        // Piechart layout, all equal width wedges\n        const pie = d3\n          .pie()\n          .sort(null)\n          .value((_d) => 1);\n\n        const g = chart\n          .selectAll(\".arc\")\n          .data(pie(data))\n          .join(\"g\")\n          .attr(\"class\", \"arc\")\n          .call((g) =>\n            g\n              .append(\"path\")\n              .attr(\"d\", arc)\n              .style(\"fill\", (d) => d.data.color)\n              .style(\"stroke\", \"white\")\n              .style(\"stroke-width\", \"2px\")\n              .style(\"opacity\", 0.7)\n          )\n          .call((g) =>\n            g\n              .append(\"text\")\n              .text((d) => format(d.data.q_pct))\n              .attr(\"text-anchor\", \"middle\")\n              .attr(\"font-weight\", \"bold\")\n              .attr(\"x\", (d) => arc.centroid(d)[0])\n              .attr(\"y\", (d) => arc.centroid(d)[1])\n              .attr(\"dy\", \"6px\")\n          );\n\n        // Etiqueta central\n        const txt = chart\n          .append(\"text\")\n          .attr(\"text-anchor\", \"middle\")\n          .attr(\"font-weight\", \"bold\")\n          .attr(\"dy\", \"0.5em\");\n        txt.append(\"tspan\").text(\"q\").style(\"font-size\", \"24px\");\n        txt\n          .append(\"tspan\")\n          .text(\"sol;jul\")\n          .attr(\"dy\", \"0.5em\")\n          .style(\"font-size\", \"20px\");\n\n        // Etiquetas de orientacin\n        const inLowerHalf = (d) =>\n          (x(d.orient) + x.bandwidth() / 2 + Math.PI / 2) % (2 * Math.PI) <\n          Math.PI;\n\n        const label = chart\n          .append(\"g\")\n          .attr(\"class\", \"direction-labels\")\n          .selectAll(\"g\")\n          .data(pie(dataOrientations.map((d) => ({ orient: d }))))\n          .join(\"g\")\n          .attr(\"text-anchor\", \"middle\")\n          .attr(\n            \"transform\",\n            (d) =>\n              `rotate(${\n                (x(d.data.orient) - x.bandwidth()) * (180 / Math.PI) -\n                (90 - angleOffset)\n              }) translate(${outerRadius + 10},0)`\n          );\n        label\n          .append(\"text\")\n          .attr(\"transform\", (d) =>\n            inLowerHalf(d)\n              ? \"rotate(90)translate(0,6)\"\n              : \"rotate(-90)translate(0,6)\"\n          ) // flip bottom labels\n          .text((d) => d.data.orient)\n          .attr(\"font-weight\", 500)\n          .attr(\"font-size\", 14);\n\n        // Crculos de 10%\n        const yAxis = (_g) =>\n          chart\n            .append(\"g\")\n            .attr(\"class\", \"yAxis\")\n            .selectAll(\"g\")\n            .data(y.ticks(max_pct / 20)) // .slice(1) to skip 0\n            .join(\"g\")\n            .call((g) =>\n              g\n                .append(\"circle\")\n                .attr(\"fill\", \"none\")\n                .attr(\"stroke\", \"gray\")\n                .attr(\"stroke-dasharray\", \"1,3\")\n                .attr(\"r\", y)\n            )\n            .call((g) =>\n              g\n                .append(\"text\")\n                .text((d) => `${d}%`)\n                .style(\"color\", \"gray\")\n                .attr(\"font-size\", 10)\n                .attr(\"x\", (d) => y(d + 2))\n                .attr(\"transform\", (d) => `rotate(${-50 + d})`)\n            );\n        g.call(yAxis);\n      }\n    },\n    // Array de dependencias.\n    // El bloque se ejecuta cuando cambia cualquiera de estas variables\n    [data, height, width, bar_value_padding, format]\n  );\n\n  return (\n    <svg\n      className=\"d3-component\"\n      width={width}\n      height={height}\n      ref={d3Container}\n    />\n  );\n};\n","/* -*- coding: utf-8 -*-\n\nCopyright (c) 2018-2021 Rafael Villar Burke <pachi@rvburke.com>\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n*/\n\nimport React, { useContext } from \"react\";\nimport { Col, Row, Table } from \"react-bootstrap\";\nimport { observer } from \"mobx-react-lite\";\n\nimport AppState from \"../../stores/AppState\";\nimport { QSolJulChartWindRose as QSolJulChart } from \"./IndicatorsQSolJulChart\";\n// import { QSolJulChartBar as QSolJulChart } from \"./IndicatorsQSolJulChart\";\nimport { round_or_dash } from \"../../utils\";\n\nconst QSolJulDetail = () => {\n  const appstate = useContext(AppState);\n  const { area_ref, q_soljul_data } = appstate.he1_indicators;\n  const { q_soljul, Q_soljul, detail } = q_soljul_data;\n\n  const q_soljul_detail = Orientations.map(([orient, color]) => [\n    orient,\n    color,\n    detail[orient],\n  ])\n    .filter(([_orient, _color, det]) => det !== undefined && !isNaN(det.gains))\n    .map(\n      ([\n        orient,\n        color,\n        { fshobst_mean, gglshwi_mean, Ff_mean, a, irradiance, gains },\n      ]) => {\n        return {\n          orient,\n          color,\n          fshobst_mean,\n          gglshwi_mean,\n          Ff_mean,\n          a,\n          irradiance,\n          gains,\n          q_contrib: gains / area_ref,\n          q_pct: (100 * gains) / area_ref / q_soljul,\n        };\n      }\n    );\n\n  return (\n    <>\n      <Row>\n        <Col>\n          <h3>\n            Control solar de los huecos (q<sub>sol;jul</sub>)\n          </h3>\n          <p>\n            Ganancias solares en el mes de julio con los dispositivos de sombra\n            de los huecos activados\n          </p>\n          <p>\n            Q<sub>sol;jul</sub> = &sum;<sub>k</sub>(F\n            <sub>sh,obst</sub>  g<sub>gl;sh;wi</sub>  (1  F<sub>F</sub>)  A\n            <sub>w,p</sub>  H<sub>sol;jul</sub>) = {Q_soljul.toFixed(2)}{\" \"}\n            kWh/mes\n          </p>\n          <p>Superficie til</p>\n          <p>\n            A<sub>util</sub> = {area_ref.toFixed(2)} m\n          </p>\n          <p>Valor del indicador:</p>\n          <p>\n            <b>\n              q<sub>sol;jul</sub>\n            </b>{\" \"}\n            = Q<sub>sol;jul</sub> / A<sub>util</sub> ={Q_soljul.toFixed(2)} /{\" \"}\n            {area_ref.toFixed(2)} ={\" \"}\n            <b>\n              {area_ref !== 0 ? q_soljul.toFixed(2) : \"-\"} <i>kWh/m/mes</i>\n            </b>\n          </p>\n        </Col>\n      </Row>\n      <Row>\n        <Col>\n          {q_soljul_detail.length > 0 ? (\n            <QSolJulTable\n              area_ref={area_ref}\n              data={q_soljul_data}\n              detail_data={q_soljul_detail}\n            />\n          ) : null}\n        </Col>\n      </Row>\n      <Row>\n        <Col className=\"text-center\">\n          {q_soljul_detail.length > 0 ? (\n            <QSolJulChart\n              area_ref={area_ref}\n              data={q_soljul_detail}\n              width={Math.max(550, 100 * q_soljul_detail.length)}\n            />\n          ) : null}\n        </Col>\n      </Row>\n    </>\n  );\n};\n\nconst Orientations = [\n  [\"N\", \"#010164\"],\n  [\"NE\", \"#00799e\"],\n  [\"E\", \"#009e42\"],\n  [\"SE\", \"#969e00\"],\n  [\"S\", \"#ffff00\"],\n  [\"SW\", \"#ffaa00\"],\n  [\"W\", \"#aa0000\"],\n  [\"NW\", \"#9600aa\"],\n  [\"HZ\", \"#aaaaaa\"],\n];\n\n// Tabla de desglose de q_soljul\nconst QSolJulTable = (props) => {\n  const {\n    q_soljul,\n    Q_soljul,\n    a_wp,\n    irradiance_mean,\n    fshobst_mean,\n    gglshwi_mean,\n    Ff_mean,\n  } = props.data;\n  const detail_data = props.detail_data;\n  const area_ref = props.area_ref;\n\n  const elem_tr = (\n    {\n      orient,\n      color,\n      fshobst_mean,\n      gglshwi_mean,\n      Ff_mean,\n      a,\n      irradiance,\n      gains,\n    },\n    key = null\n  ) => (\n    <tr key={key}>\n      <td style={{ width: \"2em\", background: `${color}` }} />\n      <td>{orient}</td>\n      <td className=\"text-center\">{round_or_dash(fshobst_mean)}</td>\n      <td className=\"text-center\">{round_or_dash(gglshwi_mean)}</td>\n      <td className=\"text-center\">{round_or_dash(1 - Ff_mean)}</td>\n      <td className=\"text-center\">{round_or_dash(a)}</td>\n      <td className=\"text-center\">{round_or_dash(irradiance)}</td>\n      <td className=\"text-center\">{round_or_dash(gains)}</td>\n      <td className=\"text-center\">{round_or_dash(gains / area_ref)}</td>\n      <td className=\"text-center\">\n        {round_or_dash((100 * gains) / area_ref / q_soljul, 1)}\n      </td>\n    </tr>\n  );\n\n  return (\n    <Table striped bordered hover size=\"sm\" className=\"small\">\n      <thead style={{ background: \"lightGray\" }}>\n        <tr>\n          <th colSpan=\"2\">Orientacin</th>\n          <th className=\"text-center\" title=\"Factor de obstculos remotos\">\n            F<sub>sh;obst;orient</sub>\n            <br />\n            [-]\n          </th>\n          <th\n            className=\"text-center\"\n            title=\"Factor solar con dispoisivos de sombra activados\"\n          >\n            g<sub>gl;sh;wi;orient</sub>\n            <br />\n            [-]\n          </th>\n          <th\n            className=\"text-center\"\n            title=\"Fraccin transparente del hueco (no ocupada por el marco)\"\n          >\n            (1 - F<sub>f;orient</sub>)\n            <br />\n            [-]\n          </th>\n          <th className=\"text-center\" title=\"Superficie de huecos\">\n            A<sub>w;p;orient</sub>\n            <br />\n            [m]\n          </th>\n          <th\n            className=\"text-center\"\n            title=\"Irradiancia solar acumulada en el mes de julio\"\n          >\n            H<sub>sol;jul;orient</sub>\n            <br />\n            [kWh/mmes]\n          </th>\n          <th\n            className=\"text-center\"\n            title=\"Ganancias solares en el mes de julio con los dispositivos de sombra activados\"\n          >\n            Q<sub>sol;jul;orient</sub>\n            <br />\n            [kWh/mes]\n          </th>\n          <th\n            className=\"text-center\"\n            title=\"Fraccin del parmetro de control solar imputable a la orientacin\"\n          >\n            &Delta;q<sub>sol;jul</sub>\n            <br />\n            [kWh/mmes]\n          </th>\n          <th\n            className=\"text-center\"\n            title=\"Porcentaje del parmetro de control solar imputable a la orientacin\"\n          >\n            q<sub>sol;jul</sub>\n            <br />\n            [%]\n          </th>\n        </tr>\n      </thead>\n      <tbody>\n        {detail_data.map((e, idx) => elem_tr(e, idx))}\n        <tr>\n          <td colSpan=\"2\">\n            <b>TOTAL / Promedio</b>\n          </td>\n          <td\n            className=\"text-center\"\n            title=\"Factor de obstculos remotos medio\"\n          >\n            <b>{round_or_dash(fshobst_mean)}</b>\n          </td>\n          <td\n            className=\"text-center\"\n            title=\"Factor solar con dispoisivos de sombra activados medio\"\n          >\n            <b>{round_or_dash(gglshwi_mean)}</b>\n          </td>\n          <td\n            className=\"text-center\"\n            title=\"Fraccin transparente del hueco (no ocupada por el marco) media\"\n          >\n            <b>{round_or_dash(1 - Ff_mean)}</b>\n          </td>\n          <td className=\"text-center\" title=\"Superficie de huecos\">\n            <b>{round_or_dash(a_wp)}</b>\n          </td>\n          <td\n            className=\"text-center\"\n            title=\"Irradiancia solar acumulada en el mes de julio media para los huecos\"\n          >\n            <b>{round_or_dash(irradiance_mean)}</b>\n          </td>\n          <td\n            className=\"text-center\"\n            title=\"Ganancias solares en el mes de julio con los dispositivos de sombra activados\"\n          >\n            <b>{Q_soljul.toFixed(2)}</b>\n          </td>\n          <td\n            className=\"text-center\"\n            title=\"Fraccin del parmetro de control solar imputable a una orientacin de huecos\"\n          >\n            <b>{round_or_dash(q_soljul)}</b>\n          </td>\n          <td className=\"text-center\">\n            <b>100.0</b>\n          </td>\n        </tr>\n      </tbody>\n    </Table>\n  );\n};\n\nexport default observer(QSolJulDetail);\n","/* -*- coding: utf-8 -*-\n\nCopyright (c) 2016-2021 Rafael Villar Burke <pachi@rvburke.com>\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n*/\n\nimport React, { useRef, useEffect } from \"react\";\nimport * as d3 from \"d3\";\n\n// Grfica de desglose de n50\nexport const N50ChartBar = ({\n  data,\n  format,\n  width = 800,\n  height = 400,\n  bar_value_padding = 4,\n}) => {\n  const d3Container = useRef();\n  format =\n    format ||\n    ((d) =>\n      d === null || d === undefined || isNaN(d) ? \"-\" : `${d.toFixed(1)}%`);\n\n  useEffect(\n    () => {\n      const container = d3Container.current;\n      const margin = { top: 30, right: 30, bottom: 30, left: 60 },\n        chart_width = width - margin.left - margin.right,\n        chart_height = height - margin.top - margin.bottom;\n\n      if (data && container) {\n        // Limpia imagen preexistente\n        d3.select(container).selectChildren().remove();\n\n        // Genera imagen\n        const svg = d3\n          .select(container)\n          .attr(\"class\", \"canvas\")\n          .append(\"g\")\n          .style(\"font-size\", \"12px\")\n          .attr(\"transform\", `translate(${margin.left}, ${margin.top})`);\n\n        // Ttulo\n        svg\n          .append(\"text\")\n          .attr(\"x\", width / 2)\n          .attr(\"y\", 0 - margin.top / 2)\n          .attr(\"text-anchor\", \"middle\")\n          .style(\"font-size\", \"16px\")\n          .style(\"text-decoration\", \"underline\")\n          .text(\"Descomposicin de n50 por elemento [%]\");\n\n        // X axis\n        const x = d3\n          .scaleBand()\n          .range([0, chart_width])\n          .domain(data.map((d) => d.name))\n          .padding(0.1);\n\n        // X ticks\n        svg\n          .append(\"g\")\n          .style(\"font-size\", \"12px\")\n          .attr(\"transform\", `translate(0, ${chart_height})`)\n          .call(d3.axisBottom(x))\n          .selectAll(\"text\")\n          .attr(\"transform\", \"translate(0,5)\")\n          .style(\"text-anchor\", \"middle\");\n\n        // Y axis\n        const [min, max] = d3.extent(data, (d) => d.pct);\n        const y = d3\n          .scaleLinear()\n          .domain([Math.min(0, min), max])\n          .range([chart_height, 0])\n          .nice();\n\n        svg.append(\"g\").call(d3.axisLeft(y));\n\n        // Rtulo eje Y (girado)\n        svg\n          .append(\"text\")\n          .attr(\"transform\", \"rotate(-90)\")\n          .attr(\"y\", 0 - margin.left)\n          .attr(\"x\", 0 - height / 2)\n          .attr(\"dy\", \"1em\")\n          .style(\"text-anchor\", \"middle\")\n          .text(\"q_sol;jul [%]\");\n\n        // Bars\n        const bar = svg.selectAll(\"mybar\").data(data).enter().append(\"g\");\n\n        bar\n          .append(\"rect\")\n          .attr(\"x\", (d) => x(d.name))\n          .attr(\"y\", (d) => y(d.pct))\n          .attr(\"width\", x.bandwidth())\n          .attr(\"height\", (d) => y(0) - y(d.pct))\n          .attr(\"fill\", (d) => d.color);\n\n        bar\n          .append(\"text\")\n          .attr(\"x\", (d) => x(d.name) + x.bandwidth() / 2)\n          .attr(\"y\", (d) => y(Math.max(0, d.pct)) - bar_value_padding)\n          .attr(\"text-anchor\", \"middle\")\n          .text((d) => format(d.pct));\n      }\n    },\n    // Array de dependencias.\n    // El bloque se ejecuta cuando cambia cualquiera de estas variables\n    [data, height, width, bar_value_padding, format]\n  );\n\n  return (\n    <svg\n      className=\"d3-component\"\n      width={width}\n      height={height}\n      ref={d3Container}\n    />\n  );\n};\n\n// Grfica de desglose de n50\nexport const N50ChartPie = ({\n  data,\n  format,\n  width = 800,\n  height = 400,\n  bar_value_padding = 4,\n}) => {\n  const d3Container = useRef();\n  format =\n    format ||\n    ((d) =>\n      d === null || d === undefined || isNaN(d) ? \"-\" : `${d.toFixed(1)}%`);\n\n  useEffect(\n    () => {\n      const container = d3Container.current;\n      const margin = { top: 30, right: 30, bottom: 30, left: 30 },\n        chart_width = width - margin.left - margin.right,\n        chart_height = height - margin.top - margin.bottom;\n      const cx = chart_width / 2;\n      const cy = chart_height / 2;\n      const radius = Math.min(chart_width, chart_height) / 2;\n\n      if (data && container) {\n        // Limpia imagen preexistente\n        d3.select(container).selectChildren().remove();\n\n        // Genera imagen\n        const svg = d3\n          .select(container)\n          .attr(\"class\", \"canvas\")\n          .append(\"g\")\n          .style(\"font-size\", \"12px\")\n          .attr(\"transform\", `translate(${margin.left}, ${margin.top})`);\n\n        // Ttulo\n        svg\n          .append(\"text\")\n          .attr(\"x\", chart_width / 2)\n          .attr(\"y\", 0)\n          .attr(\"text-anchor\", \"middle\")\n          .style(\"font-size\", \"16px\")\n          .style(\"text-decoration\", \"underline\")\n          .text(\"Descomposicin de n50 por elementos [%]\");\n\n        const chart = svg.append(\"g\");\n        chart.attr(\"transform\", `translate(${cx}, ${cy})`);\n\n        chart.append(\"g\").attr(\"class\", \"slices\");\n        chart.append(\"g\").attr(\"class\", \"labels\");\n        chart.append(\"g\").attr(\"class\", \"lines\");\n\n        const pie = d3\n          .pie()\n          .sort(null)\n          .value((d) => d.pct);\n        const arc = d3\n          .arc()\n          .outerRadius(radius * 0.8)\n          .innerRadius(radius * 0.4);\n        const outerArc = d3\n          .arc()\n          .outerRadius(radius * 0.9)\n          .innerRadius(radius * 0.9);\n\n        // Sectores\n        const slice = svg\n          .select(\".slices\")\n          .selectAll(\"path.slice\")\n          .data(pie(data));\n\n        slice\n          .enter()\n          .insert(\"path\")\n          .attr(\"d\", (d) => arc(d))\n          .attr(\"fill\", (d) => d.data.color)\n          .attr(\"stroke\", \"white\")\n          .attr(\"class\", \"slice\")\n          .style(\"stroke-width\", \"2px\")\n          .style(\"opacity\", 0.7);\n\n        // Etiqueta central\n        slice\n          .enter()\n          .append(\"text\")\n          .text(\"n50\")\n          .attr(\"dy\", \"0.5em\")\n          .attr(\"font-weight\", \"bold\")\n          .attr(\"text-anchor\", \"middle\")\n          .style(\"font-size\", \"24px\");\n\n        slice.exit().remove();\n\n        // Etiquetas\n        const midAngle = (d) => d.startAngle + (d.endAngle - d.startAngle) / 2;\n\n        const text = svg.select(\".labels\").selectAll(\"text\").data(pie(data));\n\n        const txt = text\n          .enter()\n          .append(\"text\")\n          .attr(\"transform\", (d) => {\n            const pos = outerArc.centroid(d);\n            pos[0] = radius * (midAngle(d) < Math.PI ? 1 : -1);\n            return `translate(${pos[0]}, ${pos[1]})`;\n          })\n          .attr(\"dy\", \".35em\")\n          .style(\"text-anchor\", (d) =>\n            midAngle(d) < Math.PI ? \"start\" : \"end\"\n          );\n\n        // Primera lnea de texto - elemento\n        txt\n          .append(\"tspan\")\n          .attr(\"font-weight\", \"bold\")\n          .attr(\"x\", \"0\")\n          .text((d) => d.data.name);\n        // segundo texto - pct\n        txt\n          .append(\"tspan\")\n          .attr(\"x\", \"0\")\n          .attr(\"dy\", \"1.5em\")\n          .text((d) => format(d.data.pct));\n\n        text.exit().remove();\n\n        // Polilneas de conexin\n        const polyline = svg\n          .select(\".lines\")\n          .selectAll(\"polyline\")\n          .data(pie(data));\n\n        polyline\n          .enter()\n          .append(\"polyline\")\n          .attr(\"stroke\", \"black\")\n          .style(\"fill\", \"none\")\n          .attr(\"stroke-width\", 1)\n          .attr(\"points\", (d) => {\n            const posA = arc.centroid(d); // insercin en la cua\n            const posB = outerArc.centroid(d); // ngulo de la lnea\n            const posC = outerArc.centroid(d); // posicin de la etiqueta, un poco movida de B\n            posC[0] = radius * 0.95 * (midAngle(d) < Math.PI ? 1 : -1);\n            return [posA, posB, posC];\n          });\n\n        polyline.exit().remove();\n      }\n    },\n    // Array de dependencias.\n    // El bloque se ejecuta cuando cambia cualquiera de estas variables\n    [data, height, width, bar_value_padding, format]\n  );\n\n  return (\n    <svg\n      className=\"d3-component\"\n      width={width}\n      height={height}\n      ref={d3Container}\n    />\n  );\n};\n","/* -*- coding: utf-8 -*-\n\nCopyright (c) 2016-2021 Rafael Villar Burke <pachi@rvburke.com>\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n*/\n\nimport React, { useContext } from \"react\";\nimport { Col, Row, Table } from \"react-bootstrap\";\nimport { observer } from \"mobx-react-lite\";\n\nimport { N50ChartPie as N50Chart } from \"./IndicatorsN50Chart\";\n// import {N50ChartBar as N50Chart} from \"./IndicatorsN50Chart\";\nimport AppState from \"../../stores/AppState\";\nimport { round_or_dash } from \"../../utils\";\n\nconst IndicatorsN50Detail = () => {\n  const appstate = useContext(AppState);\n  const {\n    n50_ref,\n    n50,\n    walls_a,\n    walls_c,\n    walls_c_ref,\n    walls_c_a,\n    walls_c_a_ref,\n    windows_a,\n    windows_c,\n    windows_c_a,\n    vol,\n  } = appstate.he1_indicators.n50_data;\n  // Paso de n50 (1/h) a CA (m/h a 100Pa)\n  const factor_n50_to_ca = vol / 0.629;\n  const factor_ca_to_n50 = 1 / factor_n50_to_ca;\n  // Renovacin total / h a 10 Pa\n  const ca_tot = n50 * factor_n50_to_ca;\n\n  const n50_info = [\n    [\n      \"Opacos\",\n      \"#a0401a\",\n      walls_c_a,\n      walls_c,\n      walls_a,\n      (100 * walls_c_a) / ca_tot,\n    ],\n    [\n      \"Huecos\",\n      \"#0096e1\",\n      windows_c_a,\n      windows_c,\n      windows_a,\n      (100 * windows_c_a) / ca_tot,\n    ],\n  ];\n\n  const elem_tr = ([name, color, ca, c, a, pct], key = null) => (\n    <tr key={key}>\n      <td style={{ width: \"2em\", background: `${color}` }} />\n      <td>{name}</td>\n      <td className=\"text-center\">{round_or_dash(c)}</td>\n      <td className=\"text-center\">{round_or_dash(a)}</td>\n      <td className=\"text-center\">{round_or_dash(ca)}</td>\n      <td className=\"text-center\">{round_or_dash(ca * factor_ca_to_n50)}</td>\n      <td className=\"text-center\">{round_or_dash(pct, 1)}</td>\n    </tr>\n  );\n\n  return (\n    <>\n      <Row>\n        <Col>\n          <h3>\n            Tasa de renovacin de aire a 50 Pa (n<sub>50</sub>)\n          </h3>\n          <p>\n            <b>Tasa de renovacin de aire a 50 Pa (terica)</b>\n          </p>\n          <p>\n            Permeabilidad al aire de referencia de los opacos, obtenida segn\n            criterio de DB-HE:\n          </p>\n          <p>\n            C<sub>o, ref</sub> = {walls_c_ref.toFixed(2)} m/hm\n          </p>\n          <p>\n            Permeabilidad al aire de referencia del conjunto de la envolvente\n            trmica a partir de valores de referencia:\n          </p>\n          <p>\n            <b>\n              n<sub>50, ref</sub>\n            </b>{\" \"}\n            = 0.629  (&sum;C<sub>o</sub>  A<sub>o</sub>+ &sum;C\n            <sub>h</sub> A<sub>h</sub>) / V<sub>int</sub> = 0.629  (\n            {walls_c_a_ref.toFixed(2)} + {windows_c_a.toFixed(2)}) /{\" \"}\n            {vol.toFixed(2)} ={\" \"}\n            <b>\n              {n50_ref.toFixed(2)}{\" \"}\n              <i>\n                h<sup>-1</sup>\n              </i>\n            </b>\n          </p>\n          <p>\n            <b>Tasa de renovacin de aire a 50 Pa</b>\n          </p>\n          <p>\n            Permeabilidad al aire de los opacos obtenida mediante ensayo, si\n            est disponible, o segn criterio del DB-HE:\n          </p>\n          <p>\n            C<sub>o</sub> = {walls_c.toFixed(2)} m/hm\n          </p>\n          <p>\n            Permeabilidad al aire del conjunto de la envolvente trmica obtenida\n            mediante ensayo, si est disponible, o segn criterio del DB-HE:\n          </p>\n          <p>\n            <b>\n              n<sub>50</sub>\n            </b>{\" \"}\n            = 0.629  (&sum;C<sub>o</sub>  A<sub>o</sub>+ &sum;C\n            <sub>h</sub> A<sub>h</sub>) / V<sub>int</sub> = 0.629  (\n            {walls_c_a.toFixed(2)} + {windows_c_a.toFixed(2)}) /{\" \"}\n            {vol.toFixed(2)} ={\" \"}\n            <b>\n              {n50.toFixed(2)}{\" \"}\n              <i>\n                h<sup>-1</sup>\n              </i>\n            </b>\n          </p>\n        </Col>\n      </Row>\n      <Row>\n        <Col>\n          {n50 > 0 ? (\n            <Table striped bordered hover size=\"sm\" className=\"small\">\n              <thead style={{ background: \"lightGray\" }}>\n                <tr>\n                  <th colSpan=\"2\">Elemento</th>\n                  <th className=\"text-center\" title=\"C_i\">\n                    C<sub>i</sub>\n                    <br />\n                    [m/hm]\n                  </th>\n                  <th className=\"text-center\" title=\"A_i\">\n                    A<sub>i</sub>\n                    <br />\n                    [m]\n                  </th>\n                  <th className=\"text-center\" title=\"C_iA_i\">\n                    C<sub>i</sub>A<sub>i</sub>\n                    <br />\n                    [m/h]\n                  </th>\n                  <th className=\"text-center\" title=\"n50 imputable al elemento\">\n                    &Delta;n<sub>50</sub>\n                    <br />\n                    [%]\n                  </th>\n                  <th\n                    className=\"text-center\"\n                    title=\"Porcentaje de n50 imputable al elemento\"\n                  >\n                    n<sub>50</sub>\n                    <br />\n                    [%]\n                  </th>\n                </tr>\n              </thead>\n              <tbody>\n                {n50_info.map((e, idx) => elem_tr(e, idx))}\n                <tr>\n                  <td colSpan=\"4\">\n                    <b>TOTAL / Promedio</b>\n                  </td>\n                  <td\n                    className=\"text-center\"\n                    title=\"Volumen horario de intercambio de aire a 100 Pa (C_i  A_i)\"\n                  >\n                    <b>{round_or_dash(windows_c_a + walls_c_a)}</b>\n                  </td>\n                  <td\n                    className=\"text-center\"\n                    title=\"Tasa de renovacin de aire a 50 Pa\"\n                  >\n                    <b>{round_or_dash(n50)}</b>\n                  </td>\n                  <td className=\"text-center\">\n                    <b>100.0</b>\n                  </td>\n                </tr>\n              </tbody>\n            </Table>\n          ) : null}\n        </Col>\n      </Row>\n      <Row>\n        <Col className=\"text-center\">\n          {n50 > 0 ? (\n            <N50Chart\n              data={n50_info.map(([name, color, _ca, _c, _a, pct]) => ({\n                name,\n                color,\n                pct,\n              }))}\n              width={550}\n            />\n          ) : null}\n        </Col>\n      </Row>\n    </>\n  );\n};\n\nexport default observer(IndicatorsN50Detail);\n","/* -*- coding: utf-8 -*-\n\nCopyright (c) 2016-2021 Rafael Villar Burke <pachi@rvburke.com>\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n*/\n\nimport React, { useState, useContext } from \"react\";\nimport {\n  Alert,\n  Badge,\n  Button,\n  ButtonGroup,\n  Card,\n  Col,\n  Collapse,\n  Row,\n} from \"react-bootstrap\";\nimport { observer } from \"mobx-react-lite\";\n\nimport AppState from \"../../stores/AppState\";\nimport KDetail from \"./IndicatorsKDetail\";\nimport UDetail from \"./IndicatorsUDetail\";\nimport QSolJulDetail from \"./IndicatorsQSolJulDetail\";\nimport N50Detail from \"./IndicatorsN50Detail\";\n\nconst IndicatorsPanel = () => {\n  const appstate = useContext(AppState);\n  const [details, setDetails] = useState(false);\n  const [warnings, setWarnings] = useState(false);\n  const {\n    area_ref,\n    vol_env_net,\n    vol_env_gross,\n    compacity,\n    q_soljul_data,\n    n50_data,\n    K_data,\n  } = appstate.he1_indicators;\n  const { climate, name } = appstate.meta;\n\n  const { K } = K_data;\n  const { q_soljul } = q_soljul_data;\n  const { n50, n50_ref } = n50_data;\n\n  const errors = appstate.warnings;\n  const numavisos = errors.length;\n\n  return (\n    <>\n      <Card body bg=\"light\" id=\"indicatorscard\">\n        <Row>\n          <Col md={9}>Proyecto: <i>{name}</i></Col>\n          <Col md={3}><b>ZC: {climate}</b></Col>\n        </Row>\n        <Row>\n          <Col md={3} title=\"Transmitancia trmica global del edificio [W/mK]\">\n            <b>\n              <i>K</i> = {K.toFixed(2)} <i>W/mK</i>\n            </b>\n          </Col>\n          <Col md={3} title=\"Indicador de control solar [kWh/mmes]\">\n            <b>\n              <i>\n                q<sub>sol;jul</sub>\n              </i>{\" \"}\n              = {area_ref !== 0 ? q_soljul.toFixed(2) : \"-\"} <i>kWh/m/mes</i>\n            </b>\n          </Col>\n          <Col md={3} title=\"Tasa de renovacin de aire a 50 Pa [1/h]\">\n            <b>\n              <i>\n                n<sub>50</sub>\n              </i>{\" \"}\n              = {n50.toFixed(2)}{\" \"}\n              <i>\n                h<sup>-1</sup>\n              </i>\n            </b>\n          </Col>\n          <Col\n            md={3}\n            title=\"Volumen bruto de la envolvente trmica (volumen bruto s-s) [m]\"\n          >\n            V = {vol_env_gross.toFixed(2)} m\n          </Col>\n        </Row>\n        <Row>\n          <Col\n            md={3}\n            title=\"Superficie til de los espacios habitables del edificio o parte del edificio [m]\"\n          >\n            A<sub>util</sub> = {area_ref.toFixed(2)} m\n          </Col>\n          <Col\n            md={3}\n            title=\"Compacidad de la envolvente trmica (V_tot / A) [m/m]\"\n          >\n            V/A = {compacity.toFixed(2)} m/m\n          </Col>\n          <Col md={3} title=\"Tasa de renovacin de aire terica a 50 Pa [1/h]\">\n            <i>\n              n<sub>50,ref</sub>\n            </i>{\" \"}\n            = {n50_ref.toFixed(2)}{\" \"}\n            <i>\n              h<sup>-1</sup>\n            </i>\n          </Col>\n          <Col\n            md={3}\n            title=\"Volumen interior de la envolvente trmica (volumen neto s-t) [m]\"\n          >\n            V<sub>int</sub> = {vol_env_net.toFixed(2)} m\n          </Col>\n        </Row>\n      </Card>\n      <ButtonGroup className=\"mb-3\">\n        <Button size=\"sm\" variant=\"light\" onClick={() => setDetails(!details)}>\n          Detalles\n        </Button>\n        <Button\n          size=\"sm\"\n          variant=\"light\"\n          onClick={() => setWarnings(!warnings)}\n        >\n          Avisos{\" \"}\n          {numavisos !== 0 ? (\n            <Badge variant=\"primary\">\n              <span>({numavisos})</span>{\" \"}\n            </Badge>\n          ) : null}\n        </Button>\n        {numavisos > 0 ? (\n          <Button onClick={() => appstate.errors.clear()} variant=\"light\">\n            Limpiar avisos\n          </Button>\n        ) : null}\n      </ButtonGroup>\n      <Collapse in={warnings}>\n        <Card body bg=\"light\" border=\"info\" className=\"mb-3\">\n          <Row>\n            <Col>\n              {errors.map((e, idx) => (\n                <Alert variant={e.level.toLowerCase()} key={`AlertId${idx}`}>\n                  {e.msg}\n                </Alert>\n              ))}\n            </Col>\n          </Row>\n        </Card>\n      </Collapse>\n      <Collapse in={details}>\n        <Card body bg=\"light\" border=\"info\" className=\"mb-3\">\n          {/* isShown se podra eliminar para todos estos controles */}\n          <KDetail isShown={details} />\n          <hr />\n          <UDetail isShown={details} />\n          <hr />\n          <QSolJulDetail isShown={details} />\n          <hr />\n          <N50Detail isShown={details} />\n        </Card>\n      </Collapse>\n    </>\n  );\n};\n\nexport default observer(IndicatorsPanel);\n","/* -*- coding: utf-8 -*-\n\nCopyright (c) 2016-2021 Rafael Villar Burke <pachi@rvburke.com>\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n*/\n\nimport React, { useContext } from \"react\";\nimport { observer } from \"mobx-react-lite\";\nimport { Form, Row, Col } from \"react-bootstrap\";\n\nimport AppState from \"../../stores/AppState\";\n\nconst ClimateSelector = observer(({ ...props }) => {\n  const appstate = useContext(AppState);\n  return (\n    <Form.Group as={Row} controlId=\"formControlsClimateZone\">\n      <Col as={Form.Label} md={4} style={props.labelStyle}>\n        Zona Climtica\n      </Col>\n      <Col md={8}>\n        <Form.Control\n          value={appstate.meta.climate || \"\"}\n          onChange={(e) => {\n            appstate.meta.climate = e.target.value;\n          }}\n          as=\"select\"\n          placeholder=\"select\"\n          custom\n        >\n          {appstate.zoneslist.map((z) => (\n            <option value={z} key={\"zone_\" + z}>\n              {z}\n            </option>\n          ))}\n        </Form.Control>\n      </Col>\n    </Form.Group>\n  );\n});\n\nexport default ClimateSelector;\n","/* -*- coding: utf-8 -*-\n\nCopyright (c) 2016-2021 Rafael Villar Burke <pachi@rvburke.com>\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n*/\n\nimport React, { useContext } from \"react\";\nimport { Col, Form, Row } from \"react-bootstrap\";\nimport { observer } from \"mobx-react-lite\";\n\nimport AppState from \"../../stores/AppState\";\n\nimport ClimateSelector from \"./ClimateSelector\";\n\nconst MetaParams = observer(() => {\n  const appstate = useContext(AppState);\n  const meta = appstate.meta;\n  return (\n    <Row className=\"well\">\n      <Col>\n        <h4>Datos generales</h4>\n        <Form>\n          <Form.Group as={Row} controlId=\"formControlsName\">\n            <Form.Label column md={4}>\n              <b>Nombre del proyecto</b>\n            </Form.Label>{\" \"}\n            <Col md={8}>\n              <Form.Control\n                value={meta.name || \"Edificio\"}\n                onChange={(e) => (meta.name = e.target.value)}\n                placeholder=\"Nombre del proyecto\"\n              />\n            </Col>\n          </Form.Group>\n        </Form>\n        <h5>Clima</h5>\n        <ClimateSelector\n          labelStyle={{ color: \"inherit\" }}\n          className=\"mr-auto\"\n        />\n        <h5>Uso</h5>\n        <Form>\n          <Form.Check\n            checked={meta.is_new_building}\n            onChange={() => (meta.is_new_building = !meta.is_new_building)}\n            type=\"checkbox\"\n            label=\"Nueva construccin\"\n          />\n          <Form.Check\n            checked={meta.is_dwelling}\n            onChange={() => (meta.is_dwelling = !meta.is_dwelling)}\n            type=\"checkbox\"\n            label=\"Uso residencial privado (vivienda)\"\n          />\n          {meta.is_dwelling ? (\n            <Form.Group as={Row} controlId=\"formControlsNumberOfDwellings\">\n              <Form.Label column md={4}>\n                Nmero de viviendas\n              </Form.Label>{\" \"}\n              <Col md={8}>\n                <Form.Control\n                  type=\"number\"\n                  value={meta.num_dwellings}\n                  onChange={(e) => (meta.num_dwellings = e.target.value)}\n                  placeholder=\"1\"\n                />\n              </Col>\n            </Form.Group>\n          ) : null}\n        </Form>\n        <h5>Ventilacin e infiltraciones</h5>\n        <Form>\n          <Form.Check\n            checked={meta.n50_test_ach !== null}\n            onChange={(e) => {\n              if (e.target.checked === false) {\n                meta.n50_test_ach = null;\n              } else {\n                meta.n50_test_ach = 0.0;\n              }\n            }}\n            type=\"checkbox\"\n            label=\"Ensayo de puerta soplante disponible\"\n          />\n          {meta.n50_test_ach !== null ? (\n            <Form.Group as={Row} controlId=\"formControlsn50\">\n              <Form.Label column md={4}>\n                Tasa de intercambio de aire a 50 Pa (n<sub>50</sub>) obtenida de\n                ensayo (renh)\n              </Form.Label>{\" \"}\n              <Col md={8}>\n                <Form.Control\n                  type=\"number\"\n                  defaultValue={meta.n50_test_ach}\n                  onChange={(e) => {\n                    meta.n50_test_ach = Number(\n                      e.target.value.replace(\",\", \".\")\n                    );\n                  }}\n                  placeholder=\"0.0\"\n                  step=\"0.01\"\n                />\n              </Col>\n            </Form.Group>\n          ) : null}\n          {meta.is_dwelling ? (\n            <Form.Group as={Row} controlId=\"formControlsGlobalVentilation\">\n              <Form.Label column md={4}>\n                Ventilacin global de diseo del edificio (l/s)\n              </Form.Label>{\" \"}\n              <Col md={8}>\n                <Form.Control\n                  type=\"number\"\n                  value={meta.global_ventilation_l_s}\n                  onChange={(e) =>\n                    (meta.global_ventilation_l_s = e.target.value)\n                  }\n                  placeholder=\"0.0\"\n                  step=\"0.1\"\n                />\n              </Col>\n            </Form.Group>\n          ) : null}\n        </Form>\n\n        <h5>Aislamiento perimetral en soleras</h5>\n\n        <Form>\n          <Form.Group as={Row} controlId=\"formControls_d_perim_insulation\">\n            <Form.Label column md={4}>\n              Ancho del aislamiento perimetral (m)\n            </Form.Label>{\" \"}\n            <Col md={8}>\n              <Form.Control\n                type=\"number\"\n                value={meta.d_perim_insulation}\n                onChange={(e) => {\n                  meta.d_perim_insulation = e.target.value;\n                }}\n                placeholder=\"0.0\"\n                step=\"0.01\"\n              />\n            </Col>\n          </Form.Group>\n          <Form.Group as={Row} controlId=\"formControls_rn_perim_insulation\">\n            <Form.Label column md={4}>\n              Resistencia trmica del aislamiento perimetral (mK/W)\n            </Form.Label>{\" \"}\n            <Col md={8}>\n              <Form.Control\n                type=\"number\"\n                value={meta.rn_perim_insulation}\n                onChange={(e) => {\n                  meta.rn_perim_insulation = e.target.value;\n                }}\n                placeholder=\"0.0\"\n                step=\"0.01\"\n              />\n            </Col>\n          </Form.Group>\n        </Form>\n      </Col>\n    </Row>\n  );\n});\n\nexport default MetaParams;\n","/* -*- coding: utf-8 -*-\n\nCopyright (c) 2016-2021 Rafael Villar Burke <pachi@rvburke.com>\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n*/\n\nimport React, { useContext } from \"react\";\nimport BootstrapTable from \"react-bootstrap-table-next\";\nimport cellEditFactory, { Type } from \"react-bootstrap-table2-editor\";\n\nimport { observer } from \"mobx-react-lite\";\n\nimport AppState from \"../../stores/AppState\";\nimport {\n  Float2DigitsFmt,\n  BoundaryFmt,\n  BoundaryOpts,\n  getFloatOrOld,\n  OpaqueGeomFmt,\n} from \"./TableHelpers\";\nimport { GeometryOpaquesEditor } from \"./GeometryEditors\";\nimport { OpaqueGeomIconFmt } from \"./TableHelpers\";\nimport { OrientacionesSprite } from \"../climate/IconsOrientaciones\";\n\n// Tabla de elementos opacos\nconst OpacosTable = ({ selected, setSelected }) => {\n  const appstate = useContext(AppState);\n\n  // Lista de IDs con errores\n  const errors = appstate.warnings;\n  const error_ids_warning = errors\n    .filter((e) => e.level === \"WARNING\")\n    .map((e) => e.id);\n  const error_ids_danger = errors\n    .filter((e) => e.level === \"DANGER\")\n    .map((e) => e.id);\n\n  // Diccionario para determinar si el opaco est o no dentro de la ET\n  const is_outside_tenv = new Map();\n  appstate.walls.forEach((w) => {\n    const wall_inside_tenv = appstate.wall_is_inside_tenv(w);\n    is_outside_tenv[w.id] = wall_inside_tenv ? null : \"outsidetenv\";\n  });\n\n  // Formato y opciones de construcciones de opacos\n  const wallconsMap = new Map();\n  appstate.wallcons.map((s) => (wallconsMap[s.id] = s.name));\n  const WallconsFmt = (cell, _row) => <span>{wallconsMap[cell]}</span>;\n  const WallconsOpts = Object.keys(wallconsMap).map((k) => {\n    return { value: k, label: wallconsMap[k] };\n  });\n\n  // Formato y opciones de espacios y espacios adyacentes\n  const spaceMap = new Map();\n  spaceMap[\"\"] = \"\";\n  appstate.spaces.map((s) => (spaceMap[s.id] = s.name));\n  const SpaceFmt = (cell, _row) => <span>{spaceMap[cell]}</span>;\n  const SpaceOpts = Object.keys(spaceMap).map((k) => {\n    return { value: k, label: spaceMap[k] };\n  });\n\n  const wallUValuesMap = appstate.he1_indicators.u_values.walls;\n  const WallUFmt = (_cell, row) => {\n    // cell == id\n    const uvalue = wallUValuesMap[row.id];\n    if (uvalue === undefined || uvalue === null || isNaN(uvalue)) {\n      return <span>-</span>;\n    }\n    return <span>{uvalue.toFixed(2)}</span>;\n  };\n\n  const columns = [\n    { dataField: \"id\", isKey: true, hidden: true, text: \"ID\" },\n    {\n      dataField: \"name\",\n      text: \"Nombre\",\n      width: \"30%\",\n      headerTitle: () =>\n        \"Nombre que identifica de forma nica el elemento opaco\",\n      headerClasses: \"text-light bg-secondary\",\n      title: (_cell, row) => {\n        const u_value_wall = wallUValuesMap[row.id];\n        const u_value = !isNaN(u_value_wall)\n          ? Number(u_value_wall).toFixed(2)\n          : \"-\";\n        return `Opaco id: ${row.id}, U: ${u_value} W/mK`;\n      },\n    },\n    {\n      dataField: \"A\",\n      text: \"A\",\n      align: \"center\",\n      formatter: Float2DigitsFmt,\n      headerTitle: () =>\n        \"Superficie neta (sin huecos) del elemento opaco, en m\",\n      headerAlign: \"center\",\n      headerClasses: \"text-light bg-secondary\",\n      headerFormatter: () => (\n        <>\n          A<br />\n          <span style={{ fontWeight: \"normal\" }}>\n            <i>\n              [m<sup>2</sup>]\n            </i>{\" \"}\n          </span>\n        </>\n      ),\n    },\n    {\n      dataField: \"bounds\",\n      text: \"Tipo\",\n      editor: {\n        type: Type.SELECT,\n        options: BoundaryOpts,\n      },\n      align: \"center\",\n      formatter: BoundaryFmt,\n      headerTitle: () =>\n        \"Condicin de contorno del elemento opaco (INTERIOR | EXTERIOR | GROUND | ADIABATIC)\",\n      headerClasses: \"text-light bg-secondary\",\n      headerAlign: \"center\",\n      headerFormatter: () => (\n        <>\n          Tipo\n          <br />\n          <span style={{ fontWeight: \"normal\" }}>\n            <i>[-]</i>{\" \"}\n          </span>\n        </>\n      ),\n    },\n    {\n      dataField: \"cons\",\n      text: \"Construccin\",\n      editor: {\n        type: Type.SELECT,\n        options: WallconsOpts,\n      },\n      align: \"center\",\n      formatter: WallconsFmt,\n      headerTitle: () => \"Construccin del opaco\",\n      headerClasses: \"text-light bg-secondary\",\n      headerAlign: \"center\",\n    },\n    {\n      dataField: \"space\",\n      text: \"Espacio\",\n      editor: {\n        type: Type.SELECT,\n        options: SpaceOpts,\n      },\n      align: \"center\",\n      formatter: SpaceFmt,\n      headerTitle: () => \"Espacio al que pertenece el elemento opaco\",\n      headerClasses: \"text-light bg-secondary\",\n      headerAlign: \"center\",\n    },\n    {\n      dataField: \"nextto\",\n      text: \"Espacio ady.\",\n      editor: {\n        type: Type.SELECT,\n        options: SpaceOpts,\n      },\n      align: \"center\",\n      formatter: SpaceFmt,\n      headerTitle: () =>\n        \"Espacio adyacente con el que comunica el elemento opaco cuando es interior\",\n      headerAlign: \"center\",\n      headerClasses: \"text-light bg-secondary\",\n    },\n    {\n      dataField: \"geometry\",\n      text: \"Geometra\",\n      align: \"center\",\n      formatter: OpaqueGeomIconFmt,\n      title: OpaqueGeomFmt,\n      headerTitle: () =>\n        \"Geometra (parmetros, punto de insercin y polgono).\",\n      editorRenderer: (editorProps, value) => (\n        <GeometryOpaquesEditor {...editorProps} value={value} />\n      ),\n      headerAlign: \"center\",\n      headerClasses: \"text-light bg-secondary\",\n      headerFormatter: () => <>Geometra</>,\n    },\n    {\n      dataField: \"wall_u\",\n      text: \"wall_u\",\n      isDummyField: true,\n      editable: false,\n      align: \"center\",\n      classes: \"td-column-computed-readonly\",\n      formatter: WallUFmt,\n      formatExtraData: appstate.he1_indicators.u_values.walls,\n      headerTitle: () => \"Transmitancia trmica del elemento opaco [W/mK]\",\n      headerClasses: \"text-light bg-secondary\",\n      headerAlign: \"center\",\n      headerFormatter: () => (\n        <>\n          U\n          <br />\n          <span style={{ fontWeight: \"normal\" }}>\n            <i>[W/mK]</i>{\" \"}\n          </span>\n        </>\n      ),\n    },\n  ];\n\n  return (\n    <>\n      <OrientacionesSprite />\n      <BootstrapTable\n        data={appstate.walls}\n        keyField=\"id\"\n        striped\n        hover\n        bordered={false}\n        cellEdit={cellEditFactory({\n          mode: \"dbclick\",\n          blurToSave: true,\n          // Corrige el valor del espacio adyacente de \"\" a null\n          afterSaveCell: (oldValue, newValue, row, column) => {\n            if (column.dataField === \"nextto\" && newValue !== \"\") {\n              row.nextto = null;\n            } else if (column.dataField === \"A\" && newValue !== \"\") {\n              // Convierte a nmero campos numricos\n              row.A = getFloatOrOld(newValue, oldValue);\n            } else if (\n              column.dataField === \"geometry.tilt\" &&\n              newValue !== \"\"\n            ) {\n              row.geometry.tilt = getFloatOrOld(newValue, oldValue);\n            } else if (\n              column.dataField === \"geometry.azimuth\" &&\n              newValue !== \"\"\n            ) {\n              row.geometry.azimuth = getFloatOrOld(newValue, oldValue);\n            }\n          },\n        })}\n        selectRow={{\n          mode: \"checkbox\",\n          clickToSelect: true,\n          clickToEdit: true,\n          selected: selected,\n          onSelect: (row, isSelected) => {\n            if (isSelected) {\n              setSelected([...selected, row.id]);\n            } else {\n              setSelected(selected.filter((it) => it !== row.id));\n            }\n          },\n          hideSelectColumn: true,\n          bgColor: \"lightgray\",\n        }}\n        rowClasses={(row, _rowIdx) => {\n          const classes = [];\n          // Errores\n          if (error_ids_danger.includes(row.id)) {\n            classes.push(\"id_error_danger\");\n          }\n          // Avisos\n          if (error_ids_warning.includes(row.id)) {\n            classes.push(\"id_error_warning\");\n          }\n          // clase para elementos fuera de la ET\n          const outside = is_outside_tenv[row.id];\n          if (outside !== null) {\n            classes.push(outside);\n          }\n          return classes.join(\" \");\n        }}\n        columns={columns}\n      />\n    </>\n  );\n};\n\nexport default observer(OpacosTable);\n","/* -*- coding: utf-8 -*-\n\nCopyright (c) 2016-2021 Rafael Villar Burke <pachi@rvburke.com>\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n*/\n\nimport React, { useState, useContext } from \"react\";\nimport { Button, ButtonGroup, Col, Row } from \"react-bootstrap\";\nimport { observer } from \"mobx-react-lite\";\n\nimport AppState from \"../../stores/AppState\";\n\nimport AddRemoveButtonGroup from \"./AddRemoveButtonGroup\";\nimport OpacosTable from \"./OpacosTable\";\nimport icongroup from \"../img/outline-add_comment-24px.svg\";\n\n// Vista de elementos opacos\nconst OpacosView = observer(() => {\n  const appstate = useContext(AppState);\n  const [selected, setSelected] = useState([]);\n\n  return (\n    <Col>\n      <Row>\n        <Col>\n          <h4>\n            Elementos opacos del edificio{\" \"}\n            <small className=\"text-muted\">({appstate.walls.length})</small>\n          </h4>\n        </Col>\n        <Col md=\"auto\">\n          <ButtonGroup>\n            <Button\n              variant=\"default\"\n              size=\"sm\"\n              title=\"Agrupa opacos, sumando reas de igual transmitancia y factor de ajuste.\"\n              onClick={() => appstate.agrupaOpacos()}\n            >\n              <img src={icongroup} alt=\"Agrupar opacos\" /> Agrupar opacos\n            </Button>\n          </ButtonGroup>\n        </Col>\n        <Col md=\"auto\">\n          <AddRemoveButtonGroup\n            elements=\"walls\"\n            newobj=\"newOpaco\"\n            selected={selected}\n            setSelected={setSelected}\n          />\n        </Col>\n      </Row>\n      <Row>\n        <Col>\n          <OpacosTable selected={selected} setSelected={setSelected} />\n        </Col>\n      </Row>\n      <Row className=\"text-info small mt-3\">\n        <Col>\n          <p>\n            <b>NOTA:</b>Se marcan en color ms claro aquellos elementos que no\n            pertenecen a la ET.\n          </p>\n          <p>Donde:</p>\n          <ul>\n            <li>\n              <b>A</b>: rea del elemento opaco (m)\n            </li>\n            <li>\n              <b>Tipo</b>: Condicin de contorno del elemento opaco (EXTERIOR,\n              INTERIOR, ADIABTICO, TERRENO). Determina el factor de ajuste del\n              elemento opaco (b<sub>tr,x</sub>), que vale 1 para elementos en\n              contacto con el aire exterior o el terreno y 0 para el resto\n              (adiabticos y en contacto con otros espacios).\n              <p>\n                Esta simplificacin introduce cierto error al considerar que el\n                intercambio de calor a travs de los elementos en contacto con\n                otros edificios o espacios adyacentes es despreciable, pero\n                simplifica considerablemente los clculos y el objetivo del\n                parmetro K no es, en el caso del DB-HE, el clculo de la\n                demanda energtica si no como indicador de la calidad de la\n                envolvente trmica.\n              </p>\n            </li>\n            <li>\n              <b>Construccin</b>: solucin constructiva del elemento opaco\n            </li>\n            <li>\n              <b>Espacio</b>: Espacio al que pertenece el elemento opaco\n            </li>\n            <li>\n              <b>Espacio ady.</b>: Espacio adyacente con el que comunica el\n              elemento opaco, cuando este es un elemento interior\n            </li>\n            <li>\n              <b>Orientacin</b>: Orientacin (gamma) [-180,+180] (S=0, E=+90,\n              W=-90). Medido como azimuth geogrfico de la proyeccin horizontal\n              de la normal a la superficie.\n            </li>\n            <li>\n              <b>Inclinacin</b>: Inclinacin (beta) [0, 180]. Medido respecto a\n              la horizontal y normal hacia arriba (0 -&gt; suelo, 180 -&gt;\n              techo)\n            </li>\n          </ul>\n        </Col>\n      </Row>\n    </Col>\n  );\n});\n\nexport default OpacosView;\n","/* -*- coding: utf-8 -*-\n\nCopyright (c) 2016-2021 Rafael Villar Burke <pachi@rvburke.com>\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n*/\n\nimport React, { useContext } from \"react\";\nimport BootstrapTable from \"react-bootstrap-table-next\";\nimport cellEditFactory, { Type } from \"react-bootstrap-table2-editor\";\n\nimport { observer } from \"mobx-react-lite\";\n\nimport AppState from \"../../stores/AppState\";\nimport { Float2DigitsFmt, ThermalBridgeTypesFmt, ThermalBridgeTypesOpts, getFloatOrOld } from \"./TableHelpers\";\n\n\n// Tabla de puentes trmicos del edificio\nconst PTsTable = ({ selected, setSelected }) => {\n  const appstate = useContext(AppState);\n  const columns = [\n    { dataField: \"id\", isKey: true, hidden: true },\n    {\n      dataField: \"name\",\n      text: \"Nombre\",\n      width: \"30%\",\n      headerTitle: (_col, _colIndex) =>\n        \"Nombre que identifica de forma nica el puente trmico\",\n      headerClasses: \"text-light bg-secondary\",\n      headerFormatter: () => (\n        <>\n          Nombre\n          <br />{\" \"}\n        </>\n      ),\n      title: (_cell, row) => `Puente trmico id: ${row.id}`,\n    },\n    {\n      dataField: \"L\",\n      formatter: Float2DigitsFmt,\n      text: \"Longitud\",\n      align: \"center\",\n      headerTitle: (_col, _colIndex) => \"Longitud del puente trmico (m)\",\n      headerClasses: \"text-light bg-secondary\",\n      headerAlign: \"center\",\n      headerFormatter: () => (\n        <>\n          Longitud\n          <br />\n          <span style={{ fontWeight: \"normal\" }}>\n            <i>[m]</i>{\" \"}\n          </span>\n        </>\n      ),\n    },\n    {\n      dataField: \"kind\",\n      text: \"Tipo\",\n      align: \"center\",\n      editor: {\n        type: Type.SELECT,\n        options: ThermalBridgeTypesOpts,\n      },\n      formatter: ThermalBridgeTypesFmt,\n      headerTitle: (_col, _colIndex) =>\n        \"Tipo del puente trmico: CUBIERTA (encuentro de cubierta o suelo con fachada) | BALCN (suelo en vuelo exterior) | ESQUINA (encuentro de cerramientos verticales) | FORJADO (encuentro forjado-fachada) | PARTICIN (encuentro de particin interior con fachada, cubierta o suelo) | SOLERA (encuentra de solera o cmara ventilada con fachada) | PILAR (pilar en fachada, cubierta o suelo) | HUECO (contorno de hueco)  | GENRICO (puente trmico genrico))\",\n      headerClasses: \"text-light bg-secondary\",\n      headerAlign: \"center\",\n      headerFormatter: () => (\n        <>\n          Tipo\n          <br />\n          <span style={{ fontWeight: \"normal\" }}>\n            <i>-</i>{\" \"}\n          </span>\n        </>\n      ),\n    },\n    {\n      dataField: \"psi\",\n      text: \"Transmitancia\",\n      align: \"center\",\n      formatter: Float2DigitsFmt,\n      headerClasses: \"text-light bg-secondary\",\n      headerAttrs: {\n        title: \"Transmitancia trmica lineal del puente trmico (W/mK)\",\n        \"text-align\": \"center\",\n      },\n      headerAlign: \"center\",\n      headerFormatter: () => (\n        <>\n          &psi;\n          <br />\n          <span style={{ fontWeight: \"normal\" }}>\n            <i>[W/mK]</i>\n          </span>\n        </>\n      ),\n    },\n  ];\n\n  return (\n    <BootstrapTable\n      data={appstate.thermal_bridges}\n      keyField=\"id\"\n      striped\n      hover\n      bordered={false}\n      cellEdit={cellEditFactory({\n        mode: \"dbclick\",\n        blurToSave: true,\n        afterSaveCell: (oldValue, newValue, row, column) => {\n          // Convierte a nmero campos numricos\n          if ([\"L\", \"psi\"].includes(column.dataField)) {\n            row[column.dataField] = getFloatOrOld(newValue, oldValue);\n          }\n        },\n      })}\n      selectRow={{\n        mode: \"checkbox\",\n        clickToSelect: true,\n        clickToEdit: true,\n        selected: selected,\n        onSelect: (row, isSelected) => {\n          if (isSelected) {\n            setSelected([...selected, row.id]);\n          } else {\n            setSelected(selected.filter((it) => it !== row.id));\n          }\n        },\n        hideSelectColumn: true,\n        bgColor: \"lightgray\",\n      }}\n      columns={columns}\n    />\n  );\n};\n\nexport default observer(PTsTable);\n","/* -*- coding: utf-8 -*-\n\nCopyright (c) 2016-2021 Rafael Villar Burke <pachi@rvburke.com>\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n*/\n\nimport React, { useState, useContext } from \"react\";\nimport { Button, ButtonGroup, Col, Row } from \"react-bootstrap\";\nimport { observer } from \"mobx-react-lite\";\n\nimport AppState from \"../../stores/AppState\";\n\nimport AddRemoveButtonGroup from \"./AddRemoveButtonGroup\";\nimport PTsTable from \"./PTsTable\";\nimport icongroup from \"../img/outline-add_comment-24px.svg\";\n\n// Vista de puentes trmicos del edificio\nconst PTsView = observer(() => {\n  const appstate = useContext(AppState);\n  const [selected, setSelected] = useState([]);\n\n  return (\n    <Col>\n      <Row>\n        <Col>\n          <h4>\n            Puentes trmicos{\" \"}\n            <small className=\"text-muted\">\n              ({appstate.thermal_bridges.length})\n            </small>\n          </h4>\n        </Col>\n        <Col md=\"auto\">\n          <ButtonGroup>\n            <Button\n              variant=\"default\"\n              size=\"sm\"\n              title=\"Agrupa puentes trmicos, sumando longitudes de igual transmitancia trmica lineal.\"\n              onClick={() => appstate.agrupaPts()}\n            >\n              <img src={icongroup} alt=\"Agrupar PTs\" /> Agrupar PTs\n            </Button>\n          </ButtonGroup>\n        </Col>\n        <Col md=\"auto\">\n          <AddRemoveButtonGroup\n            elements=\"thermal_bridges\"\n            newobj=\"newPT\"\n            selected={selected}\n            setSelected={setSelected}\n          />\n        </Col>\n      </Row>\n      <Row>\n        <Col>\n          <PTsTable selected={selected} setSelected={setSelected} />\n        </Col>\n      </Row>\n      <Row className=\"text-info small mt-3\">\n        <Col>\n          <p>Donde:</p>\n          <ul>\n            <li>\n              <b>Longitud</b>: longitud del puente trmico (m)\n            </li>\n            <li>\n              <b>&psi;</b>: transmitancia trmica lineal del puente trmico\n              (W/mK)\n            </li>\n          </ul>\n          <p>\n            <b>NOTA</b>: Para los puentes trmicos definidos en la tabla se\n            considera, a efectos del clculo de K, un factor de ajuste{\" \"}\n            <i>\n              b<sub>tr,x</sub> = 1.0\n            </i>\n            , de modo que solo deben incluirse aquellos pertenecientes a\n            elementos con un factor de ajuste no nulo.\n          </p>\n        </Col>\n      </Row>\n    </Col>\n  );\n});\n\nexport default PTsView;\n","/* -*- coding: utf-8 -*-\n\nCopyright (c) 2016-2021 Rafael Villar Burke <pachi@rvburke.com>\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n*/\n\nimport React, { useContext } from \"react\";\nimport BootstrapTable from \"react-bootstrap-table-next\";\nimport cellEditFactory from \"react-bootstrap-table2-editor\";\n\nimport { observer } from \"mobx-react-lite\";\n\nimport AppState from \"../../stores/AppState\";\nimport { GeometryOpaquesEditor } from \"./GeometryEditors\";\nimport { OpaqueGeomFmt, OpaqueGeomIconFmt } from \"./TableHelpers\";\n\n// Tabla de elementos de sombra del edificio\nconst ShadesTable = ({ selected, setSelected }) => {\n  const appstate = useContext(AppState);\n  const columns = [\n    { dataField: \"id\", isKey: true, hidden: true },\n    {\n      dataField: \"name\",\n      text: \"Nombre\",\n      width: \"30%\",\n      headerTitle: () =>\n        \"Nombre que identifica de forma nica el elemento de sombra\",\n      headerClasses: \"text-light bg-secondary\",\n      title: (_cell, row) => `Elemento de sombra id: ${row.id}`,\n    },\n    {\n      dataField: \"geometry\",\n      text: \"Geometra\",\n      align: \"center\",\n      formatter: OpaqueGeomIconFmt,\n      title: OpaqueGeomFmt,\n      headerTitle: () =>\n        \"Lista de puntos 2D que configuran el polgono del elemento: [[x, y]...]. Para elementos sin definicin geomtrica completa no se define este elemento.\",\n      editorRenderer: (editorProps, value) => (\n        <GeometryOpaquesEditor {...editorProps} value={value} />\n      ),\n      headerAlign: \"center\",\n      headerClasses: \"text-light bg-secondary\",\n      headerFormatter: () => <>Geometra</>,\n    },\n  ];\n  return (\n    <BootstrapTable\n      data={appstate.shades}\n      keyField=\"id\"\n      striped\n      hover\n      bordered={false}\n      tableHeaderClass=\"text-light bg-secondary\"\n      cellEdit={cellEditFactory({\n        mode: \"dbclick\",\n        blurToSave: true,\n        afterSaveCell: (oldValue, newValue, row, column) => {\n          if (\n            column.dataField === \"geometry.position\" &&\n            newValue === undefined\n          ) {\n            // Corrige el valor de position de undefined a null\n            row.geometry.position = null;\n          }\n        },\n      })}\n      selectRow={{\n        mode: \"checkbox\",\n        clickToSelect: true,\n        clickToEdit: true,\n        selected: selected,\n        onSelect: (row, isSelected) => {\n          if (isSelected) {\n            setSelected([...selected, row.id]);\n          } else {\n            setSelected(selected.filter((it) => it !== row.id));\n          }\n        },\n        hideSelectColumn: true,\n        bgColor: \"lightgray\",\n      }}\n      columns={columns}\n    />\n  );\n};\n\nexport default observer(ShadesTable);\n","/* -*- coding: utf-8 -*-\n\nCopyright (c) 2016-2021 Rafael Villar Burke <pachi@rvburke.com>\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n*/\n\nimport React, { useState, useContext } from \"react\";\nimport { Col, Row } from \"react-bootstrap\";\nimport { observer } from \"mobx-react-lite\";\n\nimport AppState from \"../../stores/AppState\";\n\nimport AddRemoveButtonGroup from \"./AddRemoveButtonGroup\";\nimport ShadesTable from \"./ShadesTable\";\n\n// Vista de elementos de sombra del edificio\nconst ShadesView = observer(() => {\n  const appstate = useContext(AppState);\n  const [selected, setSelected] = useState([]);\n\n  return (\n    <Col>\n      <Row>\n        <Col>\n          <h4>\n            Elementos de sombra{\" \"}\n            <small className=\"text-muted\">({appstate.shades.length})</small>\n          </h4>\n        </Col>\n        <Col md=\"auto\">\n          <AddRemoveButtonGroup\n            elements=\"shades\"\n            newobj=\"newShade\"\n            selected={selected}\n            setSelected={setSelected}\n          />\n        </Col>\n      </Row>\n      <Row>\n        <Col>\n          <ShadesTable selected={selected} setSelected={setSelected} />\n        </Col>\n      </Row>\n      <Row className=\"text-info small mt-3\">\n        <Col>\n          <p>Donde:</p>\n          <ul>\n            <li>\n              <b>Orientacin</b>: Orientacin (gamma) [-180,+180] (S=0, E=+90,\n              W=-90). Medido como azimuth geogrfico de la proyeccin horizontal\n              de la normal a la superficie.\n            </li>\n            <li>\n              <b>Inclinacin</b>: Inclinacin (beta) [0, 180]. Medido respecto a\n              la horizontal y normal hacia arriba (0 -&gt; superficie mirando\n              hacia arriba, 180 -&gt; superficie mirando hacia abajo)\n            </li>\n          </ul>\n        </Col>\n      </Row>\n    </Col>\n  );\n});\n\nexport default ShadesView;\n","/* -*- coding: utf-8 -*-\n\nCopyright (c) 2016-2021 Rafael Villar Burke <pachi@rvburke.com>\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n*/\n\nimport React, { useState, useContext } from \"react\";\nimport BootstrapTable from \"react-bootstrap-table-next\";\nimport cellEditFactory, { Type } from \"react-bootstrap-table2-editor\";\n\nimport { observer } from \"mobx-react-lite\";\n\nimport AppState from \"../../stores/AppState\";\nimport { Float1DigitsFmt, Float2DigitsFmt, BoolFmt, SpaceTypeFmt, spaceTypesOpts, getFloatOrOld } from \"./TableHelpers\";\n\n\n// Custom editor para booleanos\n//\n// The getElement function returns a JSX value and takes two arguments:\n//  - onUpdate: if you want to apply the modified data, call this function\n//  - props: contain customEditorParameters, whole row data, defaultValue and attrs\n// Usamos forwardRef para poder tener referencias en componentes funcionales\n// ver: https://github.com/reactjs/reactjs.org/issues/2120\nconst BoolEditor = React.forwardRef((props, _ref) => {\n  const { value: defaultValue, onUpdate } = props;\n  const [value, setValue] = useState(defaultValue);\n\n  return (\n    <input\n      type=\"checkbox\"\n      checked={value}\n      onKeyDown={(e) => {\n        if (e.key === \"Enter\") {\n          onUpdate(value);\n        }\n      }}\n      onChange={(_e) => setValue(!value)}\n      onBlur={(_e) => onUpdate(value)}\n    />\n  );\n});\n\n// Custom editor para nivel de ventilacin de los espacios n_v\nconst NVEditor = React.forwardRef((props, _ref) => {\n  const { defaultValue, onUpdate } = props;\n  const [value, setValue] = useState(defaultValue);\n  const updateData = () => {\n    // onUpdate cancela la edicin si se pasa null as que usamos undefined en ese caso\n    // en BootstrapTable usamos cellEdit.afterSaveCell para cambiar undefined por null\n    const res =\n      value === null || value === \"\"\n        ? undefined\n        : Number(value.replace(\",\", \".\"));\n    onUpdate(res);\n  };\n\n  return (\n    <span>\n      <input\n        type=\"text\"\n        value={value === null || undefined ? \"\" : value}\n        onKeyDown={(e) => {\n          if (e.key === \"Enter\") {\n            updateData();\n          }\n        }}\n        onChange={(e) => {\n          let val = e.currentTarget.value;\n          val =\n            val === \"\" ||\n            val === null ||\n            Number.isNaN(Number(val.replace(\",\", \".\")))\n              ? \"\"\n              : val;\n          setValue(val);\n        }}\n        onBlur={(_e) => updateData()}\n      />\n    </span>\n  );\n});\n\n// Tabla de espacios del edificio\nconst SpacesTable = ({ selected, setSelected }) => {\n  const appstate = useContext(AppState);\n  const columns = [\n    { dataField: \"id\", isKey: true, hidden: true },\n    {\n      dataField: \"name\",\n      text: \"Nombre\",\n      width: \"30%\",\n      headerTitle: () => \"Nombre del espacio\",\n      headerClasses: \"text-light bg-secondary\",\n      title: (_cell, row) => `Espacio id: ${row.id}`,\n    },\n    {\n      dataField: \"area\",\n      text: \"A\",\n      align: \"center\",\n      formatter: Float2DigitsFmt,\n      headerTitle: () => \"Superficie til del espacio (m)\",\n      headerClasses: \"text-light bg-secondary\",\n      headerAlign: \"center\",\n      headerFormatter: () => (\n        <>\n          A<br />\n          <span style={{ fontWeight: \"normal\" }}>\n            <i>\n              [m<sup>2</sup>]\n            </i>{\" \"}\n          </span>\n        </>\n      ),\n    },\n    {\n      dataField: \"multiplier\",\n      text: \"Multiplicador\",\n      align: \"center\",\n      formatter: Float1DigitsFmt,\n      headerTitle: () => \"Multiplicador (-)\",\n      headerClasses: \"text-light bg-secondary\",\n      headerAlign: \"center\",\n      headerFormatter: () => (\n        <>\n          mult.\n          <br />\n          <span style={{ fontWeight: \"normal\" }}>\n            <i>[-]</i>{\" \"}\n          </span>\n        </>\n      ),\n    },\n    {\n      dataField: \"type\",\n      text: \"Tipo\",\n      align: \"center\",\n      formatter: SpaceTypeFmt,\n      editor: {\n        type: Type.SELECT,\n        options: spaceTypesOpts,\n      },\n      headerTitle: () =>\n        \"Tipo de espacio: ACONDICIONADO, NO ACONDICIONADO, NO HABITABLE\",\n      headerClasses: \"text-light bg-secondary\",\n      headerAlign: \"center\",\n      headerFormatter: () => (\n        <>\n          Tipo\n          <br />\n          <span style={{ fontWeight: \"normal\" }}>\n            <i>[-]</i>{\" \"}\n          </span>\n        </>\n      ),\n    },\n    {\n      dataField: \"inside_tenv\",\n      text: \"Interior a ET\",\n      align: \"center\",\n      formatter: BoolFmt,\n      editorRenderer: (\n        editorProps,\n        value,\n        _row,\n        _column,\n        _rowIndex,\n        _columnIndex\n      ) => <BoolEditor value={value} {...editorProps} />,\n      headerTitle: () => \"Pertenece a la envolvente trmica?\",\n      headerClasses: \"text-light bg-secondary\",\n      headerAlign: \"center\",\n      headerFormatter: () => (\n        <>\n          Interior <br />a la E.T.?\n        </>\n      ),\n    },\n    {\n      dataField: \"height\",\n      text: \"Altura\",\n      align: \"center\",\n      formatter: Float2DigitsFmt,\n      headerTitle: () =>\n        \"Altura total, bruta, o suelo a suelo, del espacio (m)\",\n      headerClasses: \"text-light bg-secondary\",\n      headerAlign: \"center\",\n      headerFormatter: () => (\n        <>\n          h<sub>s-s</sub>\n          <br />\n          <span style={{ fontWeight: \"normal\" }}>\n            <i>[m]</i>{\" \"}\n          </span>\n        </>\n      ),\n    },\n    {\n      dataField: \"n_v\",\n      text: \"Ventilacin ren/h\",\n      align: \"center\",\n      formatter: Float2DigitsFmt,\n      customEditor: {\n        getElement: (onUpdate, props) => (\n          <NVEditor onUpdate={onUpdate} defaultValue={null} {...props} />\n        ),\n      },\n      headerTitle: () =>\n        \"Ventilacin, en ren/h. Slo para espacios no habitables.\",\n      headerClasses: \"text-light bg-secondary\",\n      headerAlign: \"center\",\n      headerFormatter: () => (\n        <>\n          n<sub>v</sub>\n          <br />\n          <span style={{ fontWeight: \"normal\" }}>\n            <i>[ren/h]</i>{\" \"}\n          </span>\n        </>\n      ),\n    },\n    {\n      dataField: \"z\",\n      text: \"z\",\n      align: \"center\",\n      formatter: Float2DigitsFmt,\n      headerTitle: () => \"Cota de la planta, en m\",\n      headerClasses: \"text-light bg-secondary\",\n      headerAlign: \"center\",\n      headerFormatter: () => (\n        <>\n          z\n          <br />\n          <span style={{ fontWeight: \"normal\" }}>\n            <i>[m]</i>{\" \"}\n          </span>\n        </>\n      ),\n    },\n    {\n      dataField: \"exposed_perimeter\",\n      text: \"Permetro expuesto\",\n      align: \"center\",\n      formatter: Float2DigitsFmt,\n      headerTitle: () =>\n        \"Permetro del espacio expuesto al exterior, en m. Excluye la que lo separa de otros espacios acondicionados. Es relevante en el caso de espacios en contacto con el terreno.\",\n      headerClasses: \"text-light bg-secondary\",\n      headerAlign: \"center\",\n      headerFormatter: () => (\n        <>\n          p<sub>ext</sub>\n          <br />\n          <span style={{ fontWeight: \"normal\" }}>\n            <i>[m]</i>{\" \"}\n          </span>\n        </>\n      ),\n    },\n  ];\n\n  return (\n    <BootstrapTable\n      data={appstate.spaces}\n      keyField=\"id\"\n      striped\n      hover\n      bordered={false}\n      cellEdit={cellEditFactory({\n        mode: \"dbclick\",\n        blurToSave: true,\n        afterSaveCell: (oldValue, newValue, row, column) => {\n          if (\n            (column.dataField === \"n_v\" && newValue === undefined) ||\n            (column.dataField === \"type\" && newValue !== \"UNINHABITED\")\n          ) {\n            // Corrige el valor de n_v de undefined a null\n            // o cambia a null cuando no son espacios no habitables\n            row.n_v = null;\n          } else if (\n            ![\"name\", \"inside_tenv\", \"type\"].includes(column.dataField)\n          ) {\n            // Convierte a nmero salvo en el caso del nombre o de inside_tenv\n            row[column.dataField] = getFloatOrOld(newValue, oldValue);\n          }\n        },\n      })}\n      selectRow={{\n        mode: \"checkbox\",\n        clickToSelect: true,\n        clickToEdit: true,\n        selected: selected,\n        onSelect: (row, isSelected) => {\n          if (isSelected) {\n            setSelected([...selected, row.id]);\n          } else {\n            setSelected(selected.filter((it) => it !== row.id));\n          }\n        },\n        hideSelectColumn: true,\n        bgColor: \"lightgray\",\n      }}\n      rowClasses={(row, _rowIndex) => {\n        // clase para elementos fuera de la ET\n        return row.inside_tenv ? null : \"outsidetenv\";\n      }}\n      columns={columns}\n    />\n  );\n};\n\nexport default observer(SpacesTable);\n// export default observer(()=> <p>Prueba</p>)\n","/* -*- coding: utf-8 -*-\n\nCopyright (c) 2016-2021 Rafael Villar Burke <pachi@rvburke.com>\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n*/\n\nimport React, { useState, useContext } from \"react\";\nimport { Col, Row } from \"react-bootstrap\";\nimport { observer } from \"mobx-react-lite\";\n\nimport AppState from \"../../stores/AppState\";\n\nimport AddRemoveButtonGroup from \"./AddRemoveButtonGroup\";\nimport SpacesTable from \"./SpacesTable\";\n\n// Vista de espacios del edificio\nconst SpacesView = observer(() => {\n  const appstate = useContext(AppState);\n  const [selected, setSelected] = useState([]);\n\n  return (\n    <Col>\n      <Row>\n        <Col>\n          <h4>\n            Espacios del edificio{\" \"}\n            <small className=\"text-muted\">({appstate.spaces.length})</small>\n          </h4>\n        </Col>\n        <Col md=\"auto\">\n          <AddRemoveButtonGroup\n            elements=\"spaces\"\n            newobj=\"newSpace\"\n            selected={selected}\n            setSelected={setSelected}\n          />\n        </Col>\n      </Row>\n      <Row>\n        <Col>\n          <SpacesTable selected={selected} setSelected={setSelected} />\n        </Col>\n      </Row>\n      <Row className=\"text-info small mt-3\">\n        <Col>\n          <p>\n            <b>NOTA:</b>Se marcan en color ms claro aquellos elementos que no\n            pertenecen a la ET.\n          </p>\n        </Col>\n      </Row>\n    </Col>\n  );\n});\n\nexport default SpacesView;\n","/* -*- coding: utf-8 -*-\n\nCopyright (c) 2016-2021 Rafael Villar Burke <pachi@rvburke.com>\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n*/\n\nimport React, { useContext } from \"react\";\nimport BootstrapTable from \"react-bootstrap-table-next\";\nimport cellEditFactory from \"react-bootstrap-table2-editor\";\n\nimport { observer } from \"mobx-react-lite\";\n\nimport AppState from \"../../stores/AppState\";\nimport { Float2DigitsFmt, getFloatOrOld } from \"./TableHelpers\";\n\n// Tabla de opacos del edificio\nconst WallConsTable = ({ selected, setSelected }) => {\n  const appstate = useContext(AppState);\n  const walls_Co100 = appstate.he1_indicators.n50_data.walls_c.toFixed(2);\n  const columns = [\n    { dataField: \"id\", isKey: true, hidden: true },\n    {\n      dataField: \"name\",\n      text: \"Nombre\",\n      width: \"30%\",\n      headerTitle: () =>\n        \"Nombre que identifica de forma nica la construccin de opaco\",\n      headerClasses: \"text-light bg-secondary\",\n      title: (_cell, row) => `Construccin de opaco id: ${row.id}`,\n    },\n    {\n      dataField: \"group\",\n      text: \"Grupo\",\n      align: \"center\",\n      headerTitle: (_col, _colIndex) =>\n        \"Grupo de soluciones al que pertenece la construccin (solo a efectos de clasificacin)\",\n      headerClasses: \"text-light bg-secondary\",\n      headerAlign: \"center\",\n    },\n    {\n      dataField: \"thickness\",\n      text: \"Grosor\",\n      align: \"center\",\n      formatter: Float2DigitsFmt,\n      headerTitle: () => \"Grosor el elemento (m)\",\n      headerClasses: \"text-light bg-secondary\",\n      headerAlign: \"center\",\n      headerFormatter: () => (\n        <>\n          e<br />\n          <span style={{ fontWeight: \"normal\" }}>\n            <i>[m]</i>{\" \"}\n          </span>\n        </>\n      ),\n    },\n    {\n      dataField: \"R_intrinsic\",\n      text: \"Resistencia intrnseca\",\n      align: \"center\",\n      formatter: Float2DigitsFmt,\n      headerTitle: () =>\n        \"Resistencia intrnseca de la solucin constructiva (solo capas, sin resistencias superficiales) (mK/W)\",\n      headerClasses: \"text-light bg-secondary\",\n      headerAlign: \"center\",\n      headerFormatter: () => (\n        <>\n          R<sub>e</sub>\n          <br />\n          <span style={{ fontWeight: \"normal\" }}>\n            <i>[mK/W]</i>{\" \"}\n          </span>\n        </>\n      ),\n    },\n    {\n      dataField: \"absorptance\",\n      text: \"Absortividad\",\n      align: \"center\",\n      formatter: Float2DigitsFmt,\n      headerTitle: () => \"Absortividad trmica de la solucin constructiva (-)\",\n      headerClasses: \"text-light bg-secondary\",\n      headerAlign: \"center\",\n      headerFormatter: () => (\n        <>\n          &alpha;\n          <br />\n          <span style={{ fontWeight: \"normal\" }}>\n            <i>[-]</i>{\" \"}\n          </span>\n        </>\n      ),\n    },\n    {\n      dataField: \"C_o\",\n      isDummyField: true,\n      text: \"C_o\",\n      editable: false,\n      align: \"center\",\n      classes: \"td-column-readonly\",\n      formatter: () => walls_Co100,\n      formatExtraData: walls_Co100,\n      headerTitle: () =>\n        \"Coeficiente de caudal de aire de la parte opaca de la envolvente trmica (a 100 Pa). Vara segn n50 de ensayo o tipo de edificio (nuevo / existente)\",\n      headerClasses: \"text-light bg-secondary\",\n      headerAlign: \"center\",\n      headerFormatter: () => (\n        <>\n          C<sub>o</sub>\n          <br />\n          <span style={{ fontWeight: \"normal\" }}>\n            [m<sup>3</sup>/hm<sup>2</sup>]\n          </span>\n        </>\n      ),\n    },\n  ];\n\n  return (\n    <BootstrapTable\n      data={appstate.wallcons}\n      keyField=\"id\"\n      striped\n      hover\n      bordered={false}\n      cellEdit={cellEditFactory({\n        mode: \"dbclick\",\n        blurToSave: true,\n        afterSaveCell: (oldValue, newValue, row, column) => {\n          // Convierte a nmero campos numricos\n          if (\n            [\"thickness\", \"R_intrinsic\", \"absorptance\"].includes(\n              column.dataField\n            )\n          ) {\n            row[column.dataField] = getFloatOrOld(newValue, oldValue);\n          }\n        },\n      })}\n      selectRow={{\n        mode: \"checkbox\",\n        clickToSelect: true,\n        clickToEdit: true,\n        selected: selected,\n        onSelect: (row, isSelected) => {\n          if (isSelected) {\n            setSelected([...selected, row.id]);\n          } else {\n            setSelected(selected.filter((it) => it !== row.id));\n          }\n        },\n        hideSelectColumn: true,\n        bgColor: \"lightgray\",\n      }}\n      columns={columns}\n    />\n  );\n};\n\nexport default observer(WallConsTable);\n","/* -*- coding: utf-8 -*-\n\nCopyright (c) 2016-2021 Rafael Villar Burke <pachi@rvburke.com>\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n*/\n\nimport React, { useState, useContext } from \"react\";\nimport { Col, Row } from \"react-bootstrap\";\nimport { observer } from \"mobx-react-lite\";\n\nimport AppState from \"../../stores/AppState\";\n\nimport AddRemoveButtonGroup from \"./AddRemoveButtonGroup\";\nimport WallConsTable from \"./WallConsTable\";\n\n// Vista de construcciones de opacos del edificio\nconst WallConsView = observer(() => {\n  const appstate = useContext(AppState);\n  const [selected, setSelected] = useState([]);\n\n  return (\n    <Col>\n      <Row>\n        <Col>\n          <h4>\n            Construcciones de Opacos{\" \"}\n            <small className=\"text-muted\">({appstate.wallcons.length})</small>\n          </h4>\n        </Col>\n        <Col md=\"auto\">\n          <AddRemoveButtonGroup\n            elements=\"wallcons\"\n            newobj=\"newWallCons\"\n            selected={selected}\n            setSelected={setSelected}\n          />\n        </Col>\n      </Row>\n      <Row>\n        <Col>\n          <WallConsTable selected={selected} setSelected={setSelected} />\n        </Col>\n      </Row>\n      <Row className=\"text-info small mt-3\">\n        <Col>\n          <p>Donde:</p>\n          <ul>\n            <li>\n              <b>Grupo</b>: grupo de clasificacin de las construcciones de\n              opacos\n            </li>\n            <li>\n              <b>e</b>: grosor total del conjunto de capas de la construccin\n            </li>\n            <li>\n              <b>\n                R<sub>e</sub>\n              </b>\n              : resistencia intrnseca (sin resistencias superficiales, solo de\n              las capas) del elemento (mK/W)\n            </li>\n            <li>\n              <b>&alpha;</b>: absortividad trmica de la construccin [-]\n            </li>\n            <li>\n              <b>\n                C<sub>o;100</sub>\n              </b>\n              : coeficiente de permeabilidad de opacos a 100Pa. Depende del tipo\n              de edificio (nuevo / existente) y de si existe ensayo de\n              permeabildad, n<sub>50</sub> (Blower-door) [m/hm]\n            </li>\n          </ul>\n        </Col>\n      </Row>\n    </Col>\n  );\n});\n\nexport default WallConsView;\n","/* -*- coding: utf-8 -*-\n\nCopyright (c) 2016-2021 Rafael Villar Burke <pachi@rvburke.com>\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n*/\n\nimport React, { useContext } from \"react\";\nimport BootstrapTable from \"react-bootstrap-table-next\";\nimport cellEditFactory from \"react-bootstrap-table2-editor\";\n\nimport { observer } from \"mobx-react-lite\";\n\nimport AppState from \"../../stores/AppState\";\nimport { Float2DigitsFmt, getFloatOrOld } from \"./TableHelpers\";\n\n\n// Tabla de construcciones de huecos del edificio\nconst WinConsTable = ({ selected, setSelected }) => {\n  const appstate = useContext(AppState);\n  const columns = [\n    { dataField: \"id\", isKey: true, hidden: true },\n    {\n      dataField: \"name\",\n      text: \"Nombre\",\n      width: \"30%\",\n      headerTitle: () =>\n        \"Nombre que identifica de forma nica la construccin de hueco\",\n      headerClasses: \"text-light bg-secondary\",\n      title: (_cell, row) => `Construccin de hueco id: ${row.id}`,\n    },\n    {\n      dataField: \"group\",\n      text: \"Grupo\",\n      align: \"center\",\n      headerTitle: (_col, _colIndex) =>\n        \"Grupo de soluciones al que pertenece la construccin (solo a efectos de clasificacin)\",\n      headerClasses: \"text-light bg-secondary\",\n      headerAlign: \"center\",\n    },\n    {\n        dataField: \"U\",\n        text: \"U_w\",\n        align: \"center\",\n        formatter: Float2DigitsFmt,\n        headerTitle: () => \"Transmitancia trmica del hueco (W/mK)\",\n        headerClasses: \"text-light bg-secondary\",\n        headerAlign: \"center\",\n        headerFormatter: () => (\n          <>\n        U<sub>w</sub>\n        <br />\n        <span style={{ fontWeight: \"normal\" }}>\n          <i>[W/mK]</i>{\" \"}\n        </span></>)\n      },\n      {\n        dataField: \"Ff\",\n        text: \"F_f\",\n        align: \"center\",\n        formatter: Float2DigitsFmt,\n        headerTitle: () => \"Fraccin de marco de la construccin de hueco (-)\",\n        headerClasses: \"text-light bg-secondary\",\n        headerAlign: \"center\",\n        headerFormatter: () => (\n          <>\n        F<sub>f</sub>\n        <br />\n        <span style={{ fontWeight: \"normal\" }}>\n          <i>[-]</i>{\" \"}\n        </span></>)\n      },\n      {\n        dataField: \"gglwi\",\n        text: \"g_gl;wi\",\n        align: \"center\",\n        formatter: Float2DigitsFmt,\n        headerTitle: () => \"Factor solar del hueco sin la proteccin solar activada (g_glwi = g_gln * 0.90) (-)\",\n        headerClasses: \"text-light bg-secondary\",\n        headerAlign: \"center\",\n        headerFormatter: () => (\n          <>\n        g<sub>gl;wi</sub>\n        <br />\n        <span style={{ fontWeight: \"normal\" }}>\n          <i>[-]</i>{\" \"}\n        </span></>)\n      },\n      {\n        dataField: \"gglshwi\",\n        text: \"g_gl;sh;wi\",\n        align: \"center\",\n        formatter: Float2DigitsFmt,\n        headerTitle: () => \"Factor solar del hueco con la proteccin solar activada (g_glwi = g_gln * 0.90) (-)\",\n        headerClasses: \"text-light bg-secondary\",\n        headerAlign: \"center\",\n        headerFormatter: () => (\n          <>\n        g<sub>gl;sh;wi</sub>\n        <br />\n        <span style={{ fontWeight: \"normal\" }}>\n          <i>[-]</i>{\" \"}\n        </span></>)\n      },\n      {\n        dataField: \"C_100\",\n        text: \"C_100\",\n        align: \"center\",\n        formatter: Float2DigitsFmt,\n        headerTitle: () => \"Permeabilidad al aire a 100 Pa (m/hm)\",\n        headerClasses: \"text-light bg-secondary\",\n        headerAlign: \"center\",\n        headerFormatter: () => (\n          <>\n        C<sub>h;100</sub>\n        <br />\n        <span style={{ fontWeight: \"normal\" }}>\n          <i>[m/hm]</i>{\" \"}\n        </span></>)\n      },\n  ];\n\n  return (\n    <BootstrapTable\n      data={appstate.wincons}\n      keyField=\"id\"\n      striped\n      hover\n      bordered={false}\n      cellEdit={cellEditFactory({\n        mode: \"dbclick\",\n        blurToSave: true,\n        afterSaveCell: (oldValue, newValue, row, column) => {\n          if ([\"U\", \"Ff\", \"gglwi\", \"gglshwi\", \"C_100\"].includes(column.dataField)) {\n            row[column.dataField] = getFloatOrOld(newValue, oldValue);\n          }\n        },\n      })}\n      selectRow={{\n        mode: \"checkbox\",\n        clickToSelect: true,\n        clickToEdit: true,\n        selected: selected,\n        onSelect: (row, isSelected) => {\n          if (isSelected) {\n            setSelected([...selected, row.id]);\n          } else {\n            setSelected(selected.filter((it) => it !== row.id));\n          }\n        },\n        hideSelectColumn: true,\n        bgColor: \"lightgray\",\n      }}\n      columns = {columns}\n    />\n  );\n};\n\nexport default observer(WinConsTable);\n","/* -*- coding: utf-8 -*-\n\nCopyright (c) 2016-2021 Rafael Villar Burke <pachi@rvburke.com>\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n*/\n\nimport React, { useState, useContext } from \"react\";\nimport { Col, Row } from \"react-bootstrap\";\nimport { observer } from \"mobx-react-lite\";\n\nimport AppState from \"../../stores/AppState\";\n\nimport AddRemoveButtonGroup from \"./AddRemoveButtonGroup\";\nimport WinConsTable from \"./WinConsTable\";\n\n// Vista de construcciones de huecos del edificio\nconst WinConsView = () => {\n  const appstate = useContext(AppState);\n  const [selected, setSelected] = useState([]);\n\n  return (\n    <Col>\n      <Row>\n        <Col>\n          <h4>\n            Construcciones de Huecos{\" \"}\n            <small className=\"text-muted\">({appstate.wincons.length})</small>\n          </h4>\n        </Col>\n        <Col md=\"auto\">\n          <AddRemoveButtonGroup\n            elements=\"wincons\"\n            newobj=\"newWinCons\"\n            selected={selected}\n            setSelected={setSelected}\n          />\n        </Col>\n      </Row>\n      <Row>\n        <Col>\n          <WinConsTable selected={selected} setSelected={setSelected} />\n        </Col>\n      </Row>\n      <Row className=\"text-info small mt-3\">\n        <Col>\n          <p>Donde:</p>\n          <ul>\n            <li>\n              <b>Grupo</b>: grupo de clasificacin de las construcciones de\n              opacos\n            </li>\n            <li>\n              <b>U</b>: Transmitancia trmica del hueco (W/mK)\n            </li>\n            <li>\n              <b>\n                F<sub>f</sub>\n              </b>\n              : fraccin de marco (-)\n            </li>\n            <li>\n              <b>\n                g<sub>gl;wi</sub>\n              </b>\n              : factor solar del hueco sin la proteccin solar activada (g_glwi\n              = g_gln * 0.90) (-)\n            </li>\n            <li>\n              <b>\n                g<sub>gl;sh;wi</sub>\n              </b>\n              : factor solar del hueco con la proteccin solar activada (-)\n            </li>\n            <li>\n              <b>\n                C<sub>h;100</sub>\n              </b>\n              : Coeficiente de permeabilidad al aire del hueco a 100 Pa de\n              diferencia de presin (m/hm). La clase de permeabilidad al aire\n              de los huecos, segn la norma UNE EN 12207:2000 es: Clase 1: C\n              <sub>w;100</sub> &le; 50m3/hm2, Clase 2: C<sub>w;100</sub> &le; 27\n              m/hm, Clase 3: C<sub>w;100</sub> &le; 9 m/hm, Clase 4: C\n              <sub>w;100</sub> &le; 3 m/hm.\n            </li>\n          </ul>\n        </Col>\n      </Row>\n    </Col>\n  );\n};\n\nexport default observer(WinConsView);\n","/* -*- coding: utf-8 -*-\n\nCopyright (c) 2016-2021 Rafael Villar Burke <pachi@rvburke.com>\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n*/\n\nimport React from \"react\";\nimport { Col, Container, Row, Tabs, Tab } from \"react-bootstrap\";\nimport { observer } from \"mobx-react-lite\";\n// import DevTools from 'mobx-react-devtools';\n\nimport Footer from \"./Footer\";\nimport HuecosView from \"./building/HuecosView\";\nimport IndicatorsPanel from \"./building/IndicatorsPanel\";\nimport MetaParams from \"./building/MetaParams\";\nimport NavBar from \"./Nav\";\nimport OpacosView from \"./building/OpacosView\";\nimport PTsView from \"./building/PTsView\";\nimport ShadesView from \"./building/ShadesView\";\nimport SpacesView from \"./building/SpacesView\";\nimport WallConsView from \"./building/WallConsView\";\nimport WinConsView from \"./building/WinConsView\";\n\nconst BuildingPage = ({ route, activeKey, setActiveKey }) => {\n  return (\n    <Container fluid>\n      <NavBar route={route} />\n      <Row>\n        <Col>\n          <IndicatorsPanel />\n        </Col>\n      </Row>\n      <Row>\n        <Col>\n          <Tabs\n            activeKey={activeKey}\n            onSelect={setActiveKey}\n            id=\"building_element_tabs\"\n          >\n            <Tab eventKey=\"spaces\" title=\"Espacios\" className=\"pt-3\">\n              <SpacesView />\n            </Tab>\n            <Tab eventKey=\"walls\" title=\"Opacos\" className=\"pt-3\">\n              <OpacosView />\n            </Tab>\n            <Tab eventKey=\"windows\" title=\"Huecos\" className=\"pt-3\">\n              <HuecosView />\n            </Tab>\n            <Tab eventKey=\"shadows\" title=\"Sombras\" className=\"pt-3\">\n              <ShadesView />\n            </Tab>\n            <Tab\n              eventKey=\"thermal_bridges\"\n              title=\"Puentes Trmicos\"\n              className=\"pt-3\"\n            >\n              <PTsView />\n            </Tab>\n            <Tab eventKey=\"wallcons\" title=\"Constr. opacos\" className=\"pt-3\">\n              <WallConsView />\n            </Tab>\n            <Tab eventKey=\"windowcons\" title=\"Constr. huecos\" className=\"pt-3\">\n              <WinConsView />\n            </Tab>\n            <Tab eventKey=\"metadata\" title=\"Datos generales\" className=\"pt-3\">\n              <MetaParams />\n            </Tab>\n          </Tabs>\n        </Col>\n      </Row>\n      {/* {<DevTools position={{ bottom: 0, right: 20 }} />} */}\n      <Footer />\n    </Container>\n  );\n};\n\nexport default observer(BuildingPage);\n","import { DoubleSide, LineBasicMaterial, MeshLambertMaterial } from \"three\";\n\n// Material genrico de lneas\nexport const material_generic_lines = new LineBasicMaterial({\n  name: \"generic_lines\",\n  color: 0x0000ff,\n  linewidth: 1,\n});\n\n// Material de bordes\nexport const material_lines = new LineBasicMaterial({\n  name: \"lines\",\n  color: 0x444444,\n  linewidth: 1,\n});\n// Material doble cara - azul\nexport const material_select = new MeshLambertMaterial({\n  name: \"select\",\n  color: 0xff4444,\n  side: DoubleSide,\n});\n// Sombras - violeta claro\nexport const material_shades = new MeshLambertMaterial({\n  name: \"shades\",\n  color: 0xa496ad,\n  side: DoubleSide,\n  transparent: true,\n  opacity: 1.0,\n});\n// Ventanas azul claro\nexport const material_windows = new MeshLambertMaterial({\n  name: \"windows\",\n  color: 0xade1ec,\n  side: DoubleSide,\n  transparent: true,\n  opacity: 0.5,\n});\n// Elementos adiabticos gris\nexport const material_adiabatic = new MeshLambertMaterial({\n  name: \"adiabatic\",\n  color: 0x777777,\n  side: DoubleSide,\n  transparent: true,\n  opacity: 1.0,\n});\n// Paredes ocre\nexport const material_walls = new MeshLambertMaterial({\n  name: \"walls\",\n  color: 0xeecf74,\n  side: DoubleSide,\n  transparent: true,\n  opacity: 1.0,\n});\n// Paredes terreno ocre oscuro\nexport const material_walls_ground = new MeshLambertMaterial({\n  name: \"walls_ground\",\n  color: 0xac8554,\n  side: DoubleSide,\n  transparent: true,\n  opacity: 1.0,\n});\n// Techos rojizo\nexport const material_roofs = new MeshLambertMaterial({\n  name: \"roofs\",\n  color: 0x7e3e3f,\n  side: DoubleSide,\n  transparent: true,\n  opacity: 1.0,\n});\n// Techos terreno rojizo oscuro\nexport const material_roofs_ground = new MeshLambertMaterial({\n  name: \"roofs_ground\",\n  color: 0x4f2d2d,\n  side: DoubleSide,\n  transparent: true,\n  opacity: 1.0,\n});\n// Suelos rosado claro\nexport const material_floors = new MeshLambertMaterial({\n  name: \"floors\",\n  color: 0xa97ac7,\n  side: DoubleSide,\n  transparent: true,\n  opacity: 1.0,\n});\n// Suelos terreno morado oscuro\nexport const material_floors_ground = new MeshLambertMaterial({\n  name: \"floors_ground\",\n  color: 0x673669,\n  side: DoubleSide,\n  transparent: true,\n  opacity: 1.0,\n});\n\n// Elige material en funcin del tipo de objeto\n//\n// Ahora mismo el material depende del tipo de elemento (Muro, cubierta, suelo, Window) y sus condiciones de contorno (ADIABATIC vs GROUND)\n//\n// TODO: Admitir ms modos de representacin:\n// - matizar la seleccin actual para elementos con condiciones de contorno INTERIOR\n// - en funcin de si el elemento pertenece o no a la envolvente trmica\n// - en funcin de la U del elemento\nexport function chooseMaterial(obj) {\n  const { type, bounds, subtype } = obj.userData;\n  let material;\n  if (type === \"Wall\") {\n    if (bounds === \"ADIABATIC\") {\n      material = material_adiabatic;\n    } else if (subtype === \"FLOOR\") {\n      if (bounds === \"GROUND\") {\n        material = material_floors_ground;\n      } else {\n        material = material_floors;\n      }\n    } else if (subtype === \"ROOF\") {\n      if (bounds === \"GROUND\") {\n        material = material_roofs_ground;\n      } else {\n        material = material_roofs;\n      }\n    } else {\n      if (bounds === \"GROUND\") {\n        material = material_walls_ground;\n      } else {\n        material = material_walls;\n      }\n    }\n  } else if (type === \"Window\") {\n    material = material_windows;\n  } else {\n    console.log(\n      `Elemento ${obj.name} (${obj.userData.type}), asignando material de seleccin por defecto`\n    );\n    material = material_select;\n  }\n  return material;\n}\n","import {\n  EdgesGeometry,\n  Group,\n  LineSegments,\n  MathUtils,\n  Matrix3,\n  Matrix4,\n  Mesh,\n  Shape,\n  ShapeGeometry,\n  Vector2,\n  Vector3,\n} from \"three\";\nimport {\n  chooseMaterial,\n  material_lines,\n  material_shades,\n} from \"./ctematerials.js\";\n\nconst { degToRad } = MathUtils;\n\n// Genera geometra del modelo\n//\n// El modelo maneja dos espacios de coordenadas, el global y el local de muro\n// Adems, los ejes del modelo son en X,Y (inclinacin, azimuth)\n// pero en ThreeJS usamos X,-Z\n// ThreeJS: ejes X rojo, Y verde, Z azul\n/* eslint-disable no-undefined */\nexport function initObjectsFromModel(model, scene) {\n  let buildingGroup;\n  const bGroup = scene.getObjectByName(\"BuildingGroup\");\n  if (bGroup) {\n    bGroup.remove(...bGroup.children);\n    buildingGroup = bGroup;\n  } else {\n    buildingGroup = new Group();\n    buildingGroup.name = \"BuildingGroup\";\n  }\n  buildingGroup.rotation.x = -Math.PI / 2;\n\n  let wireframeGroup;\n  const wfGroup = scene.getObjectByName(\"WireframeGroup\");\n  if (wfGroup) {\n    wfGroup.remove(...wfGroup.children);\n    wireframeGroup = wfGroup;\n  } else {\n    wireframeGroup = new Group();\n    wireframeGroup.name = \"WireframeGroup\";\n  }\n  wireframeGroup.rotation.x = -Math.PI / 2;\n\n  for (const wall of model.walls) {\n    const { geometry } = wall;\n    const { tilt, azimuth, position, polygon } = geometry;\n    // Detecta muros sin definicin geomtrica completa\n    if (!position || !polygon || tilt === undefined || azimuth === undefined) {\n      continue;\n    }\n\n    const wallSubtype = getWallSubtype(wall); // FLOOR | ROOF | WALL\n    const wallBounds = wall.bounds; // ADIABATIC | GROUND | EXTERIOR | INTERIOR\n    const wallData = {\n      id: wall.id,\n      name: wall.name,\n      type: \"Wall\",\n      bounds: wallBounds,\n      subtype: wallSubtype,\n    };\n\n    // Conversin a coordenadas globales\n    const wallTransform = transformMatrix(tilt, azimuth, position);\n    // Conversin de coordenadas locales de muro a coordenadas de polgono de muro\n    const wallLocal2WallPolyTransform = wallLocal2WallPolygon(polygon);\n\n    // Muro\n    const wallShape = new Shape(polygon.map((p) => new Vector2(p[0], p[1])));\n    const wallWindows = model.windows.filter((w) => w.wall === wall.id);\n\n    for (const window of wallWindows) {\n      if (\n        !window.geometry.position ||\n        window.geometry.height * window.geometry.width === 0\n      ) {\n        continue;\n      }\n\n      const winShape = windowShape(window, wallLocal2WallPolyTransform);\n      const winMesh = meshFromShape(winShape, wallTransform);\n      winMesh.name = window.name;\n      winMesh.userData = {\n        id: window.id,\n        name: window.name,\n        type: \"Window\",\n        bounds: wallBounds,\n        subtype: wallSubtype,\n        parent: wall.name,\n        parentId: wall.id,\n      };\n      winMesh.material = chooseMaterial(winMesh);\n      // Aplica retranqueo de huecos\n      const winNormal = buffergeometryNormal(winMesh.geometry).clone();\n      const winSetback = winNormal.multiplyScalar(-window.geometry.setback);\n      winMesh.geometry.translate(...winSetback.toArray());\n\n      // Aadir al grupo\n      buildingGroup.add(winMesh);\n      // Aadir como hueco al muro\n      wallShape.holes.push(winShape);\n    }\n\n    const wallMesh = meshFromShape(wallShape, wallTransform);\n    wallMesh.name = wall.name;\n    wallMesh.userData = wallData;\n    wallMesh.material = chooseMaterial(wallMesh);\n\n    buildingGroup.add(wallMesh);\n\n    // Aade wireframe\n    const wireframe = new LineSegments(\n      new EdgesGeometry(wallMesh.geometry),\n      material_lines\n    );\n    wireframe.renderOrder = 1; // wireframes en segundo lugar\n    wireframeGroup.add(wireframe);\n  }\n\n  // Sombras\n  const shades = model.shades || [];\n  for (let shade of shades) {\n    const { tilt, azimuth, position, polygon } = shade.geometry;\n    // Detecta sombras sin definicin geomtrica completa\n    if (!position || !polygon || tilt === undefined || azimuth === undefined) {\n      continue;\n    }\n    const shadeTransform = transformMatrix(tilt, azimuth, position);\n    const points = polygon.map((p) => new Vector2(p[0], p[1]));\n    // Lista vaca de puntos - No hay polgono definido\n    if (points.length < 3) {\n      continue;\n    }\n    const shadeShape = new Shape(points);\n    const shadeMesh = meshFromShape(shadeShape, shadeTransform);\n    shadeMesh.name = shade.name;\n    shadeMesh.material = material_shades;\n    shadeMesh.userData = {\n      id: shade.id,\n      name: shade.name,\n      type: \"Shade\",\n    };\n    buildingGroup.add(shadeMesh);\n  }\n\n  // Aade elementos a la escena\n  scene.add(buildingGroup);\n  scene.add(wireframeGroup);\n}\n\n// Genera Mesh desde Shape, asignando capacidad de recibir y generar sombras y generando normales\nfunction meshFromShape(shape, transform) {\n  const winGeom = new ShapeGeometry(shape).applyMatrix4(transform);\n  winGeom.computeVertexNormals();\n  const winMesh = new Mesh(winGeom);\n  winMesh.receiveShadow = true;\n  winMesh.castShadow = true;\n  return winMesh;\n}\n\n// Normal del vrtice idx de un buffergeometry\n//\n// Genera un Vector3 para el BufferAttribute 'normal' del elemento idx\nfunction buffergeometryNormal(geometry, idx = 0) {\n  const vA = geometry.index.getX(idx);\n  const normalAttr = geometry.getAttribute(\"normal\");\n  const normal = new Vector3().fromBufferAttribute(normalAttr, vA);\n  return normal;\n}\n\n// Generar el Shape de un hueco a partir de los datos de posicin, ancho y alto\n// Los datos de hueco estn en coordenadas locales de muro y se transforman en\n// coordenadas de polgono de muro\n// La posicin se refiere a la esquina inferior izquierda.\nfunction windowShape(window, wallLocal2WallPolyTransform) {\n  const {\n    position: [x, y],\n    width,\n    height,\n  } = window.geometry;\n  // Generamos el hueco transformando las coordenadas a ejes locales de muro\n  const coords = [\n    new Vector2(x, y),\n    new Vector2(x + width, y),\n    new Vector2(x + width, y + height),\n    new Vector2(x, y + height),\n  ].map((x) => x.applyMatrix3(wallLocal2WallPolyTransform));\n  return new Shape().setFromPoints(coords);\n}\n\n// Matriz de transformacin de coordenadas locales de muro a coordenadas de su polgono 2D\n// Nos sirve para pasar de las coordenadas locales del muro a las coordenadas del polgono de muro en 2D\n// Se gira el eje X en la direccin del polgono de muro p1 - p0 y se traslada a p0 el origen\nfunction wallLocal2WallPolygon(wall_polygon) {\n  const v0 = wall_polygon[0];\n  const v1 = wall_polygon[1];\n  const dirX = new Vector2(v1[0] - v0[0], v1[1] - v0[1]);\n  const angleX = dirX.angle();\n  const c = Math.cos(angleX);\n  const s = Math.sin(angleX);\n  return new Matrix3().set(c, -s, v0[0], s, c, v0[1], 0, 0, 1);\n}\n\n// Matriz de transformacin de los elementos del edificio\n// Traslada de coordenadas de muros a coordenadas globales (giros y desplazamientos)\n// y lleva del sistema de coordenadas X, Y al sistema X, -Z\nfunction transformMatrix(tilt, azimuth, position) {\n  const [x, y, z] = position;\n  // Aplicamos la inclinacin del muro\n  const mtilt = new Matrix4().makeRotationX(degToRad(tilt));\n  // Aplicamos el azimuth del muro\n  const mazim = new Matrix4().makeRotationZ(degToRad(azimuth));\n  // Aplicamos la traslacin en coordenadas globales\n  const mtran = new Matrix4().makeTranslation(x, y, z);\n\n  return mtran.multiply(mazim).multiply(mtilt);\n}\n\n// Devuelve subtipo de muro segn inclinacin: ROOF | FLOOR | WALL\nfunction getWallSubtype(wall) {\n  if (Math.abs(Math.abs(wall.geometry.tilt) - 180) < 1e-3) {\n    return \"FLOOR\";\n  } else if (Math.abs(wall.geometry.tilt) < 1e-3) {\n    return \"ROOF\";\n  }\n\n  return \"WALL\";\n}\n","import {Pane} from \"tweakpane\";\nimport { MeshLambertMaterial, DoubleSide } from \"three\";\n\n// Material doble cara - azul\nconst material_select = new MeshLambertMaterial({\n  color: 0xff4444,\n  side: DoubleSide,\n});\n\nexport default class GUIView {\n  constructor(scene, containerRef) {\n    this.scene = scene;\n\n    this.params = {\n      inspectMode: false,\n      opacity: 1.0,\n      selectedElementName: \"\",\n      showExteriorRoofs: true,\n      showExteriorWalls: true,\n      showExteriorFloors: true,\n      showExteriorWindows: true,\n      showInteriorWalls: true,\n      showGroundWalls: true,\n      showAdiabaticWalls: true,\n      showShades: true,\n    };\n    this.lastSelected = null;\n\n    this.initPane(containerRef.current);\n    this.pane.hidden = false;\n  }\n\n  dispose() {\n    this.pane.dispose();\n  }\n\n  initPane(container) {\n    this.pane = new Pane({\n      title: \"Visor EnvolventeCTE\",\n      expanded: false,\n      container,\n    });\n\n    // Apartado de inspeccin\n    const folder = this.pane.addFolder({ title: \"Inspeccin de elementos\" });\n    // TODO: modo de renderizado (transmitancia, condiciones de contorno)\n    // folder.addInput(this, 'renderSelected', { label: 'render', options: this.renderOptions }).on('change', this.onRenderChange.bind(this));\n    folder.addInput(this.params, \"inspectMode\", {\n      label: \"Modo de inspeccin\",\n    });\n    folder\n      .addInput(this.params, \"selectedElementName\", {\n        label: \"Resalta elemento\",\n      })\n      .on(\"change\", this.onselectedElementChange.bind(this));\n\n    // Apartado de visualizacin\n    const folder2 = this.pane.addFolder({\n      title: \"Visualizacin\",\n    });\n\n    folder2\n      .addInput(this.params, \"opacity\", {\n        label: \"Opacidad\",\n        min: 0.0,\n        max: 1.0,\n        step: 0.1,\n      })\n      .on(\"change\", this.onOpacityChange.bind(this));\n\n    folder2\n      .addInput(this.params, \"showExteriorRoofs\", {\n        label: \"Cubiertas exteriores\",\n      })\n      .on(\"change\", this.onVisibilityChange.bind(this));\n\n    folder2\n      .addInput(this.params, \"showExteriorWalls\", {\n        label: \"Muros exteriores\",\n      })\n      .on(\"change\", this.onVisibilityChange.bind(this));\n\n    folder2\n      .addInput(this.params, \"showExteriorFloors\", {\n        label: \"Suelos exteriores\",\n      })\n      .on(\"change\", this.onVisibilityChange.bind(this));\n\n    folder2\n      .addInput(this.params, \"showExteriorWindows\", {\n        label: \"Huecos exteriores\",\n      })\n      .on(\"change\", this.onVisibilityChange.bind(this));\n\n    folder2\n      .addInput(this.params, \"showInteriorWalls\", {\n        label: \"Elementos interiores\",\n      })\n      .on(\"change\", this.onVisibilityChange.bind(this));\n\n    folder2\n      .addInput(this.params, \"showGroundWalls\", {\n        label: \"Elementos terreno\",\n      })\n      .on(\"change\", this.onVisibilityChange.bind(this));\n\n    folder2\n      .addInput(this.params, \"showAdiabaticWalls\", {\n        label: \"Elementos Adiabticos\",\n      })\n      .on(\"change\", this.onVisibilityChange.bind(this));\n\n    folder2\n      .addInput(this.params, \"showShades\", {\n        label: \"Sombras\",\n      })\n      .on(\"change\", this.onVisibilityChange.bind(this));\n  }\n\n  toggle() {\n    if (!this.pane.hidden) {\n      this.pane.hidden = true;\n    } else {\n      this.pane.hidden = false;\n    }\n  }\n\n  onOpacityChange(event) {\n    const buildingObjects = this.scene.getObjectByName(\"BuildingGroup\");\n    buildingObjects.traverse((child) => {\n      if (child.material && child.userData.type !== \"Window\") {\n        child.material.opacity = event.value;\n      }\n    });\n  }\n\n  onselectedElementChange(event) {\n    // Limpia ltima seleccin\n    if (this.lastSelected) {\n      this.lastSelected.material = this.lastSelected.userData.oldMaterial;\n    }\n    // Selecciona nuevo elemento\n    const element = this.scene\n      .getObjectByName(\"BuildingGroup\")\n      .getObjectByName(event.value);\n    if (element) {\n      this.lastSelected = element;\n      this.lastSelected.userData.oldMaterial = element.material;\n      element.material = material_select;\n    }\n  }\n\n  onVisibilityChange(event) {\n    // \"showExteriorFloors\",\"showExteriorWindows\",\"showInteriorWalls\",\"showGroundWalls\",\"showAdiabaticWalls\",\"showShades\",\n    const key = event.presetKey;\n    let selector;\n    if (key === \"showExteriorRoofs\") {\n      selector = (bounds, type, subtype) =>\n        bounds === \"EXTERIOR\" && type === \"Wall\" && subtype === \"ROOF\";\n    } else if (key === \"showExteriorWalls\") {\n      selector = (bounds, type, subtype) =>\n        bounds === \"EXTERIOR\" && type === \"Wall\" && subtype === \"WALL\";\n    } else if (key === \"showExteriorFloors\") {\n      selector = (bounds, type, subtype) =>\n        bounds === \"EXTERIOR\" && type === \"Wall\" && subtype === \"FLOOR\";\n    } else if (key === \"showExteriorWindows\") {\n      selector = (bounds, type, _subtype) =>\n        bounds === \"EXTERIOR\" && type === \"Window\";\n    } else if (key === \"showInteriorWalls\") {\n      selector = (bounds, _type, _subtype) => bounds === \"INTERIOR\";\n    } else if (key === \"showGroundWalls\") {\n      selector = (bounds, _type, _subtype) => bounds === \"GROUND\";\n    } else if (key === \"showAdiabaticWalls\") {\n      selector = (bounds, _type, _subtype) => bounds === \"ADIABATIC\";\n    } else if (key === \"showShades\") {\n      selector = (_bounds, type, _subtype) => type === \"Shade\";\n    } else {\n      return;\n    }\n    const buildingObjects = this.scene.getObjectByName(\"BuildingGroup\");\n    buildingObjects.traverse((child) => {\n      const {\n        userData: { bounds, type, subtype },\n      } = child;\n      if (selector(bounds, type, subtype)) {\n        child.visible = event.value;\n      }\n    });\n  }\n}\n","import React, { useContext, useRef, useEffect } from \"react\";\nimport { observer } from \"mobx-react-lite\";\nimport { autorun } from \"mobx\";\n\nimport * as THREE from \"three\";\nimport {\n  AmbientLight,\n  AxesHelper,\n  // CameraHelper,\n  DirectionalLight,\n  DirectionalLightHelper,\n  GridHelper,\n  Group,\n  Mesh,\n  PerspectiveCamera,\n  PlaneGeometry,\n  Raycaster,\n  Scene,\n  ShadowMaterial,\n  Shape,\n  ShapeGeometry,\n  Vector3,\n  WebGLRenderer,\n} from \"three\";\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\n\nimport { initObjectsFromModel } from \"./ctemodel.js\";\nimport GUIView from \"./gui/GUIView\";\nimport AppState from \"../../stores/AppState\";\n\nconst style = {\n  display: \"flex\",\n  flexFlow: \"row\",\n  height: \"60vh\",\n};\n\nconst ThreeView = () => {\n  const appstate = useContext(AppState);\n  const mountRef = useRef(null);\n  const guiPaneRef = useRef(null);\n\n  const model = {\n    walls: appstate.walls,\n    windows: appstate.windows,\n    shades: appstate.shades,\n  };\n\n  // Incializa ThreeJS\n  const scene = new Scene();\n  const renderer = new WebGLRenderer({\n    antialias: true,\n    alpha: true,\n  });\n  renderer.setPixelRatio(window.devicePixelRatio);\n  renderer.shadowMap.enabled = true;\n  renderer.physicallyCorrectLights = true;\n  // Cmara\n  const camera = new PerspectiveCamera(\n    50,\n    window.innerWidth / window.innerHeight,\n    0.1,\n    1000\n  );\n  camera.position.set(10, 30, 50);\n  camera.lookAt(new Vector3(0, 0, 0));\n\n  // Controles\n  const cameraControl = useRef();\n\n  // Introduce suelo y luces\n  initGround(scene);\n  initLights(scene);\n\n  useEffect(() => {\n    const ref = mountRef.current;\n\n    // Incializa cmara\n    camera.aspect = ref.clientWidth / ref.clientHeight;\n\n    // Renderer\n    renderer.setSize(ref.clientWidth, ref.clientHeight, false);\n\n    // Controles\n    const control = new OrbitControls(camera, ref);\n    control.enableDamping = true;\n    control.enabled = true;\n    control.update();\n    cameraControl.current = control;\n\n    // Panel de control\n    const gui = new GUIView(scene, guiPaneRef);\n\n    // Monta elemento en el DOM\n    ref.appendChild(renderer.domElement);\n\n    // Conecta eventos del panel de control\n    mountRef.current.addEventListener(\"keydown\", (e) =>\n      onKeyDown(e, gui, control)\n    );\n    mountRef.current.addEventListener(\"pointerdown\", (e) =>\n      onPointerDown(e, mountRef, scene, camera, gui)\n    );\n\n    // Bucle de animacin\n    const animate = () => {\n      if (control) control.update();\n      resizeToDisplaySize(renderer, camera);\n      renderer.render(scene, camera);\n      return window.requestAnimationFrame(animate);\n    };\n\n    const requestID = animate();\n\n    // Desmonta al eliminar el componente\n    return () => {\n      window.cancelAnimationFrame(requestID);\n      if (control) control.dispose();\n      if (gui) gui.dispose();\n      ref.removeChild(renderer.domElement);\n    };\n  }, [scene, camera, renderer]);\n\n  useEffect(\n    () =>\n      autorun(() => {\n        const control = cameraControl.current;\n        initObjectsFromModel(model, scene);\n        updateCamera(scene, camera, control);\n        updateGround(scene);\n      }),\n    [model, scene, camera]\n  );\n\n  return (\n    <div style={{ position: \"relative\" }}>\n      <div\n        style={{ position: \"absolute\", top: 0, left: 0, width: \"25%\" }}\n        ref={guiPaneRef}\n      />\n      {/* Tabindex es necesario para recibir eventos de teclado en un div */}\n      <div style={style} ref={mountRef} tabIndex={-1} />\n    </div>\n  );\n};\n\n// Materiales para smbolo de norte y plano del suelo\nconst northSymbolCircleMaterial = new THREE.MeshLambertMaterial({\n  color: 0x884444,\n  side: THREE.DoubleSide,\n  transparent: true,\n  opacity: 0.5,\n});\n\nconst northSymbolArrowMaterial = new THREE.MeshLambertMaterial({\n  color: 0x333333,\n  side: THREE.DoubleSide,\n});\n\nconst groundPlaneMaterial = new ShadowMaterial({\n  color: 0x6c6c6c,\n  opacity: 0.75,\n});\n\n// Crea smbolo de norte\nconst createNorthSymbol = (x, y) => {\n  const radius = 1;\n  const symbolGroup = new Group();\n  symbolGroup.name = \"NorthSymbol\";\n\n  const circle = new Mesh(\n    new THREE.CircleGeometry(radius, 64),\n    northSymbolCircleMaterial\n  );\n  symbolGroup.add(circle);\n\n  const arrowShape = new Shape();\n  arrowShape.moveTo(radius, 0);\n  arrowShape.lineTo(0, radius);\n  arrowShape.lineTo(-radius, 0);\n  arrowShape.closePath();\n\n  const arrow = new Mesh(\n    new ShapeGeometry(arrowShape),\n    northSymbolArrowMaterial\n  );\n  arrow.position.set(0, 0, 0.05);\n  symbolGroup.add(arrow);\n\n  symbolGroup.rotation.x = -Math.PI / 2;\n  symbolGroup.position.set(x - 1, 0, y + 1);\n\n  return symbolGroup;\n};\n\n// Genera elemento de suelo y rejilla\n//\n// ThreeJS: ejes X rojo, Y verde, Z azul\nconst initGround = (scene) => {\n  const groundGroup = new Group();\n  groundGroup.name = \"GroundGroup\";\n\n  // Suelo de soporte transparente\n  const ground = new Mesh(new PlaneGeometry(200, 200), groundPlaneMaterial);\n  ground.name = \"World_Ground\";\n  ground.rotation.x = -Math.PI / 2;\n  ground.position.y = -0.01;\n  ground.receiveShadow = true;\n  groundGroup.add(ground);\n\n  // Grid helper con 40 divisiones de 1m\n  const gridHelper = new GridHelper(40, 40, 0x0000ff, 0x808080);\n  gridHelper.name = \"GridHelper\";\n  gridHelper.position.set(0, 0, 0);\n  // @ts-ignore\n  gridHelper.material.setValues({ opacity: 0.25, transparent: true });\n  groundGroup.add(gridHelper);\n\n  // Axes helper\n  groundGroup.add(new AxesHelper(10)); // X rojo, Y verde, Z azul\n\n  // Smbolo de norte\n  groundGroup.add(createNorthSymbol(0, 0));\n\n  // Aade elementos a la escena\n  scene.add(groundGroup);\n};\n\n// Actualiza elemento de suelo en funcin del tamao del modelo cargado\nconst updateGround = (scene) => {\n  const buildingGroup = scene.getObjectByName(\"BuildingGroup\");\n  const groundGroup = scene.getObjectByName(\"GroundGroup\");\n  const bbox = new THREE.Box3().setFromObject(buildingGroup);\n  const size = new THREE.Vector3();\n  const center = new THREE.Vector3();\n  bbox.getSize(size);\n  bbox.getCenter(center);\n  const maxSize = Math.max(size.x, size.z);\n\n  // Suelo de soporte transparente\n  const ground = new Mesh(\n    new PlaneGeometry(2.5 * size.x, 2.5 * size.z),\n    groundPlaneMaterial\n  );\n  ground.name = \"World_Ground\";\n  ground.rotation.x = -Math.PI / 2;\n  ground.position.y = -0.01;\n  ground.receiveShadow = true;\n\n  groundGroup.remove(scene.getObjectByName(\"World_Ground\"));\n  groundGroup.add(ground);\n\n  // Grid helper\n  const gridHelper = new GridHelper(\n    maxSize + 2,\n    maxSize + 2,\n    0x0000ff,\n    0x808080\n  );\n  gridHelper.name = \"GridHelper\";\n  gridHelper.position.set(Math.round(center.x), 0, Math.round(center.z));\n  // @ts-ignore\n  gridHelper.material.setValues({ opacity: 0.25, transparent: true });\n\n  groundGroup.remove(scene.getObjectByName(\"GridHelper\"));\n  groundGroup.add(gridHelper);\n\n  groundGroup.remove(scene.getObjectByName(\"NorthSymbol\"));\n  groundGroup.add(createNorthSymbol(bbox.min.x, bbox.max.z));\n};\n\n// Posicin solar para un azimuth y altura solar dados\n// - azimuth (S=0, E=90, W=-90)\n// - altura solar (Horiz=0, vert=90), en grados\n// Usa una posicin con distancia = 100m\n// Coordenadas altura solar es sistema levgiro y con Y=arriba, X=Este, Z=Sur\nconst sunPos = (azimuth, altitude, dist=100) => {\n  const azim = azimuth * Math.PI / 180;\n  const alt = altitude * Math.PI / 180;\n  return new Vector3(Math.cos(alt) * Math.sin(azim), Math.sin(alt), Math.cos(alt) * Math.cos(azim)).multiplyScalar(dist);\n};\n\nconst initLights = (scene) => {\n  const group = new Group();\n  group.name = \"LightsGroup\";\n\n  // Luz ambiente\n  const light_amb = new AmbientLight(0xffffff, 0.6);\n  group.add(light_amb);\n\n  // Luz direccional. Ajustamos el tamao para que cubra la escena\n  // y ajustamos el punto de clculo de sombras para evitar aliasing\n  const light = new DirectionalLight(0xffffff, 1);\n  light.name = \"Sun\";\n  light.shadow.normalBias = 0.05;\n  light.shadow.bias = -0.00025;\n  const d = 50;\n  light.shadow.camera.left = -d;\n  light.shadow.camera.right = d;\n  light.shadow.camera.top = d;\n  light.shadow.camera.bottom = -d;\n  light.shadow.camera.far = 300; // Default 2000\n  light.shadow.mapSize.width = 512 * 4; // Default 512\n  light.shadow.mapSize.height = 512 * 4;\n  light.position.copy(sunPos(19.5, 68.8));\n  light.castShadow = true;\n  group.add(light);\n  // Helpers for shadow camera and directional light\n  // scene.add(new CameraHelper(light.shadow.camera));\n  group.add(new DirectionalLightHelper(light, 1, \"red\"));\n\n  scene.add(group);\n};\n\nconst updateCamera = (scene, camera, control) => {\n  const obj = scene.getObjectByName(\"BuildingGroup\");\n  const bbox = new THREE.Box3().setFromObject(obj);\n  const size = bbox.getSize(new THREE.Vector3());\n  const center = bbox.getCenter(new THREE.Vector3());\n  const maxSize = Math.max(size.x, size.z);\n\n  // Mira hacia el edificio\n  const target = new Vector3(0, 0, 0);\n  if (obj) {\n    new THREE.Box3().setFromObject(obj).getCenter(target);\n  }\n  camera.lookAt(target);\n\n  // Ajusta distancia para ajustarse a la pantalla\n  const fitOffset = 1.2;\n  const fitHeightDistance =\n    maxSize / (2 * Math.atan((Math.PI * camera.fov) / 360));\n  const fitWidthDistance = fitHeightDistance / camera.aspect;\n  const distance = fitOffset * Math.max(fitHeightDistance, fitWidthDistance);\n\n  const direction = control.target\n    .clone()\n    .sub(camera.position)\n    .normalize()\n    .multiplyScalar(distance);\n  control.maxDistance = distance * 10;\n  control.target.copy(center);\n\n  camera.near = distance / 100;\n  camera.far = distance * 100;\n  camera.updateProjectionMatrix();\n\n  // Copia la posicin del control\n  camera.position.copy(control.target).sub(direction);\n\n  // Actualiza cmara y control\n  control.update();\n\n  // Coloca luces desde el centro del edificio\n  const lights = scene.getObjectByName(\"LightsGroup\");\n  lights.position.x = center.x / 2;\n  lights.position.y = center.y / 2;\n  lights.position.z = center.z / 2;\n};\n\nconst resizeToDisplaySize = (renderer, camera) => {\n  const canvas = renderer.domElement;\n  const width = canvas.clientWidth;\n  const height = canvas.clientHeight;\n  if (canvas.width !== width || canvas.height !== height) {\n    renderer.setSize(width, height, false);\n    camera.aspect = width / height;\n    camera.updateProjectionMatrix();\n  }\n};\n\n// Gestiona entradas de teclado:\n// CTRL + ALT + g / p - oculta panel\n// CTRL + ALT + h - resitua cmara en su posicin original\n// CTRL + ALT + i - Activa / desactiva modo de inspeccin de objetos\n// Para poder conectar este manejador en un elemento div es necesario fijar la\n// propiedad tabIndex=-1 (para que el elemento se site fuera del flujo de foco de entrada)\n// Ver https://webaim.org/techniques/keyboard/tabindex\nconst onKeyDown = (e, gui, control) => {\n  // CTRL + ALT + g || CTRL + ALT + p\n  if (e.ctrlKey && e.altKey && (e.code === \"KeyG\" || e.code === \"KeyP\")) {\n    if (gui) gui.toggle();\n  }\n  // CTRL + ALT + h\n  if (e.ctrlKey && e.altKey && e.code === \"KeyH\") {\n    if (control) control.reset();\n  }\n  // CTRL + ALT + i\n  if (e.ctrlKey && e.altKey && e.code === \"KeyI\") {\n    if (gui) {\n      gui.params.inspectMode = !gui.params.inspectMode;\n      gui.pane.refresh();\n    }\n  }\n};\n\n// Muestra, en modo de inspeccin, una lista con los objetos bajo la localizacin del puntero\nconst onPointerDown = (e, ref, scene, camera, gui) => {\n  const currentRef = ref.current;\n  if (!gui || gui.params.inspectMode === false || !currentRef) return;\n  // Rectngulo del elemento\n  const rect = currentRef.getBoundingClientRect();\n  // Coordenadas dentro del elemento X: [0, rect.width], Y: [0, rect.height]\n  const xCoord = e.clientX - rect.left;\n  const yCoord = e.clientY - rect.top;\n  // Coordenadas X: [-1, 1], Y: [-1, 1]\n  const posX = (xCoord / rect.width) * 2 - 1;\n  const posY = -(yCoord / rect.height) * 2 + 1;\n  // Genera intersecciones, obteniendo lista de objetos de ms prximo a ms lejano\n  const pointer3D = new Vector3(posX, posY, 0.5);\n  const raycaster = new Raycaster();\n  raycaster.setFromCamera(pointer3D, camera);\n  const intersects = raycaster.intersectObjects(\n    scene.getObjectByName(\"BuildingGroup\").children\n  );\n\n  // Actualiza elemento de la interfaz\n  const el = getTextElement(document);\n  if (intersects.length > 0) {\n    const objectNames = intersects.map((v) => v.object.name);\n    setTextData(gui, el, e.clientX, e.clientY, objectNames);\n  } else {\n    setTextData(gui, el, e.clientX, e.clientY, []);\n  }\n};\n\n// Genera lista de elementos bajo el puntero y traslada a panel\nconst setTextData = (gui, el, x, y, data) => {\n  el.innerHTML = \"\";\n  if (data.length) {\n    // const ul = document.createElement(\"ul\");\n    for (let name of data) {\n      const li = document.createElement(\"li\");\n      li.style.listStyle = \"none\";\n      li.style.padding = \"3px 5px 3px 15px\";\n      li.innerHTML = name;\n      li.onmouseover = (e) => {\n        e.stopPropagation();\n        const selected = e.target;\n        // @ts-ignore\n        selected.style.background = \"#D4A017\";\n        // @ts-ignore\n        gui.onselectedElementChange({ value: selected.textContent });\n      };\n      li.onmouseleave = (e) => {\n        // @ts-ignore\n        e.target.style.background = \"none\";\n        gui.onselectedElementChange({\n          value: gui.params.selectedElementName,\n        });\n      };\n      li.onpointerdown = (e) => {\n        e.stopPropagation();\n        let selectedElement = \"\";\n        // Solo seleccionamos con pulsacin del botn izquierdo\n        if (e.buttons === 1) {\n          // @ts-ignore\n          selectedElement = e.target.textContent;\n        }\n        gui.params.selectedElementName = selectedElement;\n        gui.pane.refresh();\n      };\n      el.appendChild(li);\n    }\n  }\n  el.style.left = x + \"px\";\n  el.style.top = y + \"px\";\n};\n\n// Devuelve o genera el elemento de texto en la interfaz\nfunction getTextElement(document) {\n  const el = document.getElementById(\"inspect_dom_element\");\n  if (el) {\n    return el;\n  }\n  const ll = document.createElement(\"ul\");\n  ll.id = \"inspect_dom_element\";\n  ll.style.margin = \"0\";\n  ll.style.padding = \"0\";\n  ll.style.position = \"absolute\";\n  ll.style.color = \"black\";\n  ll.style.background = \"#ffffffAA\";\n  ll.style.font = \"13px Arial, Verdana, sans-serif\";\n  ll.style.zIndex = \"100\";\n  ll.style.display = \"block\";\n  document.body.appendChild(ll);\n  return ll;\n}\n\nexport default observer(ThreeView);\n","/* -*- coding: utf-8 -*-\n\nCopyright (c) 2016-2021 Rafael Villar Burke <pachi@rvburke.com>\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n*/\n\nimport React from \"react\";\nimport { Col, Container, Row } from \"react-bootstrap\";\n// import DevTools from 'mobx-react-devtools';\n\nimport Footer from \"./Footer\";\nimport IndicatorsPanel from \"./building/IndicatorsPanel\";\nimport NavBar from \"./Nav\";\nimport ThreeView from \"./three/ThreeView\";\n\nconst ThreeDPage = ({ route }) => {\n  return (\n    <Container fluid>\n      <NavBar route={route} />\n      <Row>\n        <Col>\n          <IndicatorsPanel />\n        </Col>\n      </Row>\n      <Row>\n        <Col>\n          <ThreeView />\n        </Col>\n      </Row>\n      {/* {<DevTools position={{ bottom: 0, right: 20 }} />} */}\n      <Footer />\n    </Container>\n  );\n};\n\nexport default ThreeDPage;\n","/* -*- coding: utf-8 -*-\n\nCopyright (c) 2016-2021 Rafael Villar Burke <pachi@rvburke.com>\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n*/\n\nimport React from \"react\";\nimport { Col, Row } from \"react-bootstrap\";\n\nimport { OrientaIcon } from \"./IconsOrientaciones\";\n\n// Tabla de irradiacin acumulada mensual en el mes de julio\nconst JulyRadiationTable = ({ data }) => (\n  <Col>\n    <Row>\n      <Col>\n        <h4>\n          Irradiacin solar (acumulada) en el mes de julio{\" \"}\n          <i>\n            H<sub>sol;jul</sub>\n          </i>{\" \"}\n          (kWh/m/mes)\n        </h4>\n      </Col>\n    </Row>\n    <Row>\n      <Col>\n        <table\n          id=\"julyradiationtable\"\n          className=\"table table-striped table-bordered table-condensed\"\n        >\n          <thead>\n            <tr>\n              <th className=\"col-md-1\">kWh/m/mes</th>\n              {data.map((d, i) => (\n                <th key={\"hr\" + i}>\n                  {d.orientation} <OrientaIcon dir={d.orientation} />\n                </th>\n              ))}\n            </tr>\n          </thead>\n          <tbody>\n            <tr>\n              <td>\n                <b className=\"pull-left\">{data[0].zone}</b>\n              </td>\n              {data.map((d, i) => (\n                <td key={\"tot_\" + i}>{(d.dir[6] + d.dif[6]).toFixed(2)}</td>\n              ))}\n            </tr>\n          </tbody>\n        </table>\n      </Col>\n    </Row>\n    <Row>\n      <Col>\n        <p className=\"text-info\">\n          Los valores de por la tabla anterior se utilizan en el clculo del\n          parmetro de control solar (\n          <b>\n            q<sub>sol;jul</sub>\n          </b>\n          ).\n        </p>\n      </Col>\n    </Row>\n  </Col>\n);\n\nexport default JulyRadiationTable;\n","/* -*- coding: utf-8 -*-\n\nCopyright (c) 2016-2021 Rafael Villar Burke <pachi@rvburke.com>\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n*/\n\nimport React, { useState } from \"react\";\nimport { Col, Form, Row } from \"react-bootstrap\";\n\nimport { OrientaIcon } from \"./IconsOrientaciones\";\n\nconst MESES = \"ENE,FEB,MAR,ABR,MAY,JUN,JUL,AGO,SET,OCT,NOV,DIC\".split(\",\");\n\n// Tabla de irradiacin mensual acumulada para distintas superficies orientadas e inclinadas\nconst MonthlyRadiationTable = ({ data }) => {\n  const [showDetail, setShowDetail] = useState(false);\n  return (\n    <Col>\n      <Row>\n        <Col>\n          <h4>Irradiacin solar (acumulada) mensual (kWh/m/mes)</h4>\n        </Col>\n      </Row>\n      <Row>\n        <Col>\n          <Form inline>\n            <Form.Check\n              checked={showDetail}\n              onChange={(_e) => setShowDetail(!showDetail)}\n              label=\"Mostrar detalle de irradiacin directa y difusa?\"\n            />\n          </Form>\n        </Col>\n      </Row>\n      <Row style={{ marginTop: \"2em\" }}>\n        <Col>\n          <table\n            id=\"radiationtable\"\n            className=\"table table-striped table-bordered table-condensed\"\n          >\n            <thead>\n              <tr style={{ borderBottom: \"3px solid darkgray\" }}>\n                <th className=\"col-md-1\">Superficie</th>\n                <th className=\"col-md-1\">Irradiacin</th>\n                {MESES.map((m) => (\n                  <th key={m}>{m}</th>\n                ))}\n              </tr>\n            </thead>\n            <tbody>\n              {data.map((d, idx) => {\n                return (\n                  <React.Fragment key={idx}>\n                    <tr\n                      key={\"tot_\" + d.orientation}\n                      style={\n                        showDetail\n                          ? {\n                              fontWeight: \"bold\",\n                              borderTop: \"3px solid darkgray\",\n                            }\n                          : null\n                      }\n                    >\n                      <td rowSpan={showDetail ? \"3\" : null}>\n                        <b className=\"pull-left\">{d.orientation}</b>\n                        <OrientaIcon dir={d.orientation} />\n                      </td>\n                      <td>Dir. + Dif.</td>\n                      {d.dir.map((v, i) => (\n                        <td key={\"tot_\" + i}>{(v + d.dif[i]).toFixed(2)}</td>\n                      ))}\n                    </tr>\n                    {showDetail ? (\n                      <tr key={\"dir_\" + d.orientation}>\n                        <td>Dir.</td>\n                        {d.dir.map((v, i) => (\n                          <td key={\"dir_\" + i}>{v.toFixed(2)}</td>\n                        ))}\n                      </tr>\n                    ) : null}\n                    {showDetail ? (\n                      <tr key={\"dif_\" + d.orientation}>\n                        <td>Dif.</td>\n                        {d.dif.map((v, i) => (\n                          <td key={\"dif_\" + i}>{v.toFixed(2)}</td>\n                        ))}\n                      </tr>\n                    ) : null}\n                  </React.Fragment>\n                );\n              })}\n            </tbody>\n          </table>\n        </Col>\n      </Row>\n      <Row>\n        <Col>\n          <p className=\"text-info\">\n            La tabla anterior recoge la radiacin mensual acumulada para una\n            superficie horizontal y superficies verticales con la orientacin\n            indicada.\n          </p>\n        </Col>\n      </Row>\n    </Col>\n  );\n};\n\nexport default MonthlyRadiationTable;\n","/* -*- coding: utf-8 -*-\n\nCopyright (c) 2016-2021 Rafael Villar Burke <pachi@rvburke.com>\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n*/\n\nimport React from \"react\";\n\n// Optimizador en https://jakearchibald.github.io/svgomg/\nconst FshwithSprite = () => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" display=\"none\">\n    <defs>\n      <g id=\"hueco\" opacity=\".8\">\n        <rect\n          id=\"marcoext\"\n          height=\"98\"\n          stroke=\"#000\"\n          strokeWidth=\"1\"\n          fill=\"#fff\"\n          width=\"74\"\n          y=\".5\"\n          x=\".5\"\n        />\n        <rect\n          id=\"marcoint\"\n          height=\"84\"\n          stroke=\"#000\"\n          strokeWidth=\"1\"\n          fill=\"#4d4d8d\"\n          width=\"59\"\n          y=\"7.5\"\n          x=\"7.5\"\n        />\n        <path\n          id=\"personaje\"\n          d=\"m12 92c0.0033-6.5 1-15 4.4-19 2.7-4 9.3-10 15-10-2.6-1.4-4.3-7.8-4.2-14-0.32-5.5 1.5-14 11-14 8.7 0.022 9.8 8.8 9.5 14 0.24 5.8-2.9 12-5.1 13 8.1 1 13 7.9 15 12 2.5 5.7 4 12 3.8 19\"\n          fillRule=\"evenodd\"\n          fill=\"#ccc\"\n        />\n      </g>\n      <rect\n        id=\"cortina\"\n        height=\"21\"\n        stroke=\"#000\"\n        fill=\"#f2f2f2\"\n        width=\"59\"\n        opacity=\".8\"\n        y=\"7.5\"\n        x=\"7.5\"\n      />\n      <symbol id=\"ventana1\" viewBox=\"0 0 75 100\">\n        <use xlinkHref=\"#hueco\" />\n      </symbol>\n      <symbol id=\"ventana2\" viewBox=\"0 0 75 100\">\n        <use xlinkHref=\"#hueco\" />\n        <use xlinkHref=\"#cortina\" />\n      </symbol>\n      <symbol id=\"ventana3\" viewBox=\"0 0 75 100\">\n        <use xlinkHref=\"#hueco\" />\n        <use xlinkHref=\"#cortina\" />\n        <use xlinkHref=\"#cortina\" y=\"21\" />\n      </symbol>\n      <symbol id=\"ventana4\" viewBox=\"0 0 75 100\">\n        <use xlinkHref=\"#hueco\" />\n        <use xlinkHref=\"#cortina\" />\n        <use xlinkHref=\"#cortina\" y=\"21\" />\n        <use xlinkHref=\"#cortina\" y=\"42\" />\n      </symbol>\n      <symbol id=\"ventana5\" viewBox=\"0 0 75 100\">\n        <use xlinkHref=\"#hueco\" />\n        <use xlinkHref=\"#cortina\" />\n        <use xlinkHref=\"#cortina\" y=\"21\" />\n        <use xlinkHref=\"#cortina\" y=\"42\" />\n        <use xlinkHref=\"#cortina\" y=\"63\" />\n      </symbol>\n    </defs>\n  </svg>\n);\n\nconst FshwithIcon = ({ fsh, width = \"1.2em\", height = \"1.6em\" }) => {\n  let name;\n  if (fsh < 0.2) {\n    name = \"ventana1\";\n  } else if (fsh < 0.4) {\n    name = \"ventana2\";\n  } else if (fsh < 0.6) {\n    name = \"ventana3\";\n  } else if (fsh < 0.8) {\n    name = \"ventana4\";\n  } else {\n    name = \"ventana5\";\n  }\n  return (\n    <svg width={width} height={height} style={{ verticalAlign: \"middle\" }}>\n      <use xlinkHref={`#${name}`} />\n    </svg>\n  );\n};\n\nexport { FshwithSprite, FshwithIcon };\n","/* -*- coding: utf-8 -*-\n\nCopyright (c) 2016-2021 Rafael Villar Burke <pachi@rvburke.com>\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n*/\n\nimport React, { useState } from \"react\";\nimport { Col, Form, Row } from \"react-bootstrap\";\n\nimport { OrientaIcon } from \"./IconsOrientaciones\";\nimport { FshwithIcon } from \"./IconsFshwith\";\n\nconst LEVELS = [\"200\", \"300\", \"500\"];\nconst MESES = \"ENE,FEB,MAR,ABR,MAY,JUN,JUL,AGO,SET,OCT,NOV,DIC\".split(\",\");\nconst DAYS = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\n\nconst selectedMonths = (start, end) => {\n  const startIdx = MESES.indexOf(start);\n  const endIdx = MESES.indexOf(end);\n  // console.log(MESES.slice(startIdx, endIdx + 1));\n  return [startIdx, endIdx];\n};\n\n// Tabla de factores de reduccin para dispositivos solares mviles\n//\n// Para usar los iconos, OrientacionesSprite y FshwithSprite deben estar instanciados en la pgina\n// en la que se incruste la tabla.\n// import { OrientacionesSprite } from \"./IconsOrientaciones\"; -> <OrientacionesSprite/>\n// import { FshwithSprite } from \"./IconsFshwith\"; -> <FshwithSprite/>\nconst ShadingFactorsTable = ({ data }) => {\n  const [showlevel, setShowlevel] = useState(\"500\");\n  const [startMonth, setStartMonth] = useState(\"JUN\");\n  const [endMonth, setEndMonth] = useState(\"SET\");\n  const [selStart, selEnd] = selectedMonths(startMonth, endMonth);\n\n  const meanVals = data.map((d) => {\n    const vals = d[`f_shwith${showlevel}`].slice(selStart, selEnd + 1);\n    const days = DAYS.slice(selStart, selEnd + 1);\n    return (\n      vals\n        .map((val, idx) => [val, days[idx]])\n        .map(([val, days]) => val * days)\n        .reduce((sum, x) => sum + x) / days.reduce((sum, x) => sum + x)\n    );\n  });\n\n  return (\n    <Col>\n      <Row>\n        <Col>\n          <h4>\n            Factores mensuales de reduccin para sombreamientos solares mviles\n          </h4>\n        </Col>\n      </Row>\n      <Form>\n        <Form.Group as={Row} controlId=\"formControlsIrradiationLevel\">\n          <Form.Label column md={6}>\n            Nivel de irradiacin de activacin / desactivacin del sombreamiento\n            solar mvil (W/m):\n          </Form.Label>\n          <Col>\n            <Form.Control\n              value={showlevel}\n              onChange={(e) => setShowlevel(e.target.value)}\n              as=\"select\"\n              placeholder=\"select\"\n            >\n              {LEVELS.map((z) => (\n                <option value={z} key={\"f_shwith\" + z}>\n                  {z}\n                </option>\n              ))}\n            </Form.Control>\n          </Col>\n        </Form.Group>\n      </Form>\n      <Row>\n        <Col>\n          <p>Activacin de elementos de sombra estacionales:</p>\n        </Col>\n      </Row>\n      <Form>\n        <Form.Group as={Row} controlId=\"formControlsSummerMonths\">\n          <Form.Label column md={6}>\n            Mes de inicio:\n          </Form.Label>\n          <Col>\n            <Form.Control\n              value={startMonth}\n              onChange={(e) => setStartMonth(e.target.value)}\n              as=\"select\"\n              placeholder=\"select\"\n            >\n              {MESES.map((z) => (\n                <option value={z} key={\"start_month_\" + z}>\n                  {z}\n                </option>\n              ))}\n            </Form.Control>\n          </Col>\n        </Form.Group>\n        <Form.Group as={Row} controlId=\"formControlsSummerMonths\">\n          <Form.Label column md={6}>\n            Mes de finalizacin:\n          </Form.Label>\n          <Col>\n            <Form.Control\n              value={endMonth}\n              onChange={(e) => setEndMonth(e.target.value)}\n              as=\"select\"\n              placeholder=\"select\"\n            >\n              {MESES.map((z) => (\n                <option value={z} key={\"end_month_\" + z}>\n                  {z}\n                </option>\n              ))}\n            </Form.Control>\n          </Col>\n        </Form.Group>\n      </Form>\n      <Row style={{ marginTop: \"2em\" }}>\n        <Col>\n          <table\n            id=\"shadingfactorstable\"\n            className=\"table table-striped table-bordered table-condensed\"\n          >\n            <thead>\n              <tr style={{ borderBottom: \"3px solid darkgray\" }}>\n                <th className=\"col-md-1\">Superficie</th>\n                <th className=\"col-md-1\">\n                  f<sub>sh;with</sub>\n                </th>\n                {MESES.map((m) => (\n                  <th key={m}>{m}</th>\n                ))}\n                <th>\n                  Media\n                  <br />\n                  estacional\n                </th>\n              </tr>\n            </thead>\n            <tbody>\n              {data.map((d, surfidx) => {\n                const level = showlevel;\n                return (\n                  <tr key={\"f_shwith200_\" + d.orientation}>\n                    <td>\n                      <b className=\"pull-left\">{d.orientation}</b>\n                      <OrientaIcon dir={d.orientation} />\n                    </td>\n                    <td style={{ textAlign: \"center\" }}>I &gt; {level}</td>\n                    {d[`f_shwith${level}`].map((v, i) => (\n                      <td\n                        key={`fshwith${level}_${i}`}\n                        style={\n                          i >= selStart && i <= selEnd\n                            ? { backgroundColor: \"rgba(0.0, 0.0, 0.0, 0.15)\" }\n                            : null\n                        }\n                      >\n                        {v.toFixed(2)} <FshwithIcon fsh={v} />\n                      </td>\n                    ))}\n                    <td\n                      key={`fshwith_mean_${surfidx}`}\n                      style={{\n                        textAlign: \"center\",\n                        fontWeight: \"bold\",\n                        backgroundColor: \"rgba(0.0, 0.0, 0.0, 0.15)\",\n                      }}\n                    >\n                      {meanVals[surfidx].toFixed(2)}{\" \"}\n                      <FshwithIcon fsh={meanVals[surfidx]} />\n                    </td>\n                  </tr>\n                );\n              })}\n            </tbody>\n          </table>\n        </Col>\n      </Row>\n      <Row>\n        <Col>\n          <div className=\"text-info\">\n            <p>\n              La tabla anterior recoge la fraccin del tiempo (mensual) que el\n              dispositivo de sombra mvil est conectado (se supera el nivel de\n              irradiacin indicado).\n            </p>\n            <p>\n              Estos valores pueden resultar tiles para obtener el factor solar\n              del hueco considerando los dispositivos de sombra mviles (\n              <i>\n                g<sub>gl;sh;wi</sub>\n              </i>\n              ). Para obtener valores estacionales se pueden promediar los\n              valores mensuales correspondientes a la estacin (p.e. verano e\n              invierno).\n            </p>\n            <p>\n              Se puede considerar que el dispositivo est conectado cuando la\n              radiacin (total) incidente supera el valor indicado (\n              <i>\n                I &gt; 200 W/m<sup>2</sup>\n              </i>\n              ,{\" \"}\n              <i>\n                I &gt; 300 W/m<sup>2</sup>\n              </i>\n              ,{\" \"}\n              <i>\n                I &gt; 500 W/m<sup>2</sup>\n              </i>\n              ) y desconectado cuando se encuentra por debajo de ese valor. Es\n              decir, un valor de{\" \"}\n              <i>\n                f<sub>sh;with</sub> = 1\n              </i>{\" \"}\n              significa que el dispositivo de sombra mvil est completamente\n              conectado o activado (p.e. un toldo extendido o una persiana\n              bajada) y un valor de{\" \"}\n              <i>\n                f<sub>sh;with</sub> = 0\n              </i>{\" \"}\n              significa que el dispositivo de sombra mvil est completamente\n              desconectado o desactivado (p.e. un toldo recogido o una persiana\n              subida).\n            </p>\n            <p>\n              Se han calculados los factores de reduccin para los siguientes\n              valores de la irradiacin sobre el hueco, para los que se indican\n              sus usos recomendados:\n            </p>\n            <ul>\n              <li>\n                <i>\n                  I &gt; 300 W/m<sup>2</sup>\n                </i>\n                : dispositivos de sombra con accionamiento y control manual;\n              </li>\n              <li>\n                <i>\n                  I &gt; 200 W/m<sup>2</sup>\n                </i>\n                : dispositivos de sombra con control y accionamiento automtico;\n              </li>\n              <li>\n                <i>\n                  I &gt; 500 W/m<sup>2</sup>\n                </i>\n                : dispositivos de sombra en modo de calefaccin (evita cargas\n                extremas).\n              </li>\n            </ul>\n            <p>\n              NOTA: Debe tenerse en cuenta que los valores de la tabla se han\n              obtenido sin considerar el efecto de los obstculos remotos sobre\n              el hueco.\n            </p>\n          </div>\n        </Col>\n      </Row>\n    </Col>\n  );\n};\n\nexport default ShadingFactorsTable;\n","/* -*- coding: utf-8 -*-\n\nCopyright (c) 2016-2021 Rafael Villar Burke <pachi@rvburke.com>\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n*/\n\nimport React, { useContext } from \"react\";\nimport { Col, Container, Row, Tabs, Tab } from \"react-bootstrap\";\n\nimport { observer } from \"mobx-react-lite\";\n// import DevTools from 'mobx-react-devtools';\n\nimport AppState from \"../stores/AppState\";\n\nimport Footer from \"./Footer\";\nimport JulyRadiationTable from \"./climate/JulyRadiationTable\";\nimport NavBar from \"./Nav\";\nimport MonthlyRadiationTable from \"./climate/MonthlyRadiationTable\";\nimport ShadingFactorsTable from \"./climate/ShadingFactorsTable\";\nimport { OrientacionesSprite } from \"./climate/IconsOrientaciones\";\nimport { FshwithSprite } from \"./climate/IconsFshwith\";\n\nconst ClimatePage = observer(({ route }) => {\n  const appstate = useContext(AppState);\n  return (\n    <Container fluid>\n      <NavBar route={route} />\n      <OrientacionesSprite />\n      <FshwithSprite />\n      <Row>\n        <Col>\n          <Tabs defaultActiveKey={1} id=\"tabla-de-valores-radiacion\">\n            <Tab\n              eventKey={1}\n              title=\"Radiacin acumulada (H_sol;m)\"\n              className=\"pt-3\"\n            >\n              <JulyRadiationTable data={appstate.climatedata} />\n              <MonthlyRadiationTable data={appstate.climatedata} />\n            </Tab>\n            <Tab\n              eventKey={2}\n              title=\"Factores de reduccin por sombras mviles (f_sh;with)\"\n              className=\"pt-3\"\n            >\n              <ShadingFactorsTable data={appstate.climatedata} />\n            </Tab>\n          </Tabs>\n        </Col>\n      </Row>\n      {/* <DevTools position={{ bottom: 0, right: 20 }} /> */}\n      <Footer />\n    </Container>\n  );\n});\n\nexport default ClimatePage;\n","/* -*- coding: utf-8 -*-\n\nCopyright (c) 2018-2021 Rafael Villar Burke <pachi@rvburke.com>\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n */\n\n/* *** Biblioteca de propiedades de los elementos de la envolvente trmica *** */\n\n// Propiedades de los vidrios\n\n// Propiedades tomadas de UNE EN 13363-Apndice A\n// con aadidos calculados segn https://www.onyxsolar.com/es/termica\n\nexport const ELEMENTOS = {\n  huecos: {\n    acristalamientos: {\n      tipos: [\n        // EN 13363-1 Anexo A - tabla A.1\n        { name: \"Vidrio sencillo\", g_gl_n: 0.85, U_gl: 5.7 },\n        { name: \"Vidrio doble\", g_gl_n: 0.75, U_gl: 3.0 },\n        { name: \"Vidrio doble bajoemisivo\", g_gl_n: 0.67, U_gl: 1.6 },\n        { name: \"Triple vidrio\", g_gl_n: 0.7, U_gl: 2.0 },\n        {\n          name: \"Triple vidrio con dos capas de bajoemisivo\",\n          g_gl_n: 0.5,\n          U_gl: 1.25,\n        },\n        { name: \"Doble ventana (vidrio sencillo)\", g_gl_n: 0.75, U_gl: 3.2 },\n      ],\n      propiedades: {\n        F_w: 0.9,\n      },\n    },\n    sombreamientos: {\n      tipos: [\n        { name: \"Ninguno\", type: \"NONE\" },\n        { name: \"Exterior\", type: \"EXT\" },\n        { name: \"Integrado\", type: \"MED\" },\n        { name: \"Interior\", type: \"INT\" },\n      ],\n      propiedades: {\n        transmitancia: [\n          // EN 13363-1 Anexo A - tabla A.2\n          { opacidad: \"Opaco\", tau_e_B: 0.0 },\n          { opacidad: \"Medianamente translcido\", tau_e_B: 0.2 },\n          { opacidad: \"Muy translcido\", tau_e_B: 0.4 },\n        ],\n        reflexion: [\n          // EN 13363-1 Anexo A - tabla A.2\n          { color: \"blanco\", opacidad: \"Opaco\", tau_e_B: 0.0, rho_e_B: 0.7 },\n          {\n            color: \"blanco\",\n            opacidad: \"Medianamente translcido\",\n            tau_e_B: 0.2,\n            rho_e_B: 0.6,\n          },\n          {\n            color: \"blanco\",\n            opacidad: \"Muy translcido\",\n            tau_e_B: 0.4,\n            rho_e_B: 0.4,\n          },\n          { color: \"pastel\", opacidad: \"Opaco\", tau_e_B: 0.0, rho_e_B: 0.5 },\n          {\n            color: \"pastel\",\n            opacidad: \"Medianamente translcido\",\n            tau_e_B: 0.2,\n            rho_e_B: 0.4,\n          },\n          {\n            color: \"pastel\",\n            opacidad: \"Muy translcido\",\n            tau_e_B: 0.4,\n            rho_e_B: 0.3,\n          },\n          { color: \"oscuro\", opacidad: \"Opaco\", tau_e_B: 0.0, rho_e_B: 0.3 },\n          {\n            color: \"oscuro\",\n            opacidad: \"Medianamente translcido\",\n            tau_e_B: 0.2,\n            rho_e_B: 0.2,\n          },\n          {\n            color: \"oscuro\",\n            opacidad: \"Muy translcido\",\n            tau_e_B: 0.4,\n            rho_e_B: 0.2,\n          },\n          { color: \"negro\", opacidad: \"Opaco\", tau_e_B: 0.0, rho_e_B: 0.1 },\n          {\n            color: \"negro\",\n            opacidad: \"Medianamente translcido\",\n            tau_e_B: 0.2,\n            rho_e_B: 0.1,\n          },\n          {\n            color: \"negro\",\n            opacidad: \"Muy translcido\",\n            tau_e_B: 0.4,\n            rho_e_B: 0.1,\n          },\n        ],\n      },\n    },\n  },\n};\n\n// Factor de transmitancia de energa solar total - g_t\n// con proteccin solar exterior - g_t_e\n// con proteccin solar integrada - g_t_m\n// con proteccin solar interior - g_t_i\n// Parmetros:\n// - U_gl: coeficiente de transmitancia de la energa solar total del acristalamiento [W/m2K]\n// - g_gl_n: factor de transmitancia de energa solar a incidencia normal del acristalamiento [-]\n// - tau_e_B: factor de transmitancia solar del dispositivo de proteccin solar [-]\n// - rho_e_B: factor de reflexin solar de la cara del dispositivo de proteccin solar del lado de la radiacin [-]\n\n// Factor de transmitancia de energa solar total con proteccin solar exterior\nexport function g_t_e(U_gl, g_gl_n, tau_e_B, rho_e_B) {\n  const alpha_e_B = 1 - tau_e_B - rho_e_B;\n  const G = 1 / (1 / U_gl + 1 / 5 + 1 / 10); // W/m2K\n  return (\n    tau_e_B * g_gl_n + (alpha_e_B * G) / 10 + (tau_e_B * (1 - g_gl_n) * G) / 5\n  );\n}\n\n// Factor de transmitancia de energa solar total con proteccin solar interior\nexport function g_t_i(U_gl, g_gl_n, tau_e_B, rho_e_B) {\n  const alpha_e_B = 1 - tau_e_B - rho_e_B;\n  const G = 1 / (1 / U_gl + 1 / 30); // W/m2K\n  return g_gl_n * (1 - g_gl_n * rho_e_B - (alpha_e_B * G) / 30);\n}\n\n// Factor de transmitancia de energa solar total con proteccin solar integrado\n// Vlido cuando:\n// - El acristalamiento exterior no est recubierto\n// - El acristalamiento interior est o no recubierto\nexport function g_t_m(U_gl, g_gl_n, tau_e_B, rho_e_B) {\n  const alpha_e_B = 1 - tau_e_B - rho_e_B;\n  const G = 1 / (1 / U_gl + 1 / 3); // W/m2K\n  return (\n    tau_e_B * g_gl_n + (g_gl_n * (alpha_e_B + (1 - g_gl_n) * rho_e_B) * G) / 3\n  );\n}\n","/* -*- coding: utf-8 -*-\n\nCopyright (c) 2016-2021 Rafael Villar Burke <pachi@rvburke.com>\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n*/\n\nimport React, { useState, useCallback, useEffect } from \"react\";\nimport { Col, Form, Container, Card, Row, Tabs, Tab } from \"react-bootstrap\";\n\nimport Footer from \"./Footer\";\nimport NavBar from \"./Nav\";\n\nimport { ELEMENTOS, g_t_e, g_t_i, g_t_m } from \"../elements\";\n\nconst ACRISTALAMIENTOS = ELEMENTOS.huecos.acristalamientos;\nconst SOMBREAMIENTOS = ELEMENTOS.huecos.sombreamientos;\nconst TIPOSVIDRIO = ACRISTALAMIENTOS.tipos.map((v) => v.name);\nconst TIPOSSOMBRA = SOMBREAMIENTOS.tipos.map((v) => v.name);\n\nconst HuecosParams = (_props) => {\n  const [tipovidrio, setTipovidrio] = useState(TIPOSVIDRIO[0]);\n  const [tiposombra, setTiposombra] = useState(TIPOSSOMBRA[0]);\n  const [tau_e_B, setTau_e_B] = useState(1);\n  const [rho_e_B, setRho_e_B] = useState(0);\n\n  // funciones para dar a los componentes hijos, con declaracin de dependencias\n  const wrapperSetTau_e_B = useCallback(\n    (val) => {\n      setTau_e_B(val);\n    },\n    [setTau_e_B]\n  );\n  const wrapperSetRho_e_B = useCallback(\n    (val) => {\n      setRho_e_B(val);\n    },\n    [setRho_e_B]\n  );\n\n  const vidrio = ACRISTALAMIENTOS.tipos.find((v) => v.name === tipovidrio);\n  const F_w = ACRISTALAMIENTOS.propiedades.F_w;\n  return (\n    <>\n      <Row className=\"well\">\n        <Col>\n          <Form>\n            <Form.Group as={Row} controlId=\"formControlsGlassType\">\n              <Col as={Form.Label} md={4}>\n                Tipo de vidrio:\n              </Col>{\" \"}\n              <Col md={8}>\n                <Form.Control\n                  value={tipovidrio}\n                  onChange={(e) => setTipovidrio(e.target.value)}\n                  as=\"select\"\n                  placeholder=\"select\"\n                >\n                  {TIPOSVIDRIO.map((v) => (\n                    <option value={v} key={\"tipovidrio_\" + v.replace(\" \", \"_\")}>\n                      {v}\n                    </option>\n                  ))}\n                </Form.Control>\n              </Col>\n            </Form.Group>\n            <Form.Group as={Row} controlId=\"formControlsHasShading\">\n              <Col as={Form.Label} md={4}>\n                Dispositivo de proteccin solar mvil:\n              </Col>{\" \"}\n              <Col md={8}>\n                <Form.Control\n                  value={tiposombra}\n                  onChange={(e) => setTiposombra(e.target.value)}\n                  as=\"select\"\n                  placeholder=\"select\"\n                >\n                  {TIPOSSOMBRA.map((v) => (\n                    <option value={v} key={\"tiposombra_\" + v}>\n                      {v}\n                    </option>\n                  ))}\n                </Form.Control>\n              </Col>\n            </Form.Group>\n            {tiposombra === \"Ninguno\" ? null : (\n              <SombrasForm\n                tau_e_B={tau_e_B}\n                rho_e_B={rho_e_B}\n                setTau_e_B={wrapperSetTau_e_B}\n                setRho_e_B={wrapperSetRho_e_B}\n              />\n            )}\n          </Form>\n        </Col>\n      </Row>\n      <Row>\n        <Col>\n          <GlazingPropertiesCard\n            {...{ vidrio, F_w, tiposombra, tau_e_B, rho_e_B }}\n          />\n        </Col>\n      </Row>\n    </>\n  );\n};\n\nconst OPACIDAD = ELEMENTOS.huecos.sombreamientos.propiedades.transmitancia;\nconst REFLEXION = ELEMENTOS.huecos.sombreamientos.propiedades.reflexion;\n\n// Obtn tau y rho a partir de opacidad y color\nconst findTauRho = (opacidad, color) => {\n  const tau_e_B = OPACIDAD.find((v) => v.opacidad === opacidad).tau_e_B;\n  const rho_e_B = REFLEXION.find(\n    (v) => v.color === color && v.opacidad === opacidad\n  ).rho_e_B;\n  return [tau_e_B, rho_e_B];\n};\n\nconst SombrasForm = ({ tau_e_B, setTau_e_B, rho_e_B, setRho_e_B }) => {\n  const [opacidad, setOpacidad] = useState(OPACIDAD[0].opacidad);\n  const [color, setColor] = useState(REFLEXION[0].color);\n\n  // Actualiza el componente madre como efecto de cambiar color y opacidad\n  useEffect(() => {\n    const [tau_e_B, rho_e_B] = findTauRho(opacidad, color);\n    setTau_e_B(tau_e_B);\n    setRho_e_B(rho_e_B);\n  }, [setTau_e_B, setRho_e_B, opacidad, color]);\n\n  return (\n    <>\n      <Form.Group as={Row} controlId=\"formControlsShadingTransparency\">\n        <Form.Label column md={4}>\n          Opacidad del dispositivo de sombra mvil:\n        </Form.Label>{\" \"}\n        <Col md={6}>\n          <Form.Control\n            value={opacidad}\n            onChange={(e) => {\n              setOpacidad(e.target.value);\n            }}\n            as=\"select\"\n            placeholder=\"select\"\n          >\n            {OPACIDAD.map((v) => (\n              <option\n                value={v.opacidad}\n                key={\"opacidad_\" + v.opacidad.replace(\" \", \"_\")}\n              >\n                {v.opacidad}\n              </option>\n            ))}\n          </Form.Control>\n        </Col>\n        <Form.Label column md={1}>\n          &tau;<sub>e,B</sub>:\n        </Form.Label>\n        <Col md={1}>\n          <Form.Control\n            readOnly\n            type=\"text\"\n            value={tau_e_B.toFixed(2)}\n            md={1}\n          />\n        </Col>\n      </Form.Group>\n      <Form.Group as={Row} controlId=\"formControlsShadingColor\">\n        <Form.Label column md={4}>\n          Color del dispositivo de sombra mvil:\n        </Form.Label>{\" \"}\n        <Col md={6}>\n          <Form.Control\n            value={color}\n            onChange={(e) => {\n              setColor(e.target.value);\n            }}\n            as=\"select\"\n            placeholder=\"select\"\n          >\n            {REFLEXION.filter((v) => v.opacidad === opacidad).map((v) => (\n              <option value={v.color} key={\"color_\" + v.color}>\n                {v.color}\n              </option>\n            ))}\n          </Form.Control>\n        </Col>\n        <Form.Label column md={1}>\n          &rho;<sub>e,B</sub>:\n        </Form.Label>\n        <Col md={1}>\n          <Form.Control\n            readOnly\n            type=\"text\"\n            value={rho_e_B.toFixed(2)}\n            md={1}\n          />\n        </Col>\n      </Form.Group>\n    </>\n  );\n};\n\nconst GlazingPropertiesCard = (props) => {\n  const { vidrio, F_w, tiposombra, tau_e_B, rho_e_B } = props;\n  const g_gl_wi = F_w * vidrio.g_gl_n;\n  let g_gl_sh_wi;\n  if (tiposombra === \"Exterior\") {\n    g_gl_sh_wi = g_t_e(vidrio.U_gl, vidrio.g_gl_n, tau_e_B, rho_e_B);\n  } else if (tiposombra === \"Interior\") {\n    g_gl_sh_wi = g_t_i(vidrio.U_gl, vidrio.g_gl_n, tau_e_B, rho_e_B);\n  } else if (tiposombra === \"Integrado\") {\n    g_gl_sh_wi = g_t_m(vidrio.U_gl, vidrio.g_gl_n, tau_e_B, rho_e_B);\n  } else {\n    g_gl_sh_wi = g_gl_wi;\n  }\n  return (\n    <Card>\n      <Card.Header>\n        Propiedades del acristalamiento ({vidrio.name.toLowerCase()},{\" \"}\n        {tiposombra === \"Ninguno\"\n          ? \"sin sombreamiento\"\n          : `sombreamiento ${tiposombra.toLowerCase()}`}\n        )\n      </Card.Header>\n      <Card.Body>\n        <Card.Text>\n          Transmitancia trmica del vidrio,{\" \"}\n          <b>\n            U<sub>gl</sub>\n          </b>{\" \"}\n          = {vidrio.U_gl.toFixed(2)}\n        </Card.Text>\n        <Card.Text>\n          Factor de transmitancia de energa solar del vidrio a incidencia\n          normal,{\" \"}\n          <b>\n            g<sub>gl;n</sub>\n          </b>{\" \"}\n          = {vidrio.g_gl_n.toFixed(2)}\n        </Card.Text>\n        <Card.Text>\n          Factor de dispersin del vidrio,{\" \"}\n          <b>\n            F<sub>w</sub>\n          </b>{\" \"}\n          = {F_w.toFixed(2)}\n        </Card.Text>\n        <Card.Text>\n          Factor de transmitancia de energa solar del vidrio, <b>sin</b> las\n          sombras solares mviles en uso normal,{\" \"}\n          <b>\n            g<sub>gl;wi</sub>\n          </b>{\" \"}\n          = F<sub>w</sub>  g<sub>gl;n</sub> = {g_gl_wi.toFixed(2)}\n        </Card.Text>\n        <Card.Text>\n          Factor de transmitancia de energa solar del vidrio, <b>con</b> las\n          sombras solares mviles en uso normal,{\" \"}\n          <b>\n            g<sub>gl;sh;wi</sub>\n          </b>{\" \"}\n          = {g_gl_sh_wi.toFixed(2)}\n        </Card.Text>\n        {tiposombra === \"Ninguno\" ? null : (\n          <Card.Text>\n            Factor de transmitancia solar del dispositivo de sombra mvil, &tau;\n            <sub>e,B</sub>: {tau_e_B.toFixed(2)}\n          </Card.Text>\n        )}\n        {tiposombra === \"Ninguno\" ? null : (\n          <Card.Text>\n            Factor de reflexin solar del dispositivo de sombra mvil, &rho;\n            <sub>e,B</sub>: {rho_e_B.toFixed(2)}\n          </Card.Text>\n        )}\n      </Card.Body>\n    </Card>\n  );\n};\n\nconst ElementsPage = (props) => {\n  return (\n    <Container fluid>\n      <NavBar route={props.route} />\n      <Row>\n        <Col>\n          <Tabs defaultActiveKey={1} id=\"uncontrolled-tab-example\">\n            <Tab eventKey={1} title=\"Huecos\" className=\"pt-3\">\n              <HuecosParams />\n            </Tab>\n          </Tabs>\n        </Col>\n      </Row>\n      {/* {<DevTools position={{ bottom: 0, right: 20 }} />} */}\n      <Footer />\n    </Container>\n  );\n};\n\nexport default ElementsPage;\n","export default __webpack_public_path__ + \"static/media/5R1C.e9c4d1c6.svg\";","export default __webpack_public_path__ + \"static/media/orientaciones.321f841a.svg\";","/* -*- coding: utf-8 -*-\n\nCopyright (c) 2016-2021 Rafael Villar Burke <pachi@rvburke.com>\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n*/\n\nimport React from \"react\";\nimport {\n  Alert,\n  Button,\n  Col,\n  Container,\n  Row,\n  Image,\n  Tabs,\n  Tab,\n} from \"react-bootstrap\";\n\nimport Footer from \"./Footer\";\nimport NavBar from \"./Nav\";\n\nimport esquema5R1C from \"./img/5R1C.svg\";\nimport orientaciones from \"./img/orientaciones.svg\";\n\nconst HelpPage = (props) => (\n  <Container fluid>\n    <NavBar route={props.route} />\n    <Row>\n      <Col>\n        <h1>EnvolventeCTE</h1>\n        <p>\n          <i>EnvolventeCTE</i> es una aplicacin web de ayuda al clculo de\n          indicadores y parmetros de eficiencia energtica de la envolvente\n          trmica, facilitando la aplicacin del CTE DB-HE (2019).\n        </p>\n        <p>Los indicadores y parmetros implementados son:</p>\n        <ul>\n          <li>\n            <b>Transmitancia trmica global</b> (<b>K</b>)\n          </li>\n          <li>\n            <b>Control solar</b> (\n            <b>\n              q<sub>sol;jul</sub>\n            </b>\n            )\n          </li>\n          <li>\n            <b>Relacin de cambio de aire a 50Pa</b> (\n            <b>\n              n<sub>50</sub>\n            </b>\n            )\n          </li>\n          <li>\n            <b>\n              Parmetros descriptivos de los elementos de la envolvente trmica\n            </b>{\" \"}\n            (<b>U</b>, <b>g</b>, <b>&psi;</b>...)\n          </li>\n        </ul>\n        <Alert variant=\"warning\">\n          <b>NOTA:</b> Esta aplicacin y la informacin contenida en ella no\n          tienen valor reglamentario.\n        </Alert>\n      </Col>\n    </Row>\n    <Row>\n      <Col>\n        <Tabs>\n          <Tab eventKey={1} title=\"Envolvente trmica\" className=\"pt-3\">\n            <Row>\n              <Col>\n                <h4>\n                  Definicin e indicadores de calidad de la envolvente trmica\n                </h4>\n              </Col>\n            </Row>\n            <Row>\n              <Col md={8}>\n                <p>\n                  El apartado de <i>Envolente</i> permite la definicin por\n                  parte del usuario de la envolvente trmica y calcula los\n                  indicadores de calidad (transmitancia trmica global y control\n                  solar).\n                </p>\n                <p>\n                  Los indicadores de calidad en la envolvente trmica se basan\n                  en los descritos en la UNE EN ISO 13790:2008 (e ISO/FDIS\n                  520161).\n                </p>\n                <ul>\n                  <li>\n                    <p>\n                      La{\" \"}\n                      <b>\n                        transmitancia trmica global (<i>K</i>)\n                      </b>{\" \"}\n                      se basa en el coeficiente global de transmisin de calor (\n                      <i>\n                        H<sub>tr,adj</sub>\n                      </i>\n                      , apartado 8.3.1, ec. 17 de la{\" \"}\n                      <i>UNE EN ISO 13790:2008</i> y apartado 6.6.5.2, ec. 108\n                      de la <i>ISO/FDIS 52016-1</i>) repercutido por la\n                      superficie de intercambio con el exterior.\n                    </p>\n                    <p>\n                      <b>\n                        Mide la capacidad global de evitar el intercambio de\n                        calor por conduccin.\n                      </b>\n                    </p>\n                  </li>\n                  <li>\n                    <p>\n                      El parmetro de{\" \"}\n                      <b>\n                        control solar (q<sub>sol;jul</sub>)\n                      </b>{\" \"}\n                      se basa en el{\" \"}\n                      <i>\n                        flujo de calor por ganancias solares, &Phi;\n                        <sub>sol;k</sub>\n                      </i>\n                      , (apartado 11.3.2, ec. 43 de la{\" \"}\n                      <i>UNE EN ISO 13790:2008</i> y apartado 6.5.13.2, ec. 69\n                      de la <i>ISO/FDIS 52016-1</i>), despreciando la\n                      reirradiacin al cielo, repercutido por la superficie til\n                      considerada y considerando activadas las protecciones\n                      solares mviles.\n                    </p>\n                    <p>\n                      <b>\n                        Mide la posibilidad de controlar las ganancias solares\n                      </b>{\" \"}\n                      (incluyendo el uso de dispositivos solares mviles y el\n                      efecto de otros obstculos fijos o remotos).\n                    </p>\n                  </li>\n                  <li>\n                    <p>\n                      La{\" \"}\n                      <b>\n                        relacin de cambio de aire a 50 Pa (n<sub>50</sub>)\n                      </b>{\" \"}\n                      evala la permeabilidad de la envolvente al paso del aire,\n                      considerando una diferencia de presiones entre el interior\n                      y el exterior de 50 Pa. El programa realiza el clculo del\n                      valor terico de referencia del <i>CTE DB-HE</i> de\n                      acuerdo al Anejo H (determinacin terica o en base a\n                      ensayo de la norma <i>UNE EN ISO 13829:2002)</i>.\n                    </p>\n                    <p>\n                      <b>Mide la permeabilidad al aire</b> y, por tanto, se\n                      relaciona con el intercambio de calor por infiltracin o\n                      exfiltracin de aire.\n                    </p>\n                  </li>\n                </ul>\n\n                <p>\n                  <small>\n                    NOTA: En el indicador de ganancias solares no se han\n                    considerado de forma separada las componentes difusa y\n                    directa al tener en cuenta el efecto de las obstrucciones\n                    solares, siguiendo el criterio de la{\" \"}\n                    <i>UNE EN ISO 13790:2008</i> y no la formulacin de la{\" \"}\n                    <i>ISO/FDIS 52016-1</i> (ver ec. 69, apartado 6.5.13.2).\n                  </small>\n                </p>\n              </Col>\n              <Col md={4}>\n                <Image fluid alt=\"Esquema 5R1C EN 13790\" src={esquema5R1C} />\n              </Col>\n            </Row>\n          </Tab>\n          <Tab eventKey={2} title=\"Clima\" className=\"pt-3\">\n            <Row>\n              <Col>\n                <h4>Parmetros climticos</h4>\n                <p>\n                  En la seccin de <i>Parmetros</i> se recogen aquellos\n                  parmetros de la envolvente trmica relacionados con el clima\n                  exterior.\n                </p>\n                <p>\n                  La aplicacin calcula, para superficies inclinadas y\n                  orientadas, los valores de:\n                </p>\n                <ul>\n                  <li>\n                    <b>\n                      Irradiacin acumulada mensual (\n                      <i>\n                        H<sub>sol;m</sub>\n                      </i>\n                      )\n                    </b>\n                  </li>\n                  <li>\n                    <b>\n                      Irradiacin acumulada en el mes de julio (\n                      <i>\n                        H<sub>sol;jul</sub>\n                      </i>\n                      )\n                    </b>\n                  </li>\n                  <li>\n                    <b>\n                      factor de reduccin para sombreamientos solares mviles (\n                      <i>\n                        f<sub>sh;with</sub>\n                      </i>\n                      )\n                    </b>{\" \"}\n                    de superficies inclinadas y orientadas.\n                  </li>\n                </ul>\n                <p>\n                  Los clculos para las distintas orientaciones y climas usan\n                  valores obtenidos a partir de los archivos climticos de\n                  referencia del <i>CTE DB-HE</i> y el procedimiento de la norma{\" \"}\n                  <i>ISO/FDIS 520101:2016</i>.\n                </p>\n                <p>\n                  <Button\n                    variant=\"info\"\n                    size=\"xsmall\"\n                    href=\"http://www.codigotecnico.org/images/stories/pdf/ahorroEnergia/CTEdatosMET_20140418.zip\"\n                    target=\"_blank\"\n                  >\n                    Descargar climas de referencia de codigotecnico.org{\" \"}\n                  </Button>\n                  .\n                </p>\n              </Col>\n            </Row>\n            <Row>\n              <Col>\n                <h4>Orientaciones de los elementos de la envolvente</h4>\n                <Col md={{ span: 8, offset: 2 }}>\n                  <Image\n                    fluid\n                    alt=\"Roseta de orientaciones de superficies\"\n                    src={orientaciones}\n                  />\n                </Col>\n              </Col>\n            </Row>\n          </Tab>\n          <Tab eventKey={3} title=\"Elementos\" className=\"pt-3\">\n            <Row>\n              <Col>\n                <h4>Elementos de la envolvente trmica</h4>\n                <p>\n                  La aplicacin permite obtener algunos parmetros descriptivos\n                  del comportamiento trmico de elementos de la envolvente\n                  trmica a partir de sus caractersticas generales o parmetros\n                  de diseo.\n                </p>\n                <p>\n                  Por ejemplo, para los huecos se puede obtener: la\n                  <i>transmitancia trmica</i> (U<sub>H</sub>), el{\" \"}\n                  <i>factor solar del vidrio a incidencia normal</i> (g\n                  <sub>gl;n</sub>), el <i>factor solar del hueco</i> (g\n                  <sub>gl;wi</sub>), el{\" \"}\n                  <i>\n                    factor solar del hueco teniendo en cuenta los sombreamientos\n                    solares mviles\n                  </i>\n                  (g<sub>gl;sh;wi</sub>).\n                </p>\n              </Col>\n            </Row>\n          </Tab>\n        </Tabs>\n      </Col>\n    </Row>\n    <Footer />\n  </Container>\n);\n\nexport default HelpPage;\n","/* -*- coding: utf-8 -*-\n\nCopyright (c) 2016-2021 Rafael Villar Burke <pachi@rvburke.com>\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n*/\n\n// rea de arrastrar y soltar https://react-dropzone.js.org/\n\nimport React, { useMemo } from \"react\";\nimport { useDropzone } from \"react-dropzone\";\n\nconst baseStyle = {\n  flex: 1,\n  display: \"flex\",\n  flexDirection: \"column\",\n  alignItems: \"center\",\n  padding: \"20px\",\n  borderWidth: 2,\n  borderRadius: 2,\n  borderColor: \"#eeeeee\",\n  borderStyle: \"dashed\",\n  backgroundColor: \"lavender\",\n  color: \"midnightblue\",\n  outline: \"none\",\n  transition: \"border .24s ease-in-out\",\n  height: \"100%\",\n};\n\nconst activeStyle = {\n  borderColor: \"#2196f3\",\n};\n\nconst acceptStyle = {\n  borderColor: \"#00e676\",\n};\n\nconst rejectStyle = {\n  borderColor: \"#ff1744\",\n};\n\nexport default function StyledDropzone(props) {\n  const {\n    onDrop,\n    message = (\n      <p>\n        Arrastre y suelte aqu el archivo o pulse para seleccionarlo del equipo\n      </p>\n    ),\n    accept = \"application/json, .json\",\n    maxFiles = 1,\n    containerHeight = \"200px\",\n    title = \"Arrastre un archivo sobre esta zona o pulse para seleccionar del sistema de archivos.\",\n  } = props;\n  const {\n    fileRejections,\n    getRootProps,\n    getInputProps,\n    isDragActive,\n    isDragAccept,\n    isDragReject,\n  } = useDropzone({ accept, maxFiles, onDrop });\n\n  const style = useMemo(\n    () => ({\n      ...baseStyle,\n      ...(isDragActive ? activeStyle : {}),\n      ...(isDragAccept ? acceptStyle : {}),\n      ...(isDragReject ? rejectStyle : {}),\n    }),\n    [isDragActive, isDragReject, isDragAccept]\n  );\n\n  const fileRejectionItems = fileRejections.map(({ file, errors }) => (\n    <li key={file.path}>\n      {file.path} - {file.size} bytes\n      <ul>\n        {errors.map((e) => (\n          <li key={e.code}>{e.message}</li>\n        ))}\n      </ul>\n    </li>\n  ));\n\n  return (\n    <div\n      className=\"container\"\n      style={{ minHeight: containerHeight }}\n      title={title}\n    >\n      <div {...getRootProps({ style })}>\n        <input {...getInputProps()} />\n        {message}\n      </div>\n      {fileRejections.length === 0 ? null : (\n        <aside>\n          <p>Archivos con formato incorrecto:</p>\n          <ul>{fileRejectionItems}</ul>\n        </aside>\n      )}\n    </div>\n  );\n}\n","export default __webpack_public_path__ + \"static/media/outline-new_document-24px.8728c803.svg\";","/* -*- coding: utf-8 -*-\n\nCopyright (c) 2016-2021 Rafael Villar Burke <pachi@rvburke.com>\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n*/\n\nimport { version } from \"../../package.json\";\nimport { observer } from \"mobx-react-lite\";\nimport React, { useContext } from \"react\";\nimport { Alert, Button, Col, Container, Image, Row } from \"react-bootstrap\";\nimport { Link } from \"react-router-dom\";\nimport AppState from \"../stores/AppState\";\nimport IndicatorsPanel from \"./building/IndicatorsPanel\";\nimport Dropzone from \"./DropZone.js\";\nimport Footer from \"./Footer\";\nimport imglogo from \"./img/logo.svg\";\nimport iconclearmodel from \"./img/outline-new_document-24px.svg\";\nimport NavBar from \"./Nav\";\n\nconst MainPage = observer((props) => {\n  const appstate = useContext(AppState);\n\n  const handleUpload = (acceptedFiles, _rejectedFiles, _event) => {\n    if (acceptedFiles.length > 0) {\n      const file = acceptedFiles[0];\n      const reader = new FileReader();\n      reader.onload = (rawdata) => {\n        if (\n          file.name.includes(\"KyGananciasSolares.txt\") ||\n          file.path.includes(\"KyGananciasSolares.txt\")\n        ) {\n          appstate.loadData(rawdata.target.result, \"FSHOBST\");\n        } else if (\n          file.name.toLowerCase().includes(\".ctehexml\") ||\n          file.path.toLowerCase().includes(\".ctehexml\")\n        ) {\n          appstate.loadData(rawdata.target.result, \"CTEHEXML\");\n        } else {\n          appstate.loadData(rawdata.target.result, \"JSON\");\n        }\n      };\n      reader.readAsText(file);\n    }\n  };\n\n  const dropHeight = \"150px\";\n  return (\n    <Container fluid>\n      <NavBar route={props.route} />\n      <Row>\n        <Col md={3} className=\"text-center\">\n          <Image src={imglogo} width=\"90%\" />\n          <Alert variant=\"warning\">\n            <b>NOTA:</b> Esta aplicacin y la informacin contenida en ella{\" \"}\n            <b>no tienen valor reglamentario</b>.\n          </Alert>\n        </Col>\n        <Col md={9}>\n          <Row>\n            <Col>\n              <h1>\n                EnvolventeCTE <small>(v.{version})</small>\n              </h1>\n              <p>\n                Aplicacin para el clculo de indicadores de calidad y\n                parmetros descriptivos de la envolvente trmica de los\n                edificios para la evaluacin energtica y aplicacin del CTE\n                DB-HE (2019):\n              </p>\n              <ul>\n                <li>\n                  <b>transmitancia trmica global</b> (<b>K</b>)\n                </li>\n                <li>\n                  <b>tasa de renovacin de aire a 50 Pa</b> (\n                  <b>\n                    n<sub>50</sub>\n                  </b>\n                  ) y valor de referencia (n<sub>50,ref</sub>)\n                </li>\n                <li>\n                  <b>parmetro de control solar</b> (\n                  <b>\n                    q<sub>sol;jul</sub>\n                  </b>\n                  )\n                </li>\n                <li>\n                  rea til a efectos del clculo de indicadores energticos (A\n                  <sub>util</sub>), compacidad (<b>V/A</b>) , volumen bruto (\n                  <b>V</b>) , volumen neto (\n                  <b>\n                    V<sub>int</sub>\n                  </b>\n                  ), ...\n                </li>\n              </ul>\n\n              <p>Los distintos apartados del programa permiten:</p>\n              <ul>\n                <li>\n                  <Link to=\"/building\">Edificio</Link>: visualizar, introducir,\n                  editar los componentes de la envolvente trmica del edificio.\n                </li>\n                <li>\n                  <Link to=\"/climate\">Clima</Link>: explorar diversos parmetros\n                  relacionados con el clima exterior del edificio.\n                </li>\n                <li>\n                  <Link to=\"/elements\">Elementos</Link>: ayudas para el clculo\n                  de parmetros descriptivos de algunos elementos de la\n                  envolvente trmica.\n                </li>\n              </ul>\n            </Col>\n          </Row>\n          <Row>\n            <Col>\n              <h3>\n                Parmetros de eficiencia energtica de la envolvente trmica\n              </h3>\n              <p>Resultados obtenidos para el modelo actual:</p>\n              <IndicatorsPanel />\n              <Alert variant=\"info\">\n                Pulse en el botn de &quot;Detalles&quot; para ms informacin.\n              </Alert>\n            </Col>\n          </Row>\n          <Row>\n            <Col>\n              <h3>Carga de datos</h3>\n            </Col>\n          </Row>\n          <Row>\n            <Col>\n              <h4>Opcin 1: modelo nuevo</h4>\n              <p>\n                Pulse este botn para partir de un modelo vaco en el que\n                introducir de cero los elementos de la envolvente trmica:\n              </p>\n\n              <Button\n                variant=\"secondary\"\n                block\n                onClick={(_e) => appstate.clearModel()}\n                title=\"Pulse para dejar el modelo actual vaco, sin elementos definidos\"\n                style={{\n                  fontSize: 20,\n                  height: 50,\n                  marginTop: 20,\n                  marginBottom: 20,\n                }}\n              >\n                <img src={iconclearmodel} alt=\"Limpiar modelo\" /> Modelo vaco\n              </Button>\n            </Col>\n          </Row>\n          <Row>\n            <Col>\n              <h4>Opcin 2: cargar modelo desde archivo de EnvolventeCTE</h4>\n              <p>\n                Arrastre y suelte en el rea inferior o pulse para importar\n                datos desde un archivo <b>.json</b> generado anteriormente por\n                EnvolventeCTE.\n              </p>\n            </Col>\n          </Row>\n          <Row style={{ fontSize: 18, height: dropHeight }}>\n            <Col>\n              <Dropzone\n                onDrop={handleUpload}\n                accept={\"application/json, .json\"}\n                message={\n                  <>\n                    <h3>EnvolventeCTE</h3>\n                    <p className=\"text-center\">\n                      Importar modelo nuevo desde archivo <i>.json</i>\n                    </p>\n                  </>\n                }\n                containerHeight={dropHeight}\n              />\n            </Col>\n          </Row>\n          <Row>\n            <Col>\n              <h4>\n                Opcin 3: importar modelo y/o factores de sombras remotas desde\n                archivo de HULC\n              </h4>\n              <p>\n                Arrastre y suelte en el rea inferior o pulse para importar\n                datos desde un archivo <b>.ctehexml</b> o un archivo{\" \"}\n                <b>KyGananciasSolares.txt</b> de HULC. Este ltimo solo importa\n                los factores de sombras remotas al modelo ya cargado,\n                modificando la propiedad correspondiente de los huecos.\n              </p>\n            </Col>\n          </Row>\n          <Row style={{ paddingTop: 20, fontSize: 18, height: dropHeight }}>\n            <Col md={8}>\n              <Dropzone\n                onDrop={handleUpload}\n                accept={\"application/octet-stream, .ctehexml\"}\n                message={\n                  <>\n                    <h3>HULC</h3>\n                    <p className=\"text-center\">\n                      Importar modelo nuevo desde archivo <i>.ctehexml</i>\n                    </p>\n                  </>\n                }\n                containerHeight={dropHeight}\n              />\n            </Col>\n            <Col\n              style={{\n                textAlign: \"center\",\n                verticalAlign: \"middle\",\n                fontSize: 40,\n              }}\n            >\n              +\n            </Col>\n            <Col md={3}>\n              <Dropzone\n                onDrop={handleUpload}\n                accept={\"text/plain, .txt\"}\n                message={\n                  <>\n                    <h3>HULC</h3>\n                    <p className=\"text-center\">\n                      Importar al modelo existente <b>solo</b> los factores de\n                      sombras remotas de los huecos desde archivo{\" \"}\n                      <i>KyGananciasSolares.txt</i>\n                    </p>\n                  </>\n                }\n                containerHeight={dropHeight}\n              />\n            </Col>\n          </Row>\n        </Col>\n      </Row>\n      <Footer />\n    </Container>\n  );\n});\n\nexport default MainPage;\n","/* -*- coding: utf-8 -*-\n\nCopyright (c) 2016-2021 Rafael Villar Burke <pachi@rvburke.com>\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n*/\n\nimport React, { useState } from \"react\";\nimport { HashRouter, Redirect, Route, Switch } from \"react-router-dom\";\n\nimport \"bootstrap/dist/css/bootstrap.min.css\";\n// import \"bootstrap/dist/css/bootstrap-theme.css\";\nimport \"react-bootstrap-table-next/dist/react-bootstrap-table2.min.css\";\n\nimport AboutPage from \"./AboutPage\";\nimport BuildingPage from \"./BuildingPage\";\nimport ThreeDPage from \"./ThreeDPage\";\nimport ClimatePage from \"./ClimatePage\";\nimport ElementsPage from \"./ElementsPage\";\nimport HelpPage from \"./HelpPage\";\nimport MainPage from \"./MainPage\";\n\nconst App = () => {\n  const [activeKey, setActiveKey] = useState(\"spaces\");\n\n  return (\n    <HashRouter>\n      <Switch>\n        <Route exact path=\"/\" render={(props) => <MainPage {...props} />} />\n        <Route\n          exact\n          path=\"/building\"\n          render={(props) => (\n            <BuildingPage\n              {...props}\n              activeKey={activeKey}\n              setActiveKey={setActiveKey}\n            />\n          )}\n        />\n        <Route exact path=\"/3d\" component={ThreeDPage} />\n        <Route exact path=\"/climate\" component={ClimatePage} />\n        <Route exact path=\"/elements\" component={ElementsPage} />\n        <Route exact path=\"/help\" render={(props) => <HelpPage {...props} />} />\n        <Route exact path=\"/about\" component={AboutPage} />\n        <Route path=\"*\" render={() => <Redirect to=\"/\" />} />\n      </Switch>\n    </HashRouter>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./components/App\";\nimport \"./index.css\";\n\nimport { set_panic_hook, set_log_hook } from \"wasm-envolventecte\";\n\nset_panic_hook();\nset_log_hook(\"warn\");\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n","import * as wasm from './wasm_envolventecte_bg.wasm';\n\nconst lTextDecoder = typeof TextDecoder === 'undefined' ? (0, module.require)('util').TextDecoder : TextDecoder;\n\nlet cachedTextDecoder = new lTextDecoder('utf-8', { ignoreBOM: true, fatal: true });\n\ncachedTextDecoder.decode();\n\nlet cachegetUint8Memory0 = null;\nfunction getUint8Memory0() {\n    if (cachegetUint8Memory0 === null || cachegetUint8Memory0.buffer !== wasm.memory.buffer) {\n        cachegetUint8Memory0 = new Uint8Array(wasm.memory.buffer);\n    }\n    return cachegetUint8Memory0;\n}\n\nfunction getStringFromWasm0(ptr, len) {\n    return cachedTextDecoder.decode(getUint8Memory0().subarray(ptr, ptr + len));\n}\n\nconst heap = new Array(32).fill(undefined);\n\nheap.push(undefined, null, true, false);\n\nlet heap_next = heap.length;\n\nfunction addHeapObject(obj) {\n    if (heap_next === heap.length) heap.push(heap.length + 1);\n    const idx = heap_next;\n    heap_next = heap[idx];\n\n    heap[idx] = obj;\n    return idx;\n}\n\nfunction getObject(idx) { return heap[idx]; }\n\nlet WASM_VECTOR_LEN = 0;\n\nconst lTextEncoder = typeof TextEncoder === 'undefined' ? (0, module.require)('util').TextEncoder : TextEncoder;\n\nlet cachedTextEncoder = new lTextEncoder('utf-8');\n\nconst encodeString = (typeof cachedTextEncoder.encodeInto === 'function'\n    ? function (arg, view) {\n    return cachedTextEncoder.encodeInto(arg, view);\n}\n    : function (arg, view) {\n    const buf = cachedTextEncoder.encode(arg);\n    view.set(buf);\n    return {\n        read: arg.length,\n        written: buf.length\n    };\n});\n\nfunction passStringToWasm0(arg, malloc, realloc) {\n\n    if (realloc === undefined) {\n        const buf = cachedTextEncoder.encode(arg);\n        const ptr = malloc(buf.length);\n        getUint8Memory0().subarray(ptr, ptr + buf.length).set(buf);\n        WASM_VECTOR_LEN = buf.length;\n        return ptr;\n    }\n\n    let len = arg.length;\n    let ptr = malloc(len);\n\n    const mem = getUint8Memory0();\n\n    let offset = 0;\n\n    for (; offset < len; offset++) {\n        const code = arg.charCodeAt(offset);\n        if (code > 0x7F) break;\n        mem[ptr + offset] = code;\n    }\n\n    if (offset !== len) {\n        if (offset !== 0) {\n            arg = arg.slice(offset);\n        }\n        ptr = realloc(ptr, len, len = offset + arg.length * 3);\n        const view = getUint8Memory0().subarray(ptr + offset, ptr + len);\n        const ret = encodeString(arg, view);\n\n        offset += ret.written;\n    }\n\n    WASM_VECTOR_LEN = offset;\n    return ptr;\n}\n\nlet cachegetInt32Memory0 = null;\nfunction getInt32Memory0() {\n    if (cachegetInt32Memory0 === null || cachegetInt32Memory0.buffer !== wasm.memory.buffer) {\n        cachegetInt32Memory0 = new Int32Array(wasm.memory.buffer);\n    }\n    return cachegetInt32Memory0;\n}\n\nfunction dropObject(idx) {\n    if (idx < 36) return;\n    heap[idx] = heap_next;\n    heap_next = idx;\n}\n\nfunction takeObject(idx) {\n    const ret = getObject(idx);\n    dropObject(idx);\n    return ret;\n}\n/**\n* @returns {string}\n*/\nexport function get_version() {\n    try {\n        wasm.get_version(8);\n        var r0 = getInt32Memory0()[8 / 4 + 0];\n        var r1 = getInt32Memory0()[8 / 4 + 1];\n        return getStringFromWasm0(r0, r1);\n    } finally {\n        wasm.__wbindgen_free(r0, r1);\n    }\n}\n\n/**\n*/\nexport function set_panic_hook() {\n    wasm.set_panic_hook();\n}\n\n/**\n* @param {string} level\n*/\nexport function set_log_hook(level) {\n    var ptr0 = passStringToWasm0(level, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n    var len0 = WASM_VECTOR_LEN;\n    wasm.set_log_hook(ptr0, len0);\n}\n\n/**\n* Carga datos de radiacin acumulada mensual\n* @returns {any}\n*/\nexport function get_monthly_radiation_data() {\n    var ret = wasm.get_monthly_radiation_data();\n    return takeObject(ret);\n}\n\nlet stack_pointer = 32;\n\nfunction addBorrowedObject(obj) {\n    if (stack_pointer == 1) throw new Error('out of js stack');\n    heap[--stack_pointer] = obj;\n    return stack_pointer;\n}\n/**\n* Calcula indicadores de HE1\n* @param {any} model_js\n* @returns {any}\n*/\nexport function he1_indicators(model_js) {\n    try {\n        var ret = wasm.he1_indicators(addBorrowedObject(model_js));\n        return takeObject(ret);\n    } finally {\n        heap[stack_pointer++] = undefined;\n    }\n}\n\n/**\n* Actualiza factor de reduccin por obstculos remotos\n* @param {any} model_js\n* @returns {any}\n*/\nexport function update_fshobst(model_js) {\n    try {\n        var ret = wasm.update_fshobst(addBorrowedObject(model_js));\n        return takeObject(ret);\n    } finally {\n        heap[stack_pointer++] = undefined;\n    }\n}\n\n/**\n* Carga datos desde cadena de texto JSON\n* @param {string} data\n* @returns {any}\n*/\nexport function load_data_from_json(data) {\n    var ptr0 = passStringToWasm0(data, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n    var len0 = WASM_VECTOR_LEN;\n    var ret = wasm.load_data_from_json(ptr0, len0);\n    return takeObject(ret);\n}\n\n/**\n* Carga datos desde cadena de texto .ctehexml\n* @param {string} data\n* @returns {any}\n*/\nexport function load_data_from_ctehexml(data) {\n    var ptr0 = passStringToWasm0(data, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n    var len0 = WASM_VECTOR_LEN;\n    var ret = wasm.load_data_from_ctehexml(ptr0, len0);\n    return takeObject(ret);\n}\n\n/**\n* Carga datos desde cadena de texto KyGananciasSolares.txt\n* @param {string} data\n* @returns {any}\n*/\nexport function load_fshobst_data_from_kyg(data) {\n    var ptr0 = passStringToWasm0(data, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n    var len0 = WASM_VECTOR_LEN;\n    var ret = wasm.load_fshobst_data_from_kyg(ptr0, len0);\n    return takeObject(ret);\n}\n\nexport const __wbindgen_string_new = function(arg0, arg1) {\n    var ret = getStringFromWasm0(arg0, arg1);\n    return addHeapObject(ret);\n};\n\nexport const __wbindgen_json_parse = function(arg0, arg1) {\n    var ret = JSON.parse(getStringFromWasm0(arg0, arg1));\n    return addHeapObject(ret);\n};\n\nexport const __wbindgen_json_serialize = function(arg0, arg1) {\n    const obj = getObject(arg1);\n    var ret = JSON.stringify(obj === undefined ? null : obj);\n    var ptr0 = passStringToWasm0(ret, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n    var len0 = WASM_VECTOR_LEN;\n    getInt32Memory0()[arg0 / 4 + 1] = len0;\n    getInt32Memory0()[arg0 / 4 + 0] = ptr0;\n};\n\nexport const __wbg_new_59cb74e423758ede = function() {\n    var ret = new Error();\n    return addHeapObject(ret);\n};\n\nexport const __wbg_stack_558ba5917b466edd = function(arg0, arg1) {\n    var ret = getObject(arg1).stack;\n    var ptr0 = passStringToWasm0(ret, wasm.__wbindgen_malloc, wasm.__wbindgen_realloc);\n    var len0 = WASM_VECTOR_LEN;\n    getInt32Memory0()[arg0 / 4 + 1] = len0;\n    getInt32Memory0()[arg0 / 4 + 0] = ptr0;\n};\n\nexport const __wbg_error_4bb6c2a97407129a = function(arg0, arg1) {\n    try {\n        console.error(getStringFromWasm0(arg0, arg1));\n    } finally {\n        wasm.__wbindgen_free(arg0, arg1);\n    }\n};\n\nexport const __wbindgen_object_drop_ref = function(arg0) {\n    takeObject(arg0);\n};\n\nexport const __wbindgen_rethrow = function(arg0) {\n    throw takeObject(arg0);\n};\n\n"],"sourceRoot":""}